<html><!-- Mirrored from developer.mozilla.org/en-US/docs/Games/Techniques/Controls_Gamepad_API by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Feb 2023 04:46:17 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="../../../../favicon-48x48.cbbd161b.png"><link rel="apple-touch-icon" href="../../../../apple-touch-icon.6803c6f0.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="../../../../manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/opensearch.xml" title="MDN Web Docs"><title>Implementing controls using the Gamepad API</title><link rel="alternate" title="ゲームパッド API を使用したコントロールの実装" href="https://developer.mozilla.org/ja/docs/Games/Techniques/Controls_Gamepad_API" hreflang="ja"><link rel="alternate" title="Реализация элементов управления с помощью API Gamepad" href="https://developer.mozilla.org/ru/docs/Games/Techniques/Controls_Gamepad_API" hreflang="ru"><link rel="alternate" title="使用 Gamepad API 实现控制" href="https://developer.mozilla.org/zh-CN/docs/Games/Techniques/Controls_Gamepad_API" hreflang="zh"><link rel="alternate" title="Implementing controls using the Gamepad API" href="Controls_Gamepad_API.html" hreflang="en"><meta name="robots" content="index, follow"><meta name="description" content="The Gamepad API is very easy to develop with. Now it's easier than ever to deliver a console-like experience to the browser without the need for any plugins. You can play the full version of the Hungry Fridge game directly in your browser. Check the other resources on the Gamepad API Content Kit."><meta property="og:url" content="Controls_Gamepad_API.html"><meta property="og:title" content="Implementing controls using the Gamepad API - Game development | MDN"><meta property="og:locale" content="en-US"><meta property="og:description" content="The Gamepad API is very easy to develop with. Now it's easier than ever to deliver a console-like experience to the browser without the need for any plugins. You can play the full version of the Hungry Fridge game directly in your browser. Check the other resources on the Gamepad API Content Kit."><meta property="og:image" content="../../../../mdn-social-share.cd6c4a5a.png"><meta property="twitter:card" content="summary_large_image"><link rel="canonical" href="Controls_Gamepad_API.html"><style media="print">.article-actions-container,.document-toc-container,.language-menu,.main-menu-toggle,.mdn-cta-container,.on-github,.page-footer,.sidebar,.top-navigation-main,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><script src="../../../../static/js/ga.js" defer=""></script><script defer="defer" src="../../../../static/js/main.5c9d40d0.js"></script><link href="../../../../static/css/main.7d378400.css" rel="stylesheet"></head><body><script>document.body.addEventListener("load",(t=>{t.target.classList.contains("interactive")&&t.target.setAttribute("data-readystate","complete")}),{capture:!0});const c={light:"#ffffff",dark:"#1b1b1b"};if(window&&document.documentElement)try{const t=window.localStorage.getItem("theme");t&&(document.documentElement.className=t,document.documentElement.style.backgroundColor=c[t])}catch(t){console.warn("Unable to read theme from localStorage",t)}</script><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#top-nav-search-input">Skip to search</a></li><li><a id="skip-select-language" href="#languages-switcher-button">Skip to select language</a></li></ul><div class="page-wrapper   document-page"><div class="main-document-header-container"><header class="main-document-header-container top-navigation 
      
      "><div class="container "><div class="top-navigation-wrap"><a href="https://developer.mozilla.org/en-US/" class="logo" aria-label="MDN homepage"><svg id="mdn-docs-logo" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 694.9 104.4" style="enable-background:new 0 0 694.9 104.4" xml:space="preserve" role="img"><title>MDN Web Docs</title><style>.logo-m{fill:var(--text-link)}</style><g class="logo-m"><path d="M40.3 0 11.7 92.1H0L28.5 0h11.8zM50.7 0v92.1H40.3V0h10.4zM91 0 62.5 92.1H50.8L79.3 0H91zM101.4 0v92.1H91V0h10.4z"></path></g><path class="logo-m" d="M627.9 95.6h67v8.8h-67v-8.8z"></path><g style="fill:var(--text-primary)"><path d="M367 42h-4l-10.7 30.8h-5.5l-10.8-26h-.4l-10.5 26h-5.2L308.7 42h-3.8v-5.6H323V42h-6.5l6.8 20.4h.4l10.3-26h4.7l11.2 26h.5l5.7-20.3h-6.2v-5.6H367V42zM401.9 62c-.4 3.2-2 5.9-4.7 8.2-2.8 2.3-6.5 3.4-11.3 3.4-5.4 0-9.7-1.6-13.1-4.7-3.3-3.2-5-7.7-5-13.7 0-5.7 1.6-10.3 4.7-14s7.4-5.5 12.9-5.5c5.1 0 9.1 1.6 11.9 4.7s4.3 6.9 4.3 11.3c0 1.5-.2 3-.5 4.7h-25.6c.3 7.7 4 11.6 10.9 11.6 2.9 0 5.1-.7 6.5-2 1.5-1.4 2.5-3 3-4.9l6 .9zM394 51.3c.2-2.4-.4-4.7-1.8-6.9s-3.8-3.3-7-3.3c-3.1 0-5.3 1-6.9 3-1.5 2-2.5 4.4-2.8 7.2H394zM445 53.7c0 5-1.3 9.5-4 13.7s-6.9 6.2-12.7 6.2c-6 0-10.3-2.2-12.7-6.7-.1.4-.2 1.4-.4 2.9s-.3 2.5-.4 2.9h-7.3c.3-1.7.6-3.5.8-5.3.3-1.8.4-3.7.4-5.5V22.3h-6v-5.6H416v27c1.1-2.2 2.7-4.1 4.7-5.7 2-1.6 4.8-2.4 8.4-2.4 4.6 0 8.4 1.6 11.4 4.7 3 3.2 4.5 7.6 4.5 13.4zm-7.7.6c0-4.2-1-7.4-3-9.5-2-2.2-4.4-3.3-7.4-3.3-3.4 0-6 1.2-8 3.7-1.9 2.4-2.9 5-3 7.7V57c0 3 1 5.6 3 7.7s4.5 3.1 7.6 3.1c3.6 0 6.3-1.3 8.1-3.9 1.8-2.7 2.7-5.9 2.7-9.6zM506.5 72.8h-13.2v-7.2c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2 5.7 0 9.8 2.2 12.3 6.5V22.3h-8.6v-5.6h15.8v50.6h6v5.5zM493.2 56v-4.4c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zM546.3 54.6c0 5.6-1.8 10.2-5.3 13.7s-8.2 5.3-13.9 5.3-10.1-1.7-13.4-5.1c-3.3-3.4-5-7.9-5-13.5 0-5.3 1.6-9.9 4.7-13.7 3.2-3.8 7.9-5.7 14.2-5.7s11 1.9 14.1 5.7c3 3.7 4.6 8.1 4.6 13.3zm-7.7-.2c0-4-1-7.2-3-9.5s-4.8-3.5-8.2-3.5c-3.6 0-6.4 1.2-8.3 3.7s-2.9 5.6-2.9 9.5c0 3.7.9 6.8 2.8 9.4 1.9 2.6 4.6 3.9 8.3 3.9 3.6 0 6.4-1.3 8.4-3.8 1.9-2.6 2.9-5.8 2.9-9.7zM583.6 60.2c-.4 3.2-1.9 6.3-4.4 9.1-2.5 2.9-6.4 4.3-11.8 4.3-5.2 0-9.4-1.6-12.6-4.8-3.2-3.2-4.8-7.7-4.8-13.7 0-5.5 1.6-10.1 4.7-13.9 3.2-3.8 7.6-5.7 13.2-5.7 2.3 0 4.6.3 6.7.8 2.2.5 4.2 1.5 6.2 2.9l1.5 9.5-5.9.7-1.3-6.1c-2.1-1.2-4.5-1.8-7.2-1.8-3.5 0-6.1 1.2-7.7 3.7-1.7 2.5-2.5 5.7-2.5 9.6 0 4.1.9 7.3 2.7 9.5 1.8 2.3 4.4 3.4 7.8 3.4 5.2 0 8.2-2.9 9.2-8.8l6.2 1.3zM618.3 62.1c0 3.6-1.5 6.5-4.6 8.5s-7 3-11.7 3c-5.7 0-10.6-1.2-14.6-3.6l1.2-8.8 5.7.6-.2 4.7c1.1.5 2.3.9 3.6 1.1s2.6.3 3.9.3c2.4 0 4.5-.4 6.5-1.3 1.9-.9 2.9-2.2 2.9-4.1 0-1.8-.8-3.1-2.3-3.8s-3.5-1.3-5.8-1.7-4.6-.9-6.9-1.4c-2.3-.6-4.2-1.6-5.7-2.9-1.6-1.4-2.3-3.5-2.3-6.3 0-4.1 1.5-6.9 4.6-8.5s6.4-2.4 9.9-2.4c2.6 0 5 .3 7.2.9 2.2.6 4.3 1.4 6.1 2.4l.8 8.8-5.8.7-.8-5.7c-2.3-1-4.7-1.6-7.2-1.6-2.1 0-3.7.4-5.1 1.1-1.3.8-2 2-2 3.8 0 1.7.8 2.9 2.3 3.6 1.5.7 3.4 1.2 5.7 1.6 2.2.4 4.5.8 6.7 1.4 2.2.6 4.1 1.6 5.7 3 1.4 1.6 2.2 3.7 2.2 6.6zM197.6 73.2h-17.1v-5.5h3.8V51.9c0-3.7-.7-6.3-2.1-7.9-1.4-1.6-3.3-2.3-5.7-2.3-3.2 0-5.6 1.1-7.2 3.4s-2.4 4.6-2.5 6.9v15.6h6v5.5h-17.1v-5.5h3.8V51.9c0-3.8-.7-6.4-2.1-7.9-1.4-1.5-3.3-2.3-5.6-2.3-3.2 0-5.5 1.1-7.2 3.3-1.6 2.2-2.4 4.5-2.5 6.9v15.8h6.9v5.5h-20.2v-5.5h6V42.4h-6.1v-5.6h13.4v6.4c1.2-2.1 2.7-3.8 4.7-5.2 2-1.3 4.4-2 7.3-2s5.3.7 7.5 2.1c2.2 1.4 3.7 3.5 4.5 6.4 1.1-2.5 2.7-4.5 4.9-6.1s4.8-2.4 7.9-2.4c3.5 0 6.5 1.1 8.9 3.3s3.7 5.6 3.7 10.2v18.2h6.1v5.5zm42.5 0h-13.2V66c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2s9.8 2.2 12.3 6.5V22.7h-8.6v-5.6h15.8v50.6h6v5.5zm-13.3-16.8V52c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zm61.5 16.8H269v-5.5h6V51.9c0-3.7-.7-6.3-2.2-7.9-1.4-1.6-3.4-2.3-5.7-2.3-3.1 0-5.6 1-7.4 3s-2.8 4.4-2.9 7v15.9h6v5.5h-19.3v-5.5h6V42.4h-6.2v-5.6h13.6V43c2.6-4.6 6.8-6.9 12.7-6.9 3.6 0 6.7 1.1 9.2 3.3s3.7 5.6 3.7 10.2v18.2h6v5.4h-.2z"></path></g></svg></a><button title="Open main menu" type="button" class="button action has-icon main-menu-toggle" aria-haspopup="menu" aria-label="Open main menu" aria-expanded="false"><span class="button-wrap"><span class="icon icon-menu "></span><span class="visually-hidden">Open main menu</span></span></button></div><div class="top-navigation-main"><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button type="button" id="references-button" class="top-level-entry menu-toggle" aria-controls="references-menu" aria-expanded="false">References</button><a href="https://developer.mozilla.org/en-US/docs/Web" class="top-level-entry">References</a><ul id="references-menu" class="submenu references hidden inline-submenu-lg" aria-labelledby="references-button"><li class="apis-link-container mobile-only "><a href="https://developer.mozilla.org/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li><li class="html-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Structure of content on the web</p></div></a></li><li class="css-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Code used to describe document style</p></div></a></li><li class="javascript-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">General-purpose scripting language</p></div></a></li><li class="http-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP" class="submenu-item "><div class="submenu-icon http"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTTP</div><p class="submenu-item-description">Protocol for transmitting web resources</p></div></a></li><li class="apis-link-container "><a href="../../Web/API.html" class="submenu-item "><div class="submenu-icon apis"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web APIs</div><p class="submenu-item-description">Interfaces for building web applications</p></div></a></li><li class="apis-link-container "><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Extensions</div><p class="submenu-item-description">Developing extensions for web browsers</p></div></a></li><li class="apis-link-container desktop-only "><a href="https://developer.mozilla.org/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li></ul></li><li class="top-level-entry-container"><button type="button" id="guides-button" class="top-level-entry menu-toggle" aria-controls="guides-menu" aria-expanded="false">Guides</button><a href="https://developer.mozilla.org/en-US/docs/Learn" class="top-level-entry">Guides</a><ul id="guides-menu" class="submenu guides hidden inline-submenu-lg" aria-labelledby="guides-button"><li class="apis-link-container mobile-only "><a href="https://developer.mozilla.org/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="apis-link-container desktop-only "><a href="https://developer.mozilla.org/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="html-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Learn to structure web content with HTML</p></div></a></li><li class="css-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Learn to style content using CSS</p></div></a></li><li class="javascript-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">Learn to run scripts in the browser</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Accessibility</div><p class="submenu-item-description">Learn to make the web accessible to all</p></div></a></li></ul></li><li class="top-level-entry-container"><button type="button" id="mdn-plus-button" class="top-level-entry menu-toggle" aria-controls="mdn-plus-menu" aria-expanded="false">MDN Plus</button><a href="https://developer.mozilla.org/en-US/plus" class="top-level-entry">MDN Plus</a><ul id="mdn-plus-menu" class="submenu mdn-plus hidden inline-submenu-lg" aria-labelledby="mdn-plus-button"><li class=" "><a href="https://developer.mozilla.org/en-US/plus" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview</div><p class="submenu-item-description">A customized MDN experience</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/updates" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Updates</div><p class="submenu-item-description">All browser compatibility updates at a glance</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/docs/features/overview" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Documentation</div><p class="submenu-item-description">Learn how to use MDN Plus</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/docs/faq" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">FAQ</div><p class="submenu-item-description">Frequently asked questions about MDN Plus</p></div></a></li></ul></li></ul></nav><div class="header-search"><form action="https://developer.mozilla.org/en-US/search" role="search" aria-haspopup="listbox" aria-owns="top-nav-search-menu" aria-expanded="false" class="search-form search-widget" id="top-nav-search-form"><label id="top-nav-search-label" for="top-nav-search-input" class="visually-hidden">Search MDN</label><input id="top-nav-search-input" aria-autocomplete="list" aria-controls="top-nav-search-menu" aria-labelledby="top-nav-search-label" autocomplete="off" type="search" class="search-input-field" name="q" placeholder="   " required="" value=""><button type="button" class="button action has-icon clear-search-button"><span class="button-wrap"><span class="icon icon-cancel "></span><span class="visually-hidden">Clear search input</span></span></button><button type="submit" class="button action has-icon search-button"><span class="button-wrap"><span class="icon icon-search "></span><span class="visually-hidden">Search</span></span></button><div id="top-nav-search-menu" role="listbox" aria-labelledby="top-nav-search-label"></div></form></div><div class="theme-switcher-menu"><button type="button" class="button action has-icon theme-switcher-menu small" aria-haspopup="menu"><span class="button-wrap"><span class="icon icon-theme-os-default "></span>Theme</span></button></div><ul class="auth-container"><li><a href="https://developer.mozilla.org/users/fxa/login/authenticate/?next=%2Fen-US%2Fdocs%2FGames%2FTechniques%2FControls_Gamepad_API" class="signin-link" rel="nofollow">Already a subscriber?</a></li><li><a class="button primary mdn-plus-subscribe-link" href="https://developer.mozilla.org/en-US/plus"><span class="button-wrap">Get MDN Plus</span></a></li></ul></div></div></header><div class="article-actions-container"><div class="container"><button type="button" class="button action has-icon sidebar-button" aria-label="Expand sidebar" aria-expanded="false" aria-controls="sidebar-quicklinks"><span class="button-wrap"><span class="icon icon-sidebar "></span></span></button><nav class="breadcrumbs-container" aria-label="Breadcrumb"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="https://developer.mozilla.org/en-US/docs/Games"><span property="name">Game development</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="https://developer.mozilla.org/en-US/docs/Games/Techniques"><span property="name">Techniques for game development</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="Controls_Gamepad_API.html"><span property="name">Implementing controls using the Gamepad API</span></a><meta property="position" content="3"></li></ol></nav><div class="article-actions"><button type="button" class="button action has-icon article-actions-toggle" aria-label="Article actions"><span class="button-wrap"><span class="icon icon-ellipses "></span><span class="article-actions-dialog-heading">Article Actions</span></span></button><ul class="article-actions-entries"><li class="article-actions-entry"><div class="languages-switcher-menu open-on-focus-within"><button id="languages-switcher-button" type="button" class="button action small has-icon languages-switcher-menu" aria-haspopup="menu"><span class="button-wrap"><span class="icon icon-language "></span>English (US)</span></button></div></li></ul></div></div></div></div><div class="main-wrapper"><aside id="sidebar-quicklinks" class="sidebar"><button type="button" class="button action backdrop" aria-label="Collapse sidebar"><span class="button-wrap"></span></button><nav aria-label="Related Topics" class="sidebar-inner"><div class="in-nav-toc"><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#controls_for_web_games">Controls for web games</a></li><li class="document-toc-item "><a class="document-toc-link" href="#api_status_and_browser_support">API status and browser support</a></li><li class="document-toc-item "><a class="document-toc-link" href="#which_gamepads_are_best">Which gamepads are best?</a></li><li class="document-toc-item "><a class="document-toc-link" href="#case_study_hungry_fridge">Case Study: Hungry Fridge</a></li><li class="document-toc-item "><a class="document-toc-link" href="#demo">Demo</a></li><li class="document-toc-item "><a class="document-toc-link" href="#implementation">Implementation</a></li><li class="document-toc-item "><a class="document-toc-link" href="#specification_update">Specification update</a></li><li class="document-toc-item "><a class="document-toc-link" href="#summary">Summary</a></li></ul></section></div></div><div>
  <ol>
    <li class="toggle">
        <details>
            <summary>Introduction</summary>
            <ol>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Introduction">Introduction</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Anatomy">Anatomy</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>APIs for game development</summary>
            <ol>
              <li><a href="../../Web/API/Canvas_API.html">Canvas</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a></li>
              <li><a href="../../Web/API/Fullscreen_API.html">Full screen</a></li>
              <li><a href="../../Web/API/Gamepad_API.html">Gamepad</a></li>
              <li><a href="../../Web/API/IndexedDB_API.html">IndexedDB</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="../../Web/API/Pointer_Lock_API.html">Pointer Lock</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/SVG">SVG</a></li>
              <li><a href="../../Web/JavaScript/Reference/Global_Objects/TypedArray.html">Typed Arrays</a></li>
              <li><a href="../../Web/API/Web_Audio_API.html">Web Audio</a></li>
              <li><a href="../../Web/API/WebGL_API.html">WebGL</a></li>
              <li><a href="../../Web/API/WebRTC_API.html">WebRTC</a></li>
              <li><a href="../../Web/API/WebSockets_API.html">WebSockets</a></li>
              <li><a href="../../Web/API/WebVR_API.html">WebVR</a></li>
              <li><a href="../../Web/API/Web_Workers_API.html">Web Workers</a></li>
              <li><a href="../../Web/API/XMLHttpRequest.html">XMLHttpRequest</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Techniques</summary>
            <ol>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Async_scripts">Using async scripts for asm.js</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Apps/Developing/Optimizing_startup_performance">Optimizing startup performance</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/WebRTC_data_channels">Using WebRTC peer-to-peer data channels</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Efficient_animation_for_web_games">Efficient animation for web games</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Audio_for_Web_Games">Audio for Web Games</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/2D_collision_detection">2D collision detection</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Tilemaps">Tiles and tilemaps overview</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>3D games on the Web</summary>
            <ol>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_on_the_web">3D games on the Web overview</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_on_the_web/Basic_theory">Explaining basic 3D theory</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_A-Frame">Building up a basic demo with A-Frame</a></li>
              <li><a href="3D_on_the_web/Building_up_a_basic_demo_with_Babylon.html">Building up a basic demo with Babylon.js</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_PlayCanvas">Building up a basic demo with PlayCanvas</a></li>
              <li><a href="3D_on_the_web/Building_up_a_basic_demo_with_Three.html">Building up a basic demo with Three.js</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_on_the_web/WebVR">WebVR</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_collision_detection">3D collision detection</a></li>
              <li><a href="3D_collision_detection/Bounding_volume_collision_detection_with_THREE.html">Bounding volume collision detection with THREE.js</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Implementing game control mechanisms</summary>
            <ol>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Control_mechanisms">Control mechanisms</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Control_mechanisms/Mobile_touch">Mobile touch</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Control_mechanisms/Desktop_with_mouse_and_keyboard">Desktop with mouse and keyboard</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Control_mechanisms/Desktop_with_gamepad">Desktop with gamepad</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Techniques/Control_mechanisms/Other">Other</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Tutorials</summary>
            <ol>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript">2D breakout game using pure JavaScript</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Tutorials/2D_breakout_game_Phaser">2D breakout game using Phaser</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Tutorials/HTML5_Gamedev_Phaser_Device_Orientation">2D maze_game with device orientation</a></li>
              <li><a href="https://mozdevs.github.io/html5-games-workshop/en/guides/platformer/start-here/">2D platform game using Phaser</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Publishing games</summary>
            <ol>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Publishing_games">Publishing games overview</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Publishing_games/Game_distribution">Game distribution</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Publishing_games/Game_promotion">Game promotion</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Games/Publishing_games/Game_monetization">Game monetization</a></li>
            </ol>
        </details>
    </li>
  </ol>
</div></nav></aside><aside class="toc"><nav><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#controls_for_web_games">Controls for web games</a></li><li class="document-toc-item "><a class="document-toc-link" href="#api_status_and_browser_support">API status and browser support</a></li><li class="document-toc-item "><a class="document-toc-link" href="#which_gamepads_are_best">Which gamepads are best?</a></li><li class="document-toc-item "><a class="document-toc-link" href="#case_study_hungry_fridge">Case Study: Hungry Fridge</a></li><li class="document-toc-item "><a class="document-toc-link" href="#demo">Demo</a></li><li class="document-toc-item "><a class="document-toc-link" href="#implementation">Implementation</a></li><li class="document-toc-item "><a class="document-toc-link" href="#specification_update">Specification update</a></li><li class="document-toc-item "><a class="document-toc-link" href="#summary">Summary</a></li></ul></section></div></nav></aside><main id="content" class="main-content  "><article class="main-page-content" lang="en-US"><h1>Implementing controls using the Gamepad API</h1><div class="section-content"><p>This article looks at implementing an effective, cross-browser control system for web games using the Gamepad API, allowing you to control your web games using console game controllers. It features a case study game — Hungry Fridge, created by <a href="https://enclavegames.com/" class="external" target="_blank">Enclave Games</a>.</p></div><section aria-labelledby="controls_for_web_games"><a class="dashAnchor" name="//apple_ref/Section/Controls%20for%20web%20games"></a><h2 id="controls_for_web_games"><a href="#controls_for_web_games">Controls for web games</a></h2><div class="section-content"><p>Historically playing games on a console connected to your TV was always a totally different experience to gaming on the PC, mostly because of the unique controls. Eventually, extra drivers and plugins allowed us to use console gamepads with desktop games — either native games or those running in the browser. Now we have the <a href="../../Web/API/Gamepad_API.html">Gamepad API</a>, which gives us the ability to play browser-based games using gamepad controllers without any plugins. The Gamepad API achieves this by providing an interface exposing button presses and axis changes that can be used inside JavaScript code to handle the input. These are good times for browser gaming.</p></div></section><section aria-labelledby="api_status_and_browser_support"><a class="dashAnchor" name="//apple_ref/Section/API%20status%20and%20browser%20support"></a><h2 id="api_status_and_browser_support"><a href="#api_status_and_browser_support">API status and browser support</a></h2><div class="section-content"><p>The <a href="https://www.w3.org/TR/gamepad/" class="external" target="_blank">Gamepad API</a> is still at the Working Draft stage in the W3C process, which means its implementation might still change, but saying that the <a href="https://caniuse.com/gamepad" class="external" target="_blank">browser support</a> is already quite good. Firefox 29+ and Chrome 35+ support it out of the box. Opera supports the API in version 22+ (not surprising given that they now use Chrome's Blink engine.) And Microsoft implemented support for the API in Edge recently, which means four main browsers now supporting the Gamepad API.</p></div></section><section aria-labelledby="which_gamepads_are_best"><a class="dashAnchor" name="//apple_ref/Section/Which%20gamepads%20are%20best%3F"></a><h2 id="which_gamepads_are_best"><a href="#which_gamepads_are_best">Which gamepads are best?</a></h2><div class="section-content"><p>The most popular gamepads right now are those from the Xbox 360, Xbox One, PS3 and PS4 — they have been heavily tested and work well with the Gamepad API implementation in browsers across Windows and macOS.</p>
<p>There's also a number of other devices with various different button layouts that more or less work across browser implementations. The code discussed in this article was tested with a few gamepads, but the author's favorite configuration is a wireless Xbox 360 controller and the Firefox browser on macOS.</p></div></section><section aria-labelledby="case_study_hungry_fridge"><a class="dashAnchor" name="//apple_ref/Section/Case%20Study%3A%20Hungry%20Fridge"></a><h2 id="case_study_hungry_fridge"><a href="#case_study_hungry_fridge">Case Study: Hungry Fridge</a></h2><div class="section-content"><p>The <a href="https://github.blog/2013-10-30-github-game-off-ii/" class="external" target="_blank">GitHub Game Off II</a> competition ran in November 2013 and <a href="https://enclavegames.com/" class="external" target="_blank">Enclave Games</a> decided to take part in it. The theme for the competition was "change", so they submitted a game where you have to feed the Hungry Fridge by tapping the healthy food (apples, carrots, lettuces) and avoid the "bad" food (beer, burgers, pizza.) A countdown changes the type of food the Fridge wants to eat every few seconds, so you have to be careful and act quickly.</p>
<p>The second, hidden "change" implementation is the ability to transform the static Fridge into a full-blown moving, shooting and eating machine. When you connect the controller, the game significantly changes (Hungry Fridge turns into the Super Turbo Hungry Fridge) and you're able to control the armored fridge using the Gamepad API. You have to shoot down the food, but once again you also have to find the type of food the Fridge wants to eat at each point, or else you'll lose energy.</p>
<p>The game encapsulates two totally different types of "change" — good food vs. bad food, and mobile vs. desktop.</p></div></section><section aria-labelledby="demo"><a class="dashAnchor" name="//apple_ref/Section/Demo"></a><h2 id="demo"><a href="#demo">Demo</a></h2><div class="section-content"><p>The full version of the Hungry Fridge game was built first, and then to showcase the Gamepad API in action and show the JavaScript source code, a <a href="https://end3r.github.io/Gamepad-API-Content-Kit/demo/demo.html" class="external" target="_blank">simple demo</a> was created. It's part of the <a href="https://end3r.github.io/Gamepad-API-Content-Kit/" class="external" target="_blank">Gamepad API Content Kit</a> available on GitHub where you can dive deep into the code and study exactly how it works.</p>
<p>The code explained below is from the full version of the Hungry Fridge game, but it's almost identical to the one from the demo — the only difference is that the full version uses the <code>turbo</code> variable to decide whether the game will be launched using Super Turbo mode. It works independently, so it could be turned on even if the gamepad is not connected.</p>
<div class="notecard note" id="sect1">
  <p><strong>Note:</strong> Easter Egg time: There's a hidden option to launch Super Turbo Hungry Fridge on the desktop without having a gamepad connected — click the gamepad icon in the top right corner of the screen. It will launch the game in the Super Turbo mode and you'll be able to control the Fridge with the keyboard: A and D for turning the turret left and right, W for shooting and arrow keys for movement.</p>
</div></div></section><section aria-labelledby="implementation"><a class="dashAnchor" name="//apple_ref/Section/Implementation"></a><h2 id="implementation"><a href="#implementation">Implementation</a></h2><div class="section-content"><p>There are two important events to use along with the Gamepad API — <code>gamepadconnected</code> and <code>gamepaddisconnected</code>. The first one is fired when the browser detects the connection of a new gamepad while the second one is fired when a gamepad is disconnected (either physically by the user or due to inactivity.) In the demo, the <code>gamepadAPI</code> object is used to store everything related to the API:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">const</span> gamepadAPI <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">controller</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">turbo</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">buttonPressed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">buttons</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">buttonsCache</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">buttonsStatus</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">axesStatus</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
<p>The <code>buttons</code> array contains the Xbox 360 button layout:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token literal-property property">buttons</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">'DPad-Up'</span><span class="token punctuation">,</span><span class="token string">'DPad-Down'</span><span class="token punctuation">,</span><span class="token string">'DPad-Left'</span><span class="token punctuation">,</span><span class="token string">'DPad-Right'</span><span class="token punctuation">,</span>
  <span class="token string">'Start'</span><span class="token punctuation">,</span><span class="token string">'Back'</span><span class="token punctuation">,</span><span class="token string">'Axis-Left'</span><span class="token punctuation">,</span><span class="token string">'Axis-Right'</span><span class="token punctuation">,</span>
  <span class="token string">'LB'</span><span class="token punctuation">,</span><span class="token string">'RB'</span><span class="token punctuation">,</span><span class="token string">'Power'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'B'</span><span class="token punctuation">,</span><span class="token string">'X'</span><span class="token punctuation">,</span><span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div>
<p>This can be different for other types of gamepads like the PS3 controller (or a no-name, generic one), so you have to be careful and not just assume the button you're expecting will be the same button you'll actually get. Next, we set up two event listeners to get the data:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"gamepadconnected"</span><span class="token punctuation">,</span> gamepadAPI<span class="token punctuation">.</span>connect<span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"gamepaddisconnected"</span><span class="token punctuation">,</span> gamepadAPI<span class="token punctuation">.</span>disconnect<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Due to security policy, you have to interact with the controller first while the page is visible for the event to fire. If the API worked without any interaction from the user it could be used to fingerprint them without their knowledge.</p>
<p>Both functions are fairly simple:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token function">connect</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  gamepadAPI<span class="token punctuation">.</span>controller <span class="token operator">=</span> evt<span class="token punctuation">.</span>gamepad<span class="token punctuation">;</span>
  gamepadAPI<span class="token punctuation">.</span>turbo <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Gamepad connected.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div>
<p>The <code>connect()</code> function takes the event as a parameter and assigns the <code>gamepad</code> object to the <code>gamepadAPI.controller</code> variable. We are using only one gamepad for this game, so it's a single object instead of an array of gamepads. We then set the <code>turbo</code> property to <code>true</code>. (We could use the <code>gamepad.connected</code> boolean for this purpose, but we wanted to have a separate variable for turning on Turbo mode without needing to have a gamepad connected, for reasons explained above.)</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  gamepadAPI<span class="token punctuation">.</span>turbo <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">delete</span> gamepadAPI<span class="token punctuation">.</span>controller<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Gamepad disconnected.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div>
<p>The <code>disconnect</code> function sets the <code>gamepad.turbo property</code> to <code>false</code> and removes the variable containing the gamepad object.</p></div></section><section aria-labelledby="gamepad_object"><h3 id="gamepad_object"><a href="#gamepad_object">Gamepad object</a></h3><div class="section-content"><p>There's lots of useful information contained in the <code>gamepad</code> object, with the states of buttons and axes being the most important:</p>
<ul>
  <li><code>id</code>: A string containing information about the controller.</li>
  <li><code>index</code>: A unique identifier for the connected device.</li>
  <li><code>connected</code>: A boolean variable, <code>true</code> if the device is connected.</li>
  <li><code>mapping</code>: The layout type of the buttons; <code>standard</code> is the only available option for now.</li>
  <li><code>axes</code>: The state of each axis, represented by an array of floating-point values.</li>
  <li><code>buttons</code> : The state of each button, represented by an array of <code>GamepadButton</code> objects containing <code>pressed</code> and <code>value</code> properties.</li>
</ul>
<p>The <code>index</code> variable is useful if we're connecting more than one controller and want to identify them to act accordingly — for example when we have a two-player game requiring two devices to be connected.</p></div></section><section aria-labelledby="querying_the_gamepad_object"><h3 id="querying_the_gamepad_object"><a href="#querying_the_gamepad_object">Querying the gamepad object</a></h3><div class="section-content"><p>Beside <code>connect()</code> and <code>disconnect()</code>, there are two more methods in the <code>gamepadAPI</code> object: <code>update()</code> and <code>buttonPressed()</code>. <code>update()</code> is executed on every frame inside the game loop, to update the actual status of the gamepad object regularly:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Clear the buttons cache</span>
  gamepadAPI<span class="token punctuation">.</span>buttonsCache <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// Move the buttons status from the previous frame to the cache</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> gamepadAPI<span class="token punctuation">.</span>buttonsStatus<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    gamepadAPI<span class="token punctuation">.</span>buttonsCache<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> gamepadAPI<span class="token punctuation">.</span>buttonsStatus<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Clear the buttons status</span>
  gamepadAPI<span class="token punctuation">.</span>buttonsStatus <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// Get the gamepad object</span>
  <span class="token keyword">const</span> c <span class="token operator">=</span> gamepadAPI<span class="token punctuation">.</span>controller <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// Loop through buttons and push the pressed ones to the array</span>
  <span class="token keyword">const</span> pressed <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span>buttons<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> b <span class="token operator">&lt;</span> c<span class="token punctuation">.</span>buttons<span class="token punctuation">.</span>length<span class="token punctuation">;</span> b<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span>buttons<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">.</span>pressed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        pressed<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>gamepadAPI<span class="token punctuation">.</span>buttons<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Loop through axes and push their values to the array</span>
  <span class="token keyword">const</span> axes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span>axes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> a <span class="token operator">&lt;</span> c<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> a<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      axes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>axes<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Assign received values</span>
  gamepadAPI<span class="token punctuation">.</span>axesStatus <span class="token operator">=</span> axes<span class="token punctuation">;</span>
  gamepadAPI<span class="token punctuation">.</span>buttonsStatus <span class="token operator">=</span> pressed<span class="token punctuation">;</span>

  <span class="token comment">// Return buttons for debugging purposes</span>
  <span class="token keyword">return</span> pressed<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div>
<p>On every frame, <code>update()</code> saves buttons pressed during the previous frame to the <code>buttonsCache</code> array and takes fresh ones from the <code>gamepadAPI.controller</code> object. Then it loops through buttons and axes to get their actual states and values.</p></div></section><section aria-labelledby="detecting_button_presses"><h3 id="detecting_button_presses"><a href="#detecting_button_presses">Detecting button presses</a></h3><div class="section-content"><p>The <code>buttonPressed()</code> method is also placed in the main game loop to listen for button presses. It takes two parameters — the button we want to listen to and the (optional) way to tell the game that holding the button is accepted. Without it you'd have to release the button and press it again to have the desired effect.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token function">buttonPressed</span><span class="token punctuation">(</span><span class="token parameter">button<span class="token punctuation">,</span> hold</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> newPress <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token comment">// Loop through pressed buttons</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> gamepadAPI<span class="token punctuation">.</span>buttonsStatus<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If we found the button we're looking for</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>gamepadAPI<span class="token punctuation">.</span>buttonsStatus<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> button<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Set the boolean variable to true</span>
      newPress <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

      <span class="token comment">// If we want to check the single press</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hold<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Loop through the cached states from the previous frame</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> gamepadAPI<span class="token punctuation">.</span>buttonsCache<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// If the button was already pressed, ignore new press</span>
          newPress <span class="token operator">=</span> <span class="token punctuation">(</span>gamepadAPI<span class="token punctuation">.</span>buttonsCache<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!==</span> button<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> newPress<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div>
<p>There are two types of action to consider for a button: a single press and a hold. The <code>newPress</code> boolean variable will indicate whether there's a new press of a button or not. Next, we loop through the array of pressed buttons — if the given button is the same as the one we're looking for, the <code>newPress</code> variable is set to <code>true</code>. To check if the press is a new one, so the player is not holding the key, we loop through the cached states of the buttons from the previous frame of the game loop. If we find it there it means that the button is being held, so there's no new press. In the end the <code>newPress</code> variable is returned. The <code>buttonPressed</code> function is used in the update loop of the game like this:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>gamepadAPI<span class="token punctuation">.</span>turbo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>gamepadAPI<span class="token punctuation">.</span><span class="token function">buttonPressed</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token string">"hold"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">turbo_fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>gamepadAPI<span class="token punctuation">.</span><span class="token function">buttonPressed</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">managePause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>If <code>gamepadAPI.turbo</code> is <code>true</code> and the given buttons are pressed (or held), we execute the proper functions assigned to them. In this case, pressing or holding <code>A</code> will fire the bullet and pressing <code>B</code> will pause the game.</p></div></section><section aria-labelledby="axis_threshold"><h3 id="axis_threshold"><a href="#axis_threshold">Axis threshold</a></h3><div class="section-content"><p>The buttons have only two states: <code>0</code> or <code>1</code>, but the analog sticks can have many values — they have a float range between <code>-1</code> and <code>1</code> along both the <code>X</code> and <code>Y</code> axes.</p>
<p>Gamepads can get dusty from lying around inactive, meaning that checking for exact -1 or 1 values can be a problem. For this reason, it can be good to set a threshold for the value of the axis to take effect. For example, the Fridge tank will turn right only when the <code>X</code> value is bigger than <code>0.5</code>:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>gamepadAPI<span class="token punctuation">.</span>axesStatus<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">&gt;</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span>angle <span class="token operator">+=</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>turret<span class="token punctuation">.</span>angle <span class="token operator">+=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Even if we move it a little by mistake or the stick doesn't make it back to its original position, the tank won't turn unexpectedly.</p></div></section><section aria-labelledby="specification_update"><a class="dashAnchor" name="//apple_ref/Section/Specification%20update"></a><h2 id="specification_update"><a href="#specification_update">Specification update</a></h2><div class="section-content"><p>After more than a year of stability, in April 2015 the W3C Gamepad API spec was updated (<a href="https://w3c.github.io/gamepad/" class="external" target="_blank">see the latest</a>.) It hasn't changed much, but it's good to know what is going on — the updates are as follows.</p></div></section><section aria-labelledby="getting_the_gamepads"><h3 id="getting_the_gamepads"><a href="#getting_the_gamepads">Getting the gamepads</a></h3><div class="section-content"><p>The <a href="../../Web/API/Navigator/getGamepads.html"><code>Navigator.getGamepads()</code></a> method has been updated with <a href="https://w3c.github.io/gamepad/#navigator-interface-extension" class="external" target="_blank">a longer explanation and an example piece of code</a>. Now the length of the array of gamepads has to be <code>n+1</code> where <code>n</code> is the number of connected devices — when there's one device connected and it has the index of 1, the array's length is 2 and it will look like this: <code>[null, [object Gamepad]]</code>. If the device is disconnected or unavailable, the value for it is set to <code>null</code>.</p></div></section><section aria-labelledby="mapping_standard"><h3 id="mapping_standard"><a href="#mapping_standard">Mapping standard</a></h3><div class="section-content"><p>The mapping type is now an enumerable object instead of a string:</p>
<div class="code-example"><pre class="brush: ts notranslate"><code><span class="token keyword">enum</span> GamepadMappingType <span class="token punctuation">{</span>
  <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token string">"standard"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>This enum defines the set of known mappings for a Gamepad. For now, there's only the <code>standard</code> layout available, but new ones may appear in the future. If the layout is unknown, it is set to an empty string.</p></div></section><section aria-labelledby="events"><h3 id="events"><a href="#events">Events</a></h3><div class="section-content"><p>There were more events available in the spec than just <code>gamepadconnected</code> and <code>gamepaddisconnected</code> available, but they were removed from the specification as they were thought to not be very useful. The discussion is still ongoing whether they should be put back, and in what form.</p></div></section><section aria-labelledby="summary"><a class="dashAnchor" name="//apple_ref/Section/Summary"></a><h2 id="summary"><a href="#summary">Summary</a></h2><div class="section-content"><p>The Gamepad API is very easy to develop with. Now it's easier than ever to deliver a console-like experience to the browser without the need for any plugins. You can play the full version of the <a href="https://enclavegames.com/games/hungry-fridge/" class="external" target="_blank">Hungry Fridge</a> game directly in your browser. Check the other resources on the <a href="https://end3r.github.io/Gamepad-API-Content-Kit/" class="external" target="_blank">Gamepad API Content Kit</a>.</p></div></section><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a content problem with this page?</h3><ul><li>Edit the page <a href="https://github.com/mdn/content/edit/main/files/en-us/games/techniques/controls_gamepad_api/index.md" title="This will take you to GitHub, where you'll need to sign in first." target="_blank" rel="noopener noreferrer">on GitHub</a>.</li><li>Report the <a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FGames%2FTechniques%2FControls_Gamepad_API&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fgames%2Ftechniques%2Fcontrols_gamepad_api%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FGames%2FTechniques%2FControls_Gamepad_API%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fgames%2Ftechniques%2Fcontrols_gamepad_api%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2F0eaa93a518e47f488c97bd7cc3d11c5036f5e918%0A*+Document+last+modified%3A+2022-09-06T03%3A03%3A02.000Z%0A%0A%3C%2Fdetails%3E" title="This will take you to GitHub to file a new issue." target="_blank" rel="noopener noreferrer">content issue</a>.</li><li>View the source <a href="https://github.com/mdn/content/blob/main/files/en-us/games/techniques/controls_gamepad_api/index.md?plain=1" title="Folder: en-us/games/techniques/controls_gamepad_api (Opens in a new tab)" target="_blank" rel="noopener noreferrer">on GitHub</a>.</li></ul>Want to get more involved? Learn<!-- --> <a href="https://github.com/mdn/content/blob/main/CONTRIBUTING.md" title="This will take you to our contribution guidelines on GitHub." target="_blank" rel="noopener noreferrer">how to contribute</a>.</div><p class="last-modified-date">This page was last modified on<!-- --> <time datetime="2022-09-06T03:03:02.000Z">Sep 6, 2022</time> by<!-- --> <a href="Controls_Gamepad_API/contributors.txt">MDN contributors</a>.</p></div></aside></article></main></div><footer id="nav-footer" class="page-footer"><div><a href="http://developer.mozilla.org/en-US/docs/Games/Techniques/Controls_Gamepad_API">Implementing controls using the Gamepad API</a> by <a href="http://developer.mozilla.org/en-US/docs/Games/Techniques/Controls_Gamepad_API$history">Mozilla Contributors</a> is licensed under <a href="http://creativecommons.org/licenses/by-sa/2.5/">CC-BY-SA 2.5</a>.</div></footer></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Implementing controls using the Gamepad API","mdn_url":"/en-US/docs/Games/Techniques/Controls_Gamepad_API","locale":"en-US","native":"English (US)","sidebarHTML":"\n  <ol>\n    <li class=\"toggle\">\n        <details>\n            <summary>Introduction</summary>\n            <ol>\n              <li><a href=\"/en-US/docs/Games/Introduction\">Introduction</a></li>\n              <li><a href=\"/en-US/docs/Games/Anatomy\">Anatomy</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>APIs for game development</summary>\n            <ol>\n              <li><a href=\"/en-US/docs/Web/API/Canvas_API\">Canvas</a></li>\n              <li><a href=\"/en-US/docs/Web/CSS\">CSS</a></li>\n              <li><a href=\"/en-US/docs/Web/API/Fullscreen_API\">Full screen</a></li>\n              <li><a href=\"/en-US/docs/Web/API/Gamepad_API\">Gamepad</a></li>\n              <li><a href=\"/en-US/docs/Web/API/IndexedDB_API\">IndexedDB</a></li>\n              <li><a href=\"/en-US/docs/Web/JavaScript\">JavaScript</a></li>\n              <li><a href=\"/en-US/docs/Web/API/Pointer_Lock_API\">Pointer Lock</a></li>\n              <li><a href=\"/en-US/docs/Web/SVG\">SVG</a></li>\n              <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray\">Typed Arrays</a></li>\n              <li><a href=\"/en-US/docs/Web/API/Web_Audio_API\">Web Audio</a></li>\n              <li><a href=\"/en-US/docs/Web/API/WebGL_API\">WebGL</a></li>\n              <li><a href=\"/en-US/docs/Web/API/WebRTC_API\">WebRTC</a></li>\n              <li><a href=\"/en-US/docs/Web/API/WebSockets_API\">WebSockets</a></li>\n              <li><a href=\"/en-US/docs/Web/API/WebVR_API\">WebVR</a></li>\n              <li><a href=\"/en-US/docs/Web/API/Web_Workers_API\">Web Workers</a></li>\n              <li><a href=\"/en-US/docs/Web/API/XMLHttpRequest\">XMLHttpRequest</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Techniques</summary>\n            <ol>\n              <li><a href=\"/en-US/docs/Games/Techniques/Async_scripts\">Using async scripts for asm.js</a></li>\n              <li><a href=\"/en-US/docs/Web/Apps/Developing/Optimizing_startup_performance\">Optimizing startup performance</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/WebRTC_data_channels\">Using WebRTC peer-to-peer data channels</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/Efficient_animation_for_web_games\">Efficient animation for web games</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/Audio_for_Web_Games\">Audio for Web Games</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/2D_collision_detection\">2D collision detection</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/Tilemaps\">Tiles and tilemaps overview</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>3D games on the Web</summary>\n            <ol>\n              <li><a href=\"/en-US/docs/Games/Techniques/3D_on_the_web\">3D games on the Web overview</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/3D_on_the_web/Basic_theory\">Explaining basic 3D theory</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_A-Frame\">Building up a basic demo with A-Frame</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Babylon.js\">Building up a basic demo with Babylon.js</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_PlayCanvas\">Building up a basic demo with PlayCanvas</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Three.js\">Building up a basic demo with Three.js</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/3D_on_the_web/WebVR\">WebVR</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/3D_collision_detection\">3D collision detection</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js\">Bounding volume collision detection with THREE.js</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Implementing game control mechanisms</summary>\n            <ol>\n              <li><a href=\"/en-US/docs/Games/Techniques/Control_mechanisms\">Control mechanisms</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/Control_mechanisms/Mobile_touch\">Mobile touch</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/Control_mechanisms/Desktop_with_mouse_and_keyboard\">Desktop with mouse and keyboard</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/Control_mechanisms/Desktop_with_gamepad\">Desktop with gamepad</a></li>\n              <li><a href=\"/en-US/docs/Games/Techniques/Control_mechanisms/Other\">Other</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Tutorials</summary>\n            <ol>\n              <li><a href=\"/en-US/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript\">2D breakout game using pure JavaScript</a></li>\n              <li><a href=\"/en-US/docs/Games/Tutorials/2D_breakout_game_Phaser\">2D breakout game using Phaser</a></li>\n              <li><a href=\"/en-US/docs/Games/Tutorials/HTML5_Gamedev_Phaser_Device_Orientation\">2D maze_game with device orientation</a></li>\n              <li><a href=\"https://mozdevs.github.io/html5-games-workshop/en/guides/platformer/start-here/\">2D platform game using Phaser</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Publishing games</summary>\n            <ol>\n              <li><a href=\"/en-US/docs/Games/Publishing_games\">Publishing games overview</a></li>\n              <li><a href=\"/en-US/docs/Games/Publishing_games/Game_distribution\">Game distribution</a></li>\n              <li><a href=\"/en-US/docs/Games/Publishing_games/Game_promotion\">Game promotion</a></li>\n              <li><a href=\"/en-US/docs/Games/Publishing_games/Game_monetization\">Game monetization</a></li>\n            </ol>\n        </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>This article looks at implementing an effective, cross-browser control system for web games using the Gamepad API, allowing you to control your web games using console game controllers. It features a case study game — Hungry Fridge, created by <a href=\"https://enclavegames.com/\" class=\"external\" target=\"_blank\">Enclave Games</a>.</p>"}},{"type":"prose","value":{"id":"controls_for_web_games","title":"Controls for web games","isH3":false,"content":"<p>Historically playing games on a console connected to your TV was always a totally different experience to gaming on the PC, mostly because of the unique controls. Eventually, extra drivers and plugins allowed us to use console gamepads with desktop games — either native games or those running in the browser. Now we have the <a href=\"/en-US/docs/Web/API/Gamepad_API\">Gamepad API</a>, which gives us the ability to play browser-based games using gamepad controllers without any plugins. The Gamepad API achieves this by providing an interface exposing button presses and axis changes that can be used inside JavaScript code to handle the input. These are good times for browser gaming.</p>"}},{"type":"prose","value":{"id":"api_status_and_browser_support","title":"API status and browser support","isH3":false,"content":"<p>The <a href=\"https://www.w3.org/TR/gamepad/\" class=\"external\" target=\"_blank\">Gamepad API</a> is still at the Working Draft stage in the W3C process, which means its implementation might still change, but saying that the <a href=\"https://caniuse.com/gamepad\" class=\"external\" target=\"_blank\">browser support</a> is already quite good. Firefox 29+ and Chrome 35+ support it out of the box. Opera supports the API in version 22+ (not surprising given that they now use Chrome's Blink engine.) And Microsoft implemented support for the API in Edge recently, which means four main browsers now supporting the Gamepad API.</p>"}},{"type":"prose","value":{"id":"which_gamepads_are_best","title":"Which gamepads are best?","isH3":false,"content":"<p>The most popular gamepads right now are those from the Xbox 360, Xbox One, PS3 and PS4 — they have been heavily tested and work well with the Gamepad API implementation in browsers across Windows and macOS.</p>\n<p>There's also a number of other devices with various different button layouts that more or less work across browser implementations. The code discussed in this article was tested with a few gamepads, but the author's favorite configuration is a wireless Xbox 360 controller and the Firefox browser on macOS.</p>"}},{"type":"prose","value":{"id":"case_study_hungry_fridge","title":"Case Study: Hungry Fridge","isH3":false,"content":"<p>The <a href=\"https://github.blog/2013-10-30-github-game-off-ii/\" class=\"external\" target=\"_blank\">GitHub Game Off II</a> competition ran in November 2013 and <a href=\"https://enclavegames.com/\" class=\"external\" target=\"_blank\">Enclave Games</a> decided to take part in it. The theme for the competition was \"change\", so they submitted a game where you have to feed the Hungry Fridge by tapping the healthy food (apples, carrots, lettuces) and avoid the \"bad\" food (beer, burgers, pizza.) A countdown changes the type of food the Fridge wants to eat every few seconds, so you have to be careful and act quickly.</p>\n<p>The second, hidden \"change\" implementation is the ability to transform the static Fridge into a full-blown moving, shooting and eating machine. When you connect the controller, the game significantly changes (Hungry Fridge turns into the Super Turbo Hungry Fridge) and you're able to control the armored fridge using the Gamepad API. You have to shoot down the food, but once again you also have to find the type of food the Fridge wants to eat at each point, or else you'll lose energy.</p>\n<p>The game encapsulates two totally different types of \"change\" — good food vs. bad food, and mobile vs. desktop.</p>"}},{"type":"prose","value":{"id":"demo","title":"Demo","isH3":false,"content":"<p>The full version of the Hungry Fridge game was built first, and then to showcase the Gamepad API in action and show the JavaScript source code, a <a href=\"https://end3r.github.io/Gamepad-API-Content-Kit/demo/demo.html\" class=\"external\" target=\"_blank\">simple demo</a> was created. It's part of the <a href=\"https://end3r.github.io/Gamepad-API-Content-Kit/\" class=\"external\" target=\"_blank\">Gamepad API Content Kit</a> available on GitHub where you can dive deep into the code and study exactly how it works.</p>\n<p>The code explained below is from the full version of the Hungry Fridge game, but it's almost identical to the one from the demo — the only difference is that the full version uses the <code>turbo</code> variable to decide whether the game will be launched using Super Turbo mode. It works independently, so it could be turned on even if the gamepad is not connected.</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> Easter Egg time: There's a hidden option to launch Super Turbo Hungry Fridge on the desktop without having a gamepad connected — click the gamepad icon in the top right corner of the screen. It will launch the game in the Super Turbo mode and you'll be able to control the Fridge with the keyboard: A and D for turning the turret left and right, W for shooting and arrow keys for movement.</p>\n</div>"}},{"type":"prose","value":{"id":"implementation","title":"Implementation","isH3":false,"content":"<p>There are two important events to use along with the Gamepad API — <code>gamepadconnected</code> and <code>gamepaddisconnected</code>. The first one is fired when the browser detects the connection of a new gamepad while the second one is fired when a gamepad is disconnected (either physically by the user or due to inactivity.) In the demo, the <code>gamepadAPI</code> object is used to store everything related to the API:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> gamepadAPI <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">controller</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">turbo</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">disconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">buttonPressed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">buttons</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">buttonsCache</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">buttonsStatus</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">axesStatus</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>The <code>buttons</code> array contains the Xbox 360 button layout:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token literal-property property\">buttons</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">'DPad-Up'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'DPad-Down'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'DPad-Left'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'DPad-Right'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'Start'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Back'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Axis-Left'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Axis-Right'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'LB'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'RB'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Power'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'X'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Y'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</code></pre></div>\n<p>This can be different for other types of gamepads like the PS3 controller (or a no-name, generic one), so you have to be careful and not just assume the button you're expecting will be the same button you'll actually get. Next, we set up two event listeners to get the data:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gamepadconnected\"</span><span class=\"token punctuation\">,</span> gamepadAPI<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gamepaddisconnected\"</span><span class=\"token punctuation\">,</span> gamepadAPI<span class=\"token punctuation\">.</span>disconnect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Due to security policy, you have to interact with the controller first while the page is visible for the event to fire. If the API worked without any interaction from the user it could be used to fingerprint them without their knowledge.</p>\n<p>Both functions are fairly simple:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">evt</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  gamepadAPI<span class=\"token punctuation\">.</span>controller <span class=\"token operator\">=</span> evt<span class=\"token punctuation\">.</span>gamepad<span class=\"token punctuation\">;</span>\n  gamepadAPI<span class=\"token punctuation\">.</span>turbo <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Gamepad connected.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</code></pre></div>\n<p>The <code>connect()</code> function takes the event as a parameter and assigns the <code>gamepad</code> object to the <code>gamepadAPI.controller</code> variable. We are using only one gamepad for this game, so it's a single object instead of an array of gamepads. We then set the <code>turbo</code> property to <code>true</code>. (We could use the <code>gamepad.connected</code> boolean for this purpose, but we wanted to have a separate variable for turning on Turbo mode without needing to have a gamepad connected, for reasons explained above.)</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token function\">disconnect</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">evt</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  gamepadAPI<span class=\"token punctuation\">.</span>turbo <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">delete</span> gamepadAPI<span class=\"token punctuation\">.</span>controller<span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Gamepad disconnected.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</code></pre></div>\n<p>The <code>disconnect</code> function sets the <code>gamepad.turbo property</code> to <code>false</code> and removes the variable containing the gamepad object.</p>"}},{"type":"prose","value":{"id":"gamepad_object","title":"Gamepad object","isH3":true,"content":"<p>There's lots of useful information contained in the <code>gamepad</code> object, with the states of buttons and axes being the most important:</p>\n<ul>\n  <li><code>id</code>: A string containing information about the controller.</li>\n  <li><code>index</code>: A unique identifier for the connected device.</li>\n  <li><code>connected</code>: A boolean variable, <code>true</code> if the device is connected.</li>\n  <li><code>mapping</code>: The layout type of the buttons; <code>standard</code> is the only available option for now.</li>\n  <li><code>axes</code>: The state of each axis, represented by an array of floating-point values.</li>\n  <li><code>buttons</code> : The state of each button, represented by an array of <code>GamepadButton</code> objects containing <code>pressed</code> and <code>value</code> properties.</li>\n</ul>\n<p>The <code>index</code> variable is useful if we're connecting more than one controller and want to identify them to act accordingly — for example when we have a two-player game requiring two devices to be connected.</p>"}},{"type":"prose","value":{"id":"querying_the_gamepad_object","title":"Querying the gamepad object","isH3":true,"content":"<p>Beside <code>connect()</code> and <code>disconnect()</code>, there are two more methods in the <code>gamepadAPI</code> object: <code>update()</code> and <code>buttonPressed()</code>. <code>update()</code> is executed on every frame inside the game loop, to update the actual status of the gamepad object regularly:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Clear the buttons cache</span>\n  gamepadAPI<span class=\"token punctuation\">.</span>buttonsCache <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Move the buttons status from the previous frame to the cache</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> k <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> k <span class=\"token operator\">&lt;</span> gamepadAPI<span class=\"token punctuation\">.</span>buttonsStatus<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> k<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    gamepadAPI<span class=\"token punctuation\">.</span>buttonsCache<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> gamepadAPI<span class=\"token punctuation\">.</span>buttonsStatus<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Clear the buttons status</span>\n  gamepadAPI<span class=\"token punctuation\">.</span>buttonsStatus <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Get the gamepad object</span>\n  <span class=\"token keyword\">const</span> c <span class=\"token operator\">=</span> gamepadAPI<span class=\"token punctuation\">.</span>controller <span class=\"token operator\">||</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Loop through buttons and push the pressed ones to the array</span>\n  <span class=\"token keyword\">const</span> pressed <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>buttons<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> b <span class=\"token operator\">&lt;</span> c<span class=\"token punctuation\">.</span>buttons<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> b<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>buttons<span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>pressed<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        pressed<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>gamepadAPI<span class=\"token punctuation\">.</span>buttons<span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Loop through axes and push their values to the array</span>\n  <span class=\"token keyword\">const</span> axes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>axes<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> a <span class=\"token operator\">&lt;</span> c<span class=\"token punctuation\">.</span>axes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> a<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      axes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>axes<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Assign received values</span>\n  gamepadAPI<span class=\"token punctuation\">.</span>axesStatus <span class=\"token operator\">=</span> axes<span class=\"token punctuation\">;</span>\n  gamepadAPI<span class=\"token punctuation\">.</span>buttonsStatus <span class=\"token operator\">=</span> pressed<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Return buttons for debugging purposes</span>\n  <span class=\"token keyword\">return</span> pressed<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</code></pre></div>\n<p>On every frame, <code>update()</code> saves buttons pressed during the previous frame to the <code>buttonsCache</code> array and takes fresh ones from the <code>gamepadAPI.controller</code> object. Then it loops through buttons and axes to get their actual states and values.</p>"}},{"type":"prose","value":{"id":"detecting_button_presses","title":"Detecting button presses","isH3":true,"content":"<p>The <code>buttonPressed()</code> method is also placed in the main game loop to listen for button presses. It takes two parameters — the button we want to listen to and the (optional) way to tell the game that holding the button is accepted. Without it you'd have to release the button and press it again to have the desired effect.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token function\">buttonPressed</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">button<span class=\"token punctuation\">,</span> hold</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> newPress <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Loop through pressed buttons</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> gamepadAPI<span class=\"token punctuation\">.</span>buttonsStatus<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// If we found the button we're looking for</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>gamepadAPI<span class=\"token punctuation\">.</span>buttonsStatus<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> button<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Set the boolean variable to true</span>\n      newPress <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// If we want to check the single press</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>hold<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Loop through the cached states from the previous frame</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> gamepadAPI<span class=\"token punctuation\">.</span>buttonsCache<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// If the button was already pressed, ignore new press</span>\n          newPress <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>gamepadAPI<span class=\"token punctuation\">.</span>buttonsCache<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> newPress<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</code></pre></div>\n<p>There are two types of action to consider for a button: a single press and a hold. The <code>newPress</code> boolean variable will indicate whether there's a new press of a button or not. Next, we loop through the array of pressed buttons — if the given button is the same as the one we're looking for, the <code>newPress</code> variable is set to <code>true</code>. To check if the press is a new one, so the player is not holding the key, we loop through the cached states of the buttons from the previous frame of the game loop. If we find it there it means that the button is being held, so there's no new press. In the end the <code>newPress</code> variable is returned. The <code>buttonPressed</code> function is used in the update loop of the game like this:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>gamepadAPI<span class=\"token punctuation\">.</span>turbo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>gamepadAPI<span class=\"token punctuation\">.</span><span class=\"token function\">buttonPressed</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"hold\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">turbo_fire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>gamepadAPI<span class=\"token punctuation\">.</span><span class=\"token function\">buttonPressed</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">managePause</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>If <code>gamepadAPI.turbo</code> is <code>true</code> and the given buttons are pressed (or held), we execute the proper functions assigned to them. In this case, pressing or holding <code>A</code> will fire the bullet and pressing <code>B</code> will pause the game.</p>"}},{"type":"prose","value":{"id":"axis_threshold","title":"Axis threshold","isH3":true,"content":"<p>The buttons have only two states: <code>0</code> or <code>1</code>, but the analog sticks can have many values — they have a float range between <code>-1</code> and <code>1</code> along both the <code>X</code> and <code>Y</code> axes.</p>\n<p>Gamepads can get dusty from lying around inactive, meaning that checking for exact -1 or 1 values can be a problem. For this reason, it can be good to set a threshold for the value of the axis to take effect. For example, the Fridge tank will turn right only when the <code>X</code> value is bigger than <code>0.5</code>:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>gamepadAPI<span class=\"token punctuation\">.</span>axesStatus<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x <span class=\"token operator\">&gt;</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">.</span>angle <span class=\"token operator\">+=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>turret<span class=\"token punctuation\">.</span>angle <span class=\"token operator\">+=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Even if we move it a little by mistake or the stick doesn't make it back to its original position, the tank won't turn unexpectedly.</p>"}},{"type":"prose","value":{"id":"specification_update","title":"Specification update","isH3":false,"content":"<p>After more than a year of stability, in April 2015 the W3C Gamepad API spec was updated (<a href=\"https://w3c.github.io/gamepad/\" class=\"external\" target=\"_blank\">see the latest</a>.) It hasn't changed much, but it's good to know what is going on — the updates are as follows.</p>"}},{"type":"prose","value":{"id":"getting_the_gamepads","title":"Getting the gamepads","isH3":true,"content":"<p>The <a href=\"/en-US/docs/Web/API/Navigator/getGamepads\"><code>Navigator.getGamepads()</code></a> method has been updated with <a href=\"https://w3c.github.io/gamepad/#navigator-interface-extension\" class=\"external\" target=\"_blank\">a longer explanation and an example piece of code</a>. Now the length of the array of gamepads has to be <code>n+1</code> where <code>n</code> is the number of connected devices — when there's one device connected and it has the index of 1, the array's length is 2 and it will look like this: <code>[null, [object Gamepad]]</code>. If the device is disconnected or unavailable, the value for it is set to <code>null</code>.</p>"}},{"type":"prose","value":{"id":"mapping_standard","title":"Mapping standard","isH3":true,"content":"<p>The mapping type is now an enumerable object instead of a string:</p>\n<div class=\"code-example\"><pre class=\"brush: ts notranslate\"><code><span class=\"token keyword\">enum</span> GamepadMappingType <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"standard\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This enum defines the set of known mappings for a Gamepad. For now, there's only the <code>standard</code> layout available, but new ones may appear in the future. If the layout is unknown, it is set to an empty string.</p>"}},{"type":"prose","value":{"id":"events","title":"Events","isH3":true,"content":"<p>There were more events available in the spec than just <code>gamepadconnected</code> and <code>gamepaddisconnected</code> available, but they were removed from the specification as they were thought to not be very useful. The discussion is still ongoing whether they should be put back, and in what form.</p>"}},{"type":"prose","value":{"id":"summary","title":"Summary","isH3":false,"content":"<p>The Gamepad API is very easy to develop with. Now it's easier than ever to deliver a console-like experience to the browser without the need for any plugins. You can play the full version of the <a href=\"https://enclavegames.com/games/hungry-fridge/\" class=\"external\" target=\"_blank\">Hungry Fridge</a> game directly in your browser. Check the other resources on the <a href=\"https://end3r.github.io/Gamepad-API-Content-Kit/\" class=\"external\" target=\"_blank\">Gamepad API Content Kit</a>.</p>"}}],"toc":[{"text":"Controls for web games","id":"controls_for_web_games"},{"text":"API status and browser support","id":"api_status_and_browser_support"},{"text":"Which gamepads are best?","id":"which_gamepads_are_best"},{"text":"Case Study: Hungry Fridge","id":"case_study_hungry_fridge"},{"text":"Demo","id":"demo"},{"text":"Implementation","id":"implementation"},{"text":"Specification update","id":"specification_update"},{"text":"Summary","id":"summary"}],"summary":"The Gamepad API is very easy to develop with. Now it's easier than ever to deliver a console-like experience to the browser without the need for any plugins. You can play the full version of the Hungry Fridge game directly in your browser. Check the other resources on the Gamepad API Content Kit.","popularity":0,"modified":"2022-09-06T03:03:02.000Z","other_translations":[{"title":"ゲームパッド API を使用したコントロールの実装","locale":"ja","native":"日本語"},{"title":"Реализация элементов управления с помощью API Gamepad","locale":"ru","native":"Русский"},{"title":"使用 Gamepad API 实现控制","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"en-us/games/techniques/controls_gamepad_api","github_url":"https://github.com/mdn/content/blob/main/files/en-us/games/techniques/controls_gamepad_api/index.md","last_commit_url":"https://github.com/mdn/content/commit/0eaa93a518e47f488c97bd7cc3d11c5036f5e918","filename":"index.md"},"short_title":"Implementing controls using the Gamepad API","parents":[{"uri":"/en-US/docs/Games","title":"Game development"},{"uri":"/en-US/docs/Games/Techniques","title":"Techniques for game development"},{"uri":"/en-US/docs/Games/Techniques/Controls_Gamepad_API","title":"Implementing controls using the Gamepad API"}],"pageTitle":"Implementing controls using the Gamepad API - Game development | MDN","noIndexing":false}}</script>
<!-- Mirrored from developer.mozilla.org/en-US/docs/Games/Techniques/Controls_Gamepad_API by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Feb 2023 04:46:17 GMT -->
</body></html>