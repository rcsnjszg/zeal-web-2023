<html><!-- Mirrored from developer.mozilla.org/en-US/docs/Web/API/Scheduler/postTask by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Feb 2023 04:48:17 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="../../../../../favicon-48x48.cbbd161b.png"><link rel="apple-touch-icon" href="../../../../../apple-touch-icon.6803c6f0.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="../../../../../manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/opensearch.xml" title="MDN Web Docs"><title>Scheduler.postTask()</title><meta name="robots" content="index, follow"><meta name="description" content="The postTask() method of the Scheduler interface is used for adding tasks to be scheduled according to their priority."><meta property="og:url" content="postTask.html"><meta property="og:title" content="Scheduler.postTask() - Web APIs | MDN"><meta property="og:locale" content="en-US"><meta property="og:description" content="The postTask() method of the Scheduler interface is used for adding tasks to be scheduled according to their priority."><meta property="og:image" content="../../../../../mdn-social-share.cd6c4a5a.png"><meta property="twitter:card" content="summary_large_image"><link rel="canonical" href="postTask.html"><style media="print">.article-actions-container,.document-toc-container,.language-menu,.main-menu-toggle,.mdn-cta-container,.on-github,.page-footer,.sidebar,.top-navigation-main,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><script src="../../../../../static/js/ga.js" defer=""></script><script defer="defer" src="../../../../../static/js/main.5c9d40d0.js"></script><link href="../../../../../static/css/main.7d378400.css" rel="stylesheet"></head><body><script>document.body.addEventListener("load",(t=>{t.target.classList.contains("interactive")&&t.target.setAttribute("data-readystate","complete")}),{capture:!0});const c={light:"#ffffff",dark:"#1b1b1b"};if(window&&document.documentElement)try{const t=window.localStorage.getItem("theme");t&&(document.documentElement.className=t,document.documentElement.style.backgroundColor=c[t])}catch(t){console.warn("Unable to read theme from localStorage",t)}</script><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#top-nav-search-input">Skip to search</a></li><li><a id="skip-select-language" href="#languages-switcher-button">Skip to select language</a></li></ul><div class="page-wrapper  category-api document-page"><div class="main-document-header-container"><header class="main-document-header-container top-navigation 
      
      "><div class="container "><div class="top-navigation-wrap"><a href="https://developer.mozilla.org/en-US/" class="logo" aria-label="MDN homepage"><svg id="mdn-docs-logo" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 694.9 104.4" style="enable-background:new 0 0 694.9 104.4" xml:space="preserve" role="img"><title>MDN Web Docs</title><style>.logo-m{fill:var(--text-link)}</style><g class="logo-m"><path d="M40.3 0 11.7 92.1H0L28.5 0h11.8zM50.7 0v92.1H40.3V0h10.4zM91 0 62.5 92.1H50.8L79.3 0H91zM101.4 0v92.1H91V0h10.4z"></path></g><path class="logo-m" d="M627.9 95.6h67v8.8h-67v-8.8z"></path><g style="fill:var(--text-primary)"><path d="M367 42h-4l-10.7 30.8h-5.5l-10.8-26h-.4l-10.5 26h-5.2L308.7 42h-3.8v-5.6H323V42h-6.5l6.8 20.4h.4l10.3-26h4.7l11.2 26h.5l5.7-20.3h-6.2v-5.6H367V42zM401.9 62c-.4 3.2-2 5.9-4.7 8.2-2.8 2.3-6.5 3.4-11.3 3.4-5.4 0-9.7-1.6-13.1-4.7-3.3-3.2-5-7.7-5-13.7 0-5.7 1.6-10.3 4.7-14s7.4-5.5 12.9-5.5c5.1 0 9.1 1.6 11.9 4.7s4.3 6.9 4.3 11.3c0 1.5-.2 3-.5 4.7h-25.6c.3 7.7 4 11.6 10.9 11.6 2.9 0 5.1-.7 6.5-2 1.5-1.4 2.5-3 3-4.9l6 .9zM394 51.3c.2-2.4-.4-4.7-1.8-6.9s-3.8-3.3-7-3.3c-3.1 0-5.3 1-6.9 3-1.5 2-2.5 4.4-2.8 7.2H394zM445 53.7c0 5-1.3 9.5-4 13.7s-6.9 6.2-12.7 6.2c-6 0-10.3-2.2-12.7-6.7-.1.4-.2 1.4-.4 2.9s-.3 2.5-.4 2.9h-7.3c.3-1.7.6-3.5.8-5.3.3-1.8.4-3.7.4-5.5V22.3h-6v-5.6H416v27c1.1-2.2 2.7-4.1 4.7-5.7 2-1.6 4.8-2.4 8.4-2.4 4.6 0 8.4 1.6 11.4 4.7 3 3.2 4.5 7.6 4.5 13.4zm-7.7.6c0-4.2-1-7.4-3-9.5-2-2.2-4.4-3.3-7.4-3.3-3.4 0-6 1.2-8 3.7-1.9 2.4-2.9 5-3 7.7V57c0 3 1 5.6 3 7.7s4.5 3.1 7.6 3.1c3.6 0 6.3-1.3 8.1-3.9 1.8-2.7 2.7-5.9 2.7-9.6zM506.5 72.8h-13.2v-7.2c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2 5.7 0 9.8 2.2 12.3 6.5V22.3h-8.6v-5.6h15.8v50.6h6v5.5zM493.2 56v-4.4c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zM546.3 54.6c0 5.6-1.8 10.2-5.3 13.7s-8.2 5.3-13.9 5.3-10.1-1.7-13.4-5.1c-3.3-3.4-5-7.9-5-13.5 0-5.3 1.6-9.9 4.7-13.7 3.2-3.8 7.9-5.7 14.2-5.7s11 1.9 14.1 5.7c3 3.7 4.6 8.1 4.6 13.3zm-7.7-.2c0-4-1-7.2-3-9.5s-4.8-3.5-8.2-3.5c-3.6 0-6.4 1.2-8.3 3.7s-2.9 5.6-2.9 9.5c0 3.7.9 6.8 2.8 9.4 1.9 2.6 4.6 3.9 8.3 3.9 3.6 0 6.4-1.3 8.4-3.8 1.9-2.6 2.9-5.8 2.9-9.7zM583.6 60.2c-.4 3.2-1.9 6.3-4.4 9.1-2.5 2.9-6.4 4.3-11.8 4.3-5.2 0-9.4-1.6-12.6-4.8-3.2-3.2-4.8-7.7-4.8-13.7 0-5.5 1.6-10.1 4.7-13.9 3.2-3.8 7.6-5.7 13.2-5.7 2.3 0 4.6.3 6.7.8 2.2.5 4.2 1.5 6.2 2.9l1.5 9.5-5.9.7-1.3-6.1c-2.1-1.2-4.5-1.8-7.2-1.8-3.5 0-6.1 1.2-7.7 3.7-1.7 2.5-2.5 5.7-2.5 9.6 0 4.1.9 7.3 2.7 9.5 1.8 2.3 4.4 3.4 7.8 3.4 5.2 0 8.2-2.9 9.2-8.8l6.2 1.3zM618.3 62.1c0 3.6-1.5 6.5-4.6 8.5s-7 3-11.7 3c-5.7 0-10.6-1.2-14.6-3.6l1.2-8.8 5.7.6-.2 4.7c1.1.5 2.3.9 3.6 1.1s2.6.3 3.9.3c2.4 0 4.5-.4 6.5-1.3 1.9-.9 2.9-2.2 2.9-4.1 0-1.8-.8-3.1-2.3-3.8s-3.5-1.3-5.8-1.7-4.6-.9-6.9-1.4c-2.3-.6-4.2-1.6-5.7-2.9-1.6-1.4-2.3-3.5-2.3-6.3 0-4.1 1.5-6.9 4.6-8.5s6.4-2.4 9.9-2.4c2.6 0 5 .3 7.2.9 2.2.6 4.3 1.4 6.1 2.4l.8 8.8-5.8.7-.8-5.7c-2.3-1-4.7-1.6-7.2-1.6-2.1 0-3.7.4-5.1 1.1-1.3.8-2 2-2 3.8 0 1.7.8 2.9 2.3 3.6 1.5.7 3.4 1.2 5.7 1.6 2.2.4 4.5.8 6.7 1.4 2.2.6 4.1 1.6 5.7 3 1.4 1.6 2.2 3.7 2.2 6.6zM197.6 73.2h-17.1v-5.5h3.8V51.9c0-3.7-.7-6.3-2.1-7.9-1.4-1.6-3.3-2.3-5.7-2.3-3.2 0-5.6 1.1-7.2 3.4s-2.4 4.6-2.5 6.9v15.6h6v5.5h-17.1v-5.5h3.8V51.9c0-3.8-.7-6.4-2.1-7.9-1.4-1.5-3.3-2.3-5.6-2.3-3.2 0-5.5 1.1-7.2 3.3-1.6 2.2-2.4 4.5-2.5 6.9v15.8h6.9v5.5h-20.2v-5.5h6V42.4h-6.1v-5.6h13.4v6.4c1.2-2.1 2.7-3.8 4.7-5.2 2-1.3 4.4-2 7.3-2s5.3.7 7.5 2.1c2.2 1.4 3.7 3.5 4.5 6.4 1.1-2.5 2.7-4.5 4.9-6.1s4.8-2.4 7.9-2.4c3.5 0 6.5 1.1 8.9 3.3s3.7 5.6 3.7 10.2v18.2h6.1v5.5zm42.5 0h-13.2V66c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2s9.8 2.2 12.3 6.5V22.7h-8.6v-5.6h15.8v50.6h6v5.5zm-13.3-16.8V52c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zm61.5 16.8H269v-5.5h6V51.9c0-3.7-.7-6.3-2.2-7.9-1.4-1.6-3.4-2.3-5.7-2.3-3.1 0-5.6 1-7.4 3s-2.8 4.4-2.9 7v15.9h6v5.5h-19.3v-5.5h6V42.4h-6.2v-5.6h13.6V43c2.6-4.6 6.8-6.9 12.7-6.9 3.6 0 6.7 1.1 9.2 3.3s3.7 5.6 3.7 10.2v18.2h6v5.4h-.2z"></path></g></svg></a><button title="Open main menu" type="button" class="button action has-icon main-menu-toggle" aria-haspopup="menu" aria-label="Open main menu" aria-expanded="false"><span class="button-wrap"><span class="icon icon-menu "></span><span class="visually-hidden">Open main menu</span></span></button></div><div class="top-navigation-main"><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button type="button" id="references-button" class="top-level-entry menu-toggle" aria-controls="references-menu" aria-expanded="false">References</button><a href="https://developer.mozilla.org/en-US/docs/Web" class="top-level-entry">References</a><ul id="references-menu" class="submenu references hidden inline-submenu-lg" aria-labelledby="references-button"><li class="apis-link-container mobile-only "><a href="https://developer.mozilla.org/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li><li class="html-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Structure of content on the web</p></div></a></li><li class="css-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Code used to describe document style</p></div></a></li><li class="javascript-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">General-purpose scripting language</p></div></a></li><li class="http-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP" class="submenu-item "><div class="submenu-icon http"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTTP</div><p class="submenu-item-description">Protocol for transmitting web resources</p></div></a></li><li class="apis-link-container "><a href="../../API.html" class="submenu-item "><div class="submenu-icon apis"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web APIs</div><p class="submenu-item-description">Interfaces for building web applications</p></div></a></li><li class="apis-link-container "><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Extensions</div><p class="submenu-item-description">Developing extensions for web browsers</p></div></a></li><li class="apis-link-container desktop-only "><a href="https://developer.mozilla.org/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li></ul></li><li class="top-level-entry-container"><button type="button" id="guides-button" class="top-level-entry menu-toggle" aria-controls="guides-menu" aria-expanded="false">Guides</button><a href="https://developer.mozilla.org/en-US/docs/Learn" class="top-level-entry">Guides</a><ul id="guides-menu" class="submenu guides hidden inline-submenu-lg" aria-labelledby="guides-button"><li class="apis-link-container mobile-only "><a href="https://developer.mozilla.org/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="apis-link-container desktop-only "><a href="https://developer.mozilla.org/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="html-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Learn to structure web content with HTML</p></div></a></li><li class="css-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Learn to style content using CSS</p></div></a></li><li class="javascript-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">Learn to run scripts in the browser</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Accessibility</div><p class="submenu-item-description">Learn to make the web accessible to all</p></div></a></li></ul></li><li class="top-level-entry-container"><button type="button" id="mdn-plus-button" class="top-level-entry menu-toggle" aria-controls="mdn-plus-menu" aria-expanded="false">MDN Plus</button><a href="https://developer.mozilla.org/en-US/plus" class="top-level-entry">MDN Plus</a><ul id="mdn-plus-menu" class="submenu mdn-plus hidden inline-submenu-lg" aria-labelledby="mdn-plus-button"><li class=" "><a href="https://developer.mozilla.org/en-US/plus" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview</div><p class="submenu-item-description">A customized MDN experience</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/updates" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Updates</div><p class="submenu-item-description">All browser compatibility updates at a glance</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/docs/features/overview" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Documentation</div><p class="submenu-item-description">Learn how to use MDN Plus</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/docs/faq" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">FAQ</div><p class="submenu-item-description">Frequently asked questions about MDN Plus</p></div></a></li></ul></li></ul></nav><div class="header-search"><form action="https://developer.mozilla.org/en-US/search" role="search" aria-haspopup="listbox" aria-owns="top-nav-search-menu" aria-expanded="false" class="search-form search-widget" id="top-nav-search-form"><label id="top-nav-search-label" for="top-nav-search-input" class="visually-hidden">Search MDN</label><input id="top-nav-search-input" aria-autocomplete="list" aria-controls="top-nav-search-menu" aria-labelledby="top-nav-search-label" autocomplete="off" type="search" class="search-input-field" name="q" placeholder="   " required="" value=""><button type="button" class="button action has-icon clear-search-button"><span class="button-wrap"><span class="icon icon-cancel "></span><span class="visually-hidden">Clear search input</span></span></button><button type="submit" class="button action has-icon search-button"><span class="button-wrap"><span class="icon icon-search "></span><span class="visually-hidden">Search</span></span></button><div id="top-nav-search-menu" role="listbox" aria-labelledby="top-nav-search-label"></div></form></div><div class="theme-switcher-menu"><button type="button" class="button action has-icon theme-switcher-menu small" aria-haspopup="menu"><span class="button-wrap"><span class="icon icon-theme-os-default "></span>Theme</span></button></div><ul class="auth-container"><li><a href="https://developer.mozilla.org/users/fxa/login/authenticate/?next=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FScheduler%2FpostTask" class="signin-link" rel="nofollow">Already a subscriber?</a></li><li><a class="button primary mdn-plus-subscribe-link" href="https://developer.mozilla.org/en-US/plus"><span class="button-wrap">Get MDN Plus</span></a></li></ul></div></div></header><div class="article-actions-container"><div class="container"><button type="button" class="button action has-icon sidebar-button" aria-label="Expand sidebar" aria-expanded="false" aria-controls="sidebar-quicklinks"><span class="button-wrap"><span class="icon icon-sidebar "></span></span></button><nav class="breadcrumbs-container" aria-label="Breadcrumb"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="https://developer.mozilla.org/en-US/docs/Web"><span property="name">References</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="../../API.html"><span property="name">Web APIs</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="../Scheduler.html"><span property="name">Scheduler</span></a><meta property="position" content="3"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="postTask.html"><span property="name">Scheduler.postTask()</span></a><meta property="position" content="4"></li></ol></nav></div></div></div><div class="main-wrapper"><aside id="sidebar-quicklinks" class="sidebar"><button type="button" class="button action backdrop" aria-label="Collapse sidebar"><span class="button-wrap"></span></button><nav aria-label="Related Topics" class="sidebar-inner"><div class="in-nav-toc"><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#syntax">Syntax</a></li><li class="document-toc-item "><a class="document-toc-link" href="#examples">Examples</a></li><li class="document-toc-item "><a class="document-toc-link" href="#specifications">Specifications</a></li><li class="document-toc-item "><a class="document-toc-link" href="#browser_compatibility">Browser compatibility</a></li></ul></section></div></div><div><ol><li><strong><a href="../Prioritized_Task_Scheduling_API.html">Prioritized Task Scheduling API</a></strong></li><li><strong><a href="../Scheduler.html"><code>Scheduler</code></a></strong></li><li class="toggle"><details open=""><summary>Instance methods</summary><ol><li><em><code>postTask()</code> </em></li></ol></details></li><li class="toggle"><details open=""><summary>Related pages for Prioritized Task Scheduling API</summary><ol><li><a href="../AbortSignal.html"><code>AbortSignal</code></a></li><li><a href="../TaskController.html"><code>TaskController</code></a></li><li><a href="../TaskPriorityChangeEvent.html"><code>TaskPriorityChangeEvent</code></a></li><li><a href="../TaskSignal.html"><code>TaskSignal</code></a></li><li><a href="../Window/scheduler.html"><code>Window.scheduler</code></a></li></ol></details></li></ol></div></nav></aside><aside class="toc"><nav><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#syntax">Syntax</a></li><li class="document-toc-item "><a class="document-toc-link" href="#examples">Examples</a></li><li class="document-toc-item "><a class="document-toc-link" href="#specifications">Specifications</a></li><li class="document-toc-item "><a class="document-toc-link" href="#browser_compatibility">Browser compatibility</a></li></ul></section></div></nav></aside><main id="content" class="main-content  "><article class="main-page-content" lang="en-US"><h1>Scheduler.postTask()</h1><div class="section-content"><p>The <strong><code>postTask()</code></strong> method of the <a href="../Scheduler.html"><code>Scheduler</code></a> interface is used for adding tasks to be <a href="../Prioritized_Task_Scheduling_API.html">scheduled</a> according to their <a href="../Prioritized_Task_Scheduling_API.html#task_priorities">priority</a>.</p>
<p>
  The method allows users to optionally specify a minimum delay before the task will run, a priority for the task, and a signal that can be used to modify the task priority and/or abort the task.
  It returns a promise that is resolved with the result of the task callback function, or rejected with the abort reason or an error thrown in the task.
</p>
<p>
  Task priority can be <a href="../Prioritized_Task_Scheduling_API.html#mutable_and_immutable_task_priority">mutable or immutable</a>.
  If the task priority will never need to change then it should be set using the <code>options.priority</code> parameter (any priority set through a signal will then be ignored).
  You can still pass an <a href="../AbortSignal.html"><code>AbortSignal</code></a> (which has no priority) or <a href="../TaskSignal.html"><code>TaskSignal</code></a> to the <code>options.signal</code> parameter for aborting the task.
</p>
<p>
  If the task priority might need to be changed the <code>options.priority</code> parameter must not be set.
  Instead a <a href="../TaskController.html"><code>TaskController</code></a> should be created and its <a href="../TaskSignal.html"><code>TaskSignal</code></a> should be passed to <code>options.signal</code>.
  The task priority will be initialized from the signal priority, and can later be modified using the signal's associated <a href="../TaskController.html"><code>TaskController</code></a>.
</p>
<p>If no priority is set then the task priority defaults to <a href="../Prioritized_Task_Scheduling_API.html#user-visible"><code>"user-visible"</code></a>.</p>
<p>
  If a delay is specified and greater than 0, then the execution of the task will be delayed for at least that many milliseconds.
  Otherwise the task is immediately scheduled for prioritization.
</p></div><section aria-labelledby="syntax"><a class="dashAnchor" name="//apple_ref/Section/Syntax"></a><h2 id="syntax"><a href="#syntax">Syntax</a></h2><div class="section-content"><div class="code-example"><pre class="brush: js notranslate"><code><span class="token function">postTask</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
<span class="token function">postTask</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre></div></div></section><section aria-labelledby="parameters"><h3 id="parameters"><a href="#parameters">Parameters</a></h3><div class="section-content"><dl>
  <dt id="callback"><code>callback</code></dt>
  <dd>
    <p>
      An callback function that implements the task.
      The return value of the callback is used to resolve the promise returned by this function.
    </p>
  </dd>
  <dt id="options"><code>options</code> <span class="badge inline optional">Optional</span></dt>
  <dd>
    <p>Task options, including:</p>
    <dl>
      <dt id="priority"><code>priority</code> <span class="badge inline optional">Optional</span></dt>
      <dd>
        <p>
          The immutable <a href="../Prioritized_Task_Scheduling_API.html#task_priorities">priority</a> of the task.
          One of: <a href="../Prioritized_Task_Scheduling_API.html#user-blocking"><code>"user-blocking"</code></a>, <a href="../Prioritized_Task_Scheduling_API.html#user-visible"><code>"user-visible"</code></a>, <a href="../Prioritized_Task_Scheduling_API.html#background"><code>"background"</code></a>.
          If set, this priority is used for the lifetime of the task and priority set on the <code>signal</code> is ignored.
        </p>
      </dd>
      <dt id="signal"><code>signal</code> <span class="badge inline optional">Optional</span></dt>
      <dd>
        <p>A <a href="../TaskSignal.html"><code>TaskSignal</code></a> or <a href="../AbortSignal.html"><code>AbortSignal</code></a> that can be used to abort the task (from its associated controller).</p>
        <p>
          If the <code>options.priority</code> parameter is set then the task priority cannot be changed, and any priority on the signal is ignored.
          Otherwise, if the signal is a <a href="../TaskSignal.html"><code>TaskSignal</code></a> its priority is used to set the initial task priority, and the signal's controller may later use it to change the task priority.
        </p>
      </dd>
      <dt id="delay"><code>delay</code> <span class="badge inline optional">Optional</span></dt>
      <dd>
        <p>
          The minimum amount of time after which the task will be added to the scheduler queue, in whole milliseconds.
          The actual delay may be higher than specified, but will not be less.
          The default delay is 0.
        </p>
      </dd>
    </dl>
  </dd>
</dl></div></section><section aria-labelledby="return_value"><h3 id="return_value"><a href="#return_value">Return Value</a></h3><div class="section-content"><p>
  Returns a <a href="../../JavaScript/Reference/Global_Objects/Promise.html"><code>Promise</code></a> that is resolved with the return value of the <code>callback</code> function, or which may be rejected with the <code>signal</code>'s abort reason (<a href="../AbortSignal/reason.html"><code>AbortSignal.reason</code></a>).
  The promise may also be rejected with an error thrown by the callback during execution.
</p></div></section><section aria-labelledby="examples"><a class="dashAnchor" name="//apple_ref/Section/Examples"></a><h2 id="examples"><a href="#examples">Examples</a></h2><div class="section-content"><p>The following examples are slightly simplified versions of the live examples provided in <a href="../Prioritized_Task_Scheduling_API.html#examples">Prioritized Task Scheduling API &gt; Examples</a>.</p></div></section><section aria-labelledby="feature_checking"><h3 id="feature_checking"><a href="#feature_checking">Feature checking</a></h3><div class="section-content"><p>Check whether prioritized task scheduling is supported by testing for the <code>scheduler</code> property in the global "<code>this</code>" (such as <a href="../Window.html#scheduler"><code>Window.scheduler</code></a>).</p>
<p>For example, the code below logs "Feature: Supported" if the API is supported on this browser.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// Check that feature is supported</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'scheduler'</span> <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Feature: Supported'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Feature: NOT Supported'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div></section><section aria-labelledby="basic_usage"><h3 id="basic_usage"><a href="#basic_usage">Basic usage</a></h3><div class="section-content"><p>
  Tasks are posted specifying a callback function (task) in the first argument, and an optional second argument that can be used to specify a task priority, signal, and/or delay.
  The method returns a <a href="../../JavaScript/Reference/Global_Objects/Promise.html"><code>Promise</code></a> that resolves with the return value of the callback function, or rejects with either an abort error or an error thrown in the function.
</p>
<p>
  Because it returns a promise, <code>postTask()</code> can be <a href="../../JavaScript/Reference/Global_Objects/Promise.html#chained_promises">chained with other promises</a>.
  Below we show how to wait on the promise to resolve using <a href="../../JavaScript/Reference/Global_Objects/Promise/then.html"><code>then</code></a> or reject using <a href="../../JavaScript/Reference/Global_Objects/Promise/catch.html"><code>catch</code></a>.
  The priority is not specified, so the default priority of <code>user-visible</code> will be used.
</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// A function that defines a task</span>
<span class="token keyword">function</span> <span class="token function">myTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'Task 1: user-visible'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Post task with default priority: 'user-visible' (no other options)</span>
<span class="token comment">// When the task resolves, Promise.then() logs the result.</span>
scheduler
  <span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span>myTask<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">signal</span><span class="token operator">:</span> abortTaskController<span class="token punctuation">.</span>signal <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">taskResult</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>taskResult<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Log resolved value</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Error:'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Log error or abort</span>
</code></pre></div>
<p>
  The method can also be used with <a href="../../JavaScript/Reference/Operators/await.html"><code>await</code></a> inside an <a href="../../JavaScript/Reference/Statements/async_function.html">async function</a>.
  The code below shows how you might use this approach to wait on a <code>user-blocking</code> task.
</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">myTask2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'Task 2: user-blocking'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">runTask2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> scheduler<span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span>myTask2<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token string">'user-blocking'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Task 2: user-blocking'.</span>
<span class="token punctuation">}</span>
<span class="token function">runTask2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></section><section aria-labelledby="permanent_priorities"><h3 id="permanent_priorities"><a href="#permanent_priorities">Permanent priorities</a></h3><div class="section-content"><p>
  <a href="#task_priorities">Task priorities</a> may be set using <code>priority</code> parameter in the optional second argument.
  Priorities that are set in this way cannot be changed (are <a href="#mutable_and_immutable_task_priority">immutable</a>).
</p>
<p>
  Below we post two groups of three tasks, each member in reverse order of priority.
  The final task has the default priority.
  When run, each task simply logs it's expected order (we're not waiting on the result because we don't need to in order to show execution order).
</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// three tasks, in reverse order of priority</span>
scheduler<span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bckg 1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token string">'background'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
scheduler<span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'usr-vis 1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token string">'user-visible'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
scheduler<span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'usr-blk 1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token string">'user-blocking'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// three more tasks, in reverse order of priority</span>
scheduler<span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bckg 2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token string">'background'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
scheduler<span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'usr-vis 2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token string">'user-visible'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
scheduler<span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'usr-blk 2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token string">'user-blocking'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Task with default priority: user-visible</span>
scheduler<span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'usr-vis 3 (default)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>The expected output is shown below: tasks are executed in priority order, and then declaration order.</p>
<pre class="notranslate">usr-blk 1
usr-blk 2
usr-vis 1
usr-vis 2
usr-vis 3 (default)
bckg 1
bckg 2
</pre></div></section><section aria-labelledby="changing_task_priorities"><h3 id="changing_task_priorities"><a href="#changing_task_priorities">Changing task priorities</a></h3><div class="section-content"><p>
  <a href="#task_priorities">Task priorities</a> can also take their initial value from a <a href="../TaskSignal.html"><code>TaskSignal</code></a> passed to <code>postTask()</code> in the optional second argument.
  If set in this way, the priority of the task <a href="#mutable_and_immutable_task_priority">can then be changed</a> using the controller associated with the signal.
</p>
<div class="notecard note" id="sect1">
  <p><strong>Note:</strong> Setting and changing task priorities using a signal only works when the <code>options.priority</code> argument to <code>postTask()</code> is not set, and when the <code>options.signal</code> is a <a href="../TaskSignal.html"><code>TaskSignal</code></a> (and not an <a href="../AbortSignal.html"><code>AbortSignal</code></a>).</p>
</div>
<p>The code below first shows how to create a <a href="../TaskController.html"><code>TaskController</code></a>, setting the initial priority of its signal to <code>user-blocking</code> in the <a href="../TaskController/TaskController.html"><code>TaskController()</code> constructor</a>.</p>
<p>
  We then use <code>addEventListener()</code> to add an event listener to the controller's signal (we could alternatively use the <code>TaskSignal.onprioritychange</code> property to add an event handler).
  The event handler uses <a href="../TaskPriorityChangeEvent/previousPriority.html" title="previousPriority"><code>previousPriority</code></a> on the event to get the original priority and <a href="../TaskSignal/priority.html"><code>TaskSignal.priority</code></a> on the event target to get the new/current priority.
</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// Create a TaskController, setting its signal priority to 'user-blocking'</span>
<span class="token keyword">const</span> controller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TaskController</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token string">'user-blocking'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Listen for 'prioritychange' events on the controller's signal.</span>
controller<span class="token punctuation">.</span>signal<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'prioritychange'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> previousPriority <span class="token operator">=</span> event<span class="token punctuation">.</span>previousPriority<span class="token punctuation">;</span>
  <span class="token keyword">const</span> newPriority <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>priority<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Priority changed from </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>previousPriority<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newPriority<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Finally, the task is posted, passing in the signal, and then we immediately change the priority to <code>background</code> by calling <a href="../TaskController/setPriority.html"><code>TaskController.setPriority()</code></a> on the controller.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// Post task using the controller's signal.</span>
<span class="token comment">// The signal priority sets the initial priority of the task</span>
scheduler<span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Task 1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">signal</span><span class="token operator">:</span> controller<span class="token punctuation">.</span>signal <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Change the priority to 'background' using the controller</span>
controller<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>
  The expected output is shown below.
  Note that in this case the priority is changed before the task is executed, but it could equally have been changed while the task was running.
</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// Expected output</span>
<span class="token comment">// Priority changed from user-blocking to background.</span>
<span class="token comment">// Task 1</span>
</code></pre></div></div></section><section aria-labelledby="aborting_tasks"><h3 id="aborting_tasks"><a href="#aborting_tasks">Aborting tasks</a></h3><div class="section-content"><p>
  Tasks can be aborted using either <a href="../TaskController.html"><code>TaskController</code></a> and <a href="../AbortController.html"><code>AbortController</code></a>, in exactly the same way.
  The only difference is that you must use <a href="../TaskController.html"><code>TaskController</code></a> if you also want to set the task priority.
</p>
<p>
  The code below creates a controller and passes its signal to the task.
  The task is then immediately aborted.
  This causes the promise to be rejected with an <code>AbortError</code>, which is caught in the <code>catch</code> block and logged.
  Note that we could also have listened for the <a href="../AbortSignal/abort_event.html"><code>abort</code> event</a> fired on the <a href="../TaskSignal.html"><code>TaskSignal</code></a> or <a href="../AbortSignal.html"><code>AbortSignal</code></a> and logged the abort there.
</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// Declare a TaskController with default priority</span>
<span class="token keyword">const</span> abortTaskController <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TaskController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Post task passing the controller's signal</span>
scheduler
  <span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Task executing'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">signal</span><span class="token operator">:</span> abortTaskController<span class="token punctuation">.</span>signal <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">taskResult</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>taskResult<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//This won't run!</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Error:'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Log the error</span>

<span class="token comment">// Abort the task</span>
abortTaskController<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></section><section aria-labelledby="delaying_tasks"><h3 id="delaying_tasks"><a href="#delaying_tasks">Delaying tasks</a></h3><div class="section-content"><p>
  Tasks can be delayed by specifying an integer number of milliseconds in the <code>options.delay</code> parameter to <code>postTask()</code>.
  This effectively adds the task to the prioritized queue on a timeout, as might be created using <a href="../setTimeout.html"><code>setTimeout()</code></a>.
  The <code>delay</code> is the minimum amount of time before the task is added to the scheduler; it may be longer.
</p>
<p>The code below shows two tasks added (as arrow functions) with a delay.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// Post task as arrow function with delay of 2 seconds</span>
scheduler
  <span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">'Task delayed by 2000ms'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">delay</span><span class="token operator">:</span> <span class="token number">2000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">taskResult</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>taskResult<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
scheduler
  <span class="token punctuation">.</span><span class="token function">postTask</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">'Next task should complete in about 2000ms'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">delay</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">taskResult</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>taskResult<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></section><a class="dashAnchor" name="//apple_ref/Section/Specifications"></a><h2 id="specifications"><a href="#specifications">Specifications</a></h2><table class="standard-table"><thead><tr><th scope="col">Specification</th></tr></thead><tbody><tr><td><a href="https://wicg.github.io/scheduling-apis/#dom-scheduler-posttask">Prioritized Task Scheduling<!-- --> <br><small># <!-- -->dom-scheduler-posttask</small></a></td></tr></tbody></table><a class="dashAnchor" name="//apple_ref/Section/Browser%20compatibility"></a><h2 id="browser_compatibility"><a href="#browser_compatibility">Browser compatibility</a></h2><p><table class="bc-table bc-table-web"><thead><tr class="bc-platforms"><td></td><th class="bc-platform bc-platform-desktop" colspan="5" title="desktop"><span class="icon icon-desktop"></span><span class="visually-hidden">desktop</span></th><th class="bc-platform bc-platform-mobile" colspan="6" title="mobile"><span class="icon icon-mobile"></span><span class="visually-hidden">mobile</span></th></tr><tr class="bc-browsers"><td></td><th class="bc-browser bc-browser-chrome"><div class="bc-head-txt-label bc-head-icon-chrome">Chrome</div><div class="bc-head-icon-symbol icon icon-chrome"></div></th><th class="bc-browser bc-browser-edge"><div class="bc-head-txt-label bc-head-icon-edge">Edge</div><div class="bc-head-icon-symbol icon icon-edge"></div></th><th class="bc-browser bc-browser-firefox"><div class="bc-head-txt-label bc-head-icon-firefox">Firefox</div><div class="bc-head-icon-symbol icon icon-simple-firefox"></div></th><th class="bc-browser bc-browser-opera"><div class="bc-head-txt-label bc-head-icon-opera">Opera</div><div class="bc-head-icon-symbol icon icon-opera"></div></th><th class="bc-browser bc-browser-safari"><div class="bc-head-txt-label bc-head-icon-safari">Safari</div><div class="bc-head-icon-symbol icon icon-safari"></div></th><th class="bc-browser bc-browser-chrome_android"><div class="bc-head-txt-label bc-head-icon-chrome_android">Chrome Android</div><div class="bc-head-icon-symbol icon icon-chrome"></div></th><th class="bc-browser bc-browser-firefox_android"><div class="bc-head-txt-label bc-head-icon-firefox_android">Firefox for Android</div><div class="bc-head-icon-symbol icon icon-simple-firefox"></div></th><th class="bc-browser bc-browser-opera_android"><div class="bc-head-txt-label bc-head-icon-opera_android">Opera Android</div><div class="bc-head-icon-symbol icon icon-opera"></div></th><th class="bc-browser bc-browser-safari_ios"><div class="bc-head-txt-label bc-head-icon-safari_ios">Safari on iOS</div><div class="bc-head-icon-symbol icon icon-safari"></div></th><th class="bc-browser bc-browser-samsunginternet_android"><div class="bc-head-txt-label bc-head-icon-samsunginternet_android">Samsung Internet</div><div class="bc-head-icon-symbol icon icon-samsunginternet"></div></th><th class="bc-browser bc-browser-webview_android"><div class="bc-head-txt-label bc-head-icon-webview_android">WebView Android</div><div class="bc-head-icon-symbol icon icon-webview"></div></th></tr></thead><tbody><tr><th class="bc-feature bc-feature-depth-0" scope="row"><div class="bc-table-row-header"><code>postTask</code></div></th><td class="bc-support bc-browser-chrome bc-supports-yes bc-has-history" aria-expanded="false"><button type="button" title="Toggle history"><div class="bcd-cell-text-wrapper"><div class="bcd-cell-icons"><span class="icon-wrap"><abbr class="
              bc-level-yes
              icon
              icon-yes" title="Full support"><span class="bc-support-level">Full support</span></abbr></span></div><div class="bcd-cell-text-copy"><span class="bc-browser-name">Chrome</span><span class="bc-version-label" title="Released 2021-09-21">94</span></div></div><span class="offscreen">Toggle history</span></button></td><td class="bc-support bc-browser-edge bc-supports-yes bc-has-history" aria-expanded="false"><button type="button" title="Toggle history"><div class="bcd-cell-text-wrapper"><div class="bcd-cell-icons"><span class="icon-wrap"><abbr class="
              bc-level-yes
              icon
              icon-yes" title="Full support"><span class="bc-support-level">Full support</span></abbr></span></div><div class="bcd-cell-text-copy"><span class="bc-browser-name">Edge</span><span class="bc-version-label" title="Released 2021-09-24">94</span></div></div><span class="offscreen">Toggle history</span></button></td><td class="bc-support bc-browser-firefox bc-supports-no bc-has-history" aria-expanded="false"><button type="button" title="Toggle history"><div class="bcd-cell-text-wrapper"><div class="bcd-cell-icons"><span class="icon-wrap"><abbr class="
              bc-level-no
              icon
              icon-no" title="No support"><span class="bc-support-level">No support</span></abbr></span></div><div class="bcd-cell-text-copy"><span class="bc-browser-name">Firefox</span><span class="bc-version-label" title="Released 2022-05-31">101</span></div><div class="bc-icons"><abbr class="only-icon" title="User must explicitly enable this feature."><span>disabled</span><i class="icon icon-disabled"></i></abbr></div></div><span class="offscreen">Toggle history</span></button></td><td class="bc-support bc-browser-opera bc-supports-yes bc-has-history" aria-expanded="false"><button type="button" title="Toggle history"><div class="bcd-cell-text-wrapper"><div class="bcd-cell-icons"><span class="icon-wrap"><abbr class="
              bc-level-yes
              icon
              icon-yes" title="Full support"><span class="bc-support-level">Full support</span></abbr></span></div><div class="bcd-cell-text-copy"><span class="bc-browser-name">Opera</span><span class="bc-version-label" title="Released 2021-10-05">80</span></div></div><span class="offscreen">Toggle history</span></button></td><td class="bc-support bc-browser-safari bc-supports-no bc-has-history" aria-expanded="false"><button type="button" title="Toggle history"><div class="bcd-cell-text-wrapper"><div class="bcd-cell-icons"><span class="icon-wrap"><abbr class="
              bc-level-no
              icon
              icon-no" title="No support"><span class="bc-support-level">No support</span></abbr></span></div><div class="bcd-cell-text-copy"><span class="bc-browser-name">Safari</span><span class="bc-version-label">No</span></div></div><span class="offscreen">Toggle history</span></button></td><td class="bc-support bc-browser-chrome_android bc-supports-yes bc-has-history" aria-expanded="false"><button type="button" title="Toggle history"><div class="bcd-cell-text-wrapper"><div class="bcd-cell-icons"><span class="icon-wrap"><abbr class="
              bc-level-yes
              icon
              icon-yes" title="Full support"><span class="bc-support-level">Full support</span></abbr></span></div><div class="bcd-cell-text-copy"><span class="bc-browser-name">Chrome Android</span><span class="bc-version-label" title="Released 2021-09-21">94</span></div></div><span class="offscreen">Toggle history</span></button></td><td class="bc-support bc-browser-firefox_android bc-supports-no bc-has-history" aria-expanded="false"><button type="button" title="Toggle history"><div class="bcd-cell-text-wrapper"><div class="bcd-cell-icons"><span class="icon-wrap"><abbr class="
              bc-level-no
              icon
              icon-no" title="No support"><span class="bc-support-level">No support</span></abbr></span></div><div class="bcd-cell-text-copy"><span class="bc-browser-name">Firefox for Android</span><span class="bc-version-label">No</span></div></div><span class="offscreen">Toggle history</span></button></td><td class="bc-support bc-browser-opera_android bc-supports-yes bc-has-history" aria-expanded="false"><button type="button" title="Toggle history"><div class="bcd-cell-text-wrapper"><div class="bcd-cell-icons"><span class="icon-wrap"><abbr class="
              bc-level-yes
              icon
              icon-yes" title="Full support"><span class="bc-support-level">Full support</span></abbr></span></div><div class="bcd-cell-text-copy"><span class="bc-browser-name">Opera Android</span><span class="bc-version-label" title="Released 2021-12-15">66</span></div></div><span class="offscreen">Toggle history</span></button></td><td class="bc-support bc-browser-safari_ios bc-supports-no bc-has-history" aria-expanded="false"><button type="button" title="Toggle history"><div class="bcd-cell-text-wrapper"><div class="bcd-cell-icons"><span class="icon-wrap"><abbr class="
              bc-level-no
              icon
              icon-no" title="No support"><span class="bc-support-level">No support</span></abbr></span></div><div class="bcd-cell-text-copy"><span class="bc-browser-name">Safari on iOS</span><span class="bc-version-label">No</span></div></div><span class="offscreen">Toggle history</span></button></td><td class="bc-support bc-browser-samsunginternet_android bc-supports-yes bc-has-history" aria-expanded="false"><button type="button" title="Toggle history"><div class="bcd-cell-text-wrapper"><div class="bcd-cell-icons"><span class="icon-wrap"><abbr class="
              bc-level-yes
              icon
              icon-yes" title="Full support"><span class="bc-support-level">Full support</span></abbr></span></div><div class="bcd-cell-text-copy"><span class="bc-browser-name">Samsung Internet</span><span class="bc-version-label" title="Released 2022-05-04">17.0</span></div></div><span class="offscreen">Toggle history</span></button></td><td class="bc-support bc-browser-webview_android bc-supports-yes bc-has-history" aria-expanded="false"><button type="button" title="Toggle history"><div class="bcd-cell-text-wrapper"><div class="bcd-cell-icons"><span class="icon-wrap"><abbr class="
              bc-level-yes
              icon
              icon-yes" title="Full support"><span class="bc-support-level">Full support</span></abbr></span></div><div class="bcd-cell-text-copy"><span class="bc-browser-name">WebView Android</span><span class="bc-version-label" title="Released 2021-09-21">94</span></div></div><span class="offscreen">Toggle history</span></button></td></tr></tbody></table></p><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a content problem with this page?</h3><ul><li>Edit the page <a href="https://github.com/mdn/content/edit/main/files/en-us/web/api/scheduler/posttask/index.md" title="This will take you to GitHub, where you'll need to sign in first." target="_blank" rel="noopener noreferrer">on GitHub</a>.</li><li>Report the <a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FScheduler%2FpostTask&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fapi%2Fscheduler%2Fposttask%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FScheduler%2FpostTask%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fapi%2Fscheduler%2Fposttask%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2F16e398809d62247dbadc89ff4024a0ffa4781f0e%0A*+Document+last+modified%3A+2022-09-13T06%3A27%3A50.000Z%0A%0A%3C%2Fdetails%3E" title="This will take you to GitHub to file a new issue." target="_blank" rel="noopener noreferrer">content issue</a>.</li><li>View the source <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/scheduler/posttask/index.md?plain=1" title="Folder: en-us/web/api/scheduler/posttask (Opens in a new tab)" target="_blank" rel="noopener noreferrer">on GitHub</a>.</li></ul>Want to get more involved? Learn<!-- --> <a href="https://github.com/mdn/content/blob/main/CONTRIBUTING.md" title="This will take you to our contribution guidelines on GitHub." target="_blank" rel="noopener noreferrer">how to contribute</a>.</div><p class="last-modified-date">This page was last modified on<!-- --> <time datetime="2022-09-13T06:27:50.000Z">Sep 13, 2022</time> by<!-- --> <a href="postTask/contributors.txt">MDN contributors</a>.</p></div></aside></article></main></div><footer id="nav-footer" class="page-footer"><div><a href="http://developer.mozilla.org/en-US/docs/Web/API/Scheduler/postTask">Scheduler.postTask()</a> by <a href="http://developer.mozilla.org/en-US/docs/Web/API/Scheduler/postTask$history">Mozilla Contributors</a> is licensed under <a href="http://creativecommons.org/licenses/by-sa/2.5/">CC-BY-SA 2.5</a>.</div></footer></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Scheduler.postTask()","mdn_url":"/en-US/docs/Web/API/Scheduler/postTask","locale":"en-US","native":"English (US)","browserCompat":["api.Scheduler.postTask"],"sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Prioritized_Task_Scheduling_API\">Prioritized Task Scheduling API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/Scheduler\"><code>Scheduler</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><em><code>postTask()</code> </em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Prioritized Task Scheduling API</summary><ol><li><a href=\"/en-US/docs/Web/API/AbortSignal\"><code>AbortSignal</code></a></li><li><a href=\"/en-US/docs/Web/API/TaskController\"><code>TaskController</code></a></li><li><a href=\"/en-US/docs/Web/API/TaskPriorityChangeEvent\"><code>TaskPriorityChangeEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/TaskSignal\"><code>TaskSignal</code></a></li><li><a href=\"/en-US/docs/Web/API/Window/scheduler\"><code>Window.scheduler</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The <strong><code>postTask()</code></strong> method of the <a href=\"/en-US/docs/Web/API/Scheduler\"><code>Scheduler</code></a> interface is used for adding tasks to be <a href=\"/en-US/docs/Web/API/Prioritized_Task_Scheduling_API\">scheduled</a> according to their <a href=\"/en-US/docs/Web/API/Prioritized_Task_Scheduling_API#task_priorities\">priority</a>.</p>\n<p>\n  The method allows users to optionally specify a minimum delay before the task will run, a priority for the task, and a signal that can be used to modify the task priority and/or abort the task.\n  It returns a promise that is resolved with the result of the task callback function, or rejected with the abort reason or an error thrown in the task.\n</p>\n<p>\n  Task priority can be <a href=\"/en-US/docs/Web/API/Prioritized_Task_Scheduling_API#mutable_and_immutable_task_priority\">mutable or immutable</a>.\n  If the task priority will never need to change then it should be set using the <code>options.priority</code> parameter (any priority set through a signal will then be ignored).\n  You can still pass an <a href=\"/en-US/docs/Web/API/AbortSignal\"><code>AbortSignal</code></a> (which has no priority) or <a href=\"/en-US/docs/Web/API/TaskSignal\"><code>TaskSignal</code></a> to the <code>options.signal</code> parameter for aborting the task.\n</p>\n<p>\n  If the task priority might need to be changed the <code>options.priority</code> parameter must not be set.\n  Instead a <a href=\"/en-US/docs/Web/API/TaskController\"><code>TaskController</code></a> should be created and its <a href=\"/en-US/docs/Web/API/TaskSignal\"><code>TaskSignal</code></a> should be passed to <code>options.signal</code>.\n  The task priority will be initialized from the signal priority, and can later be modified using the signal's associated <a href=\"/en-US/docs/Web/API/TaskController\"><code>TaskController</code></a>.\n</p>\n<p>If no priority is set then the task priority defaults to <a href=\"/en-US/docs/Web/API/Prioritized_Task_Scheduling_API#user-visible\"><code>\"user-visible\"</code></a>.</p>\n<p>\n  If a delay is specified and greater than 0, then the execution of the task will be delayed for at least that many milliseconds.\n  Otherwise the task is immediately scheduled for prioritization.\n</p>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span>\n<span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"parameters","title":"Parameters","isH3":true,"content":"<dl>\n  <dt id=\"callback\"><code>callback</code></dt>\n  <dd>\n    <p>\n      An callback function that implements the task.\n      The return value of the callback is used to resolve the promise returned by this function.\n    </p>\n  </dd>\n  <dt id=\"options\"><code>options</code> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>Task options, including:</p>\n    <dl>\n      <dt id=\"priority\"><code>priority</code> <span class=\"badge inline optional\">Optional</span></dt>\n      <dd>\n        <p>\n          The immutable <a href=\"/en-US/docs/Web/API/Prioritized_Task_Scheduling_API#task_priorities\">priority</a> of the task.\n          One of: <a href=\"/en-US/docs/Web/API/Prioritized_Task_Scheduling_API#user-blocking\"><code>\"user-blocking\"</code></a>, <a href=\"/en-US/docs/Web/API/Prioritized_Task_Scheduling_API#user-visible\"><code>\"user-visible\"</code></a>, <a href=\"/en-US/docs/Web/API/Prioritized_Task_Scheduling_API#background\"><code>\"background\"</code></a>.\n          If set, this priority is used for the lifetime of the task and priority set on the <code>signal</code> is ignored.\n        </p>\n      </dd>\n      <dt id=\"signal\"><code>signal</code> <span class=\"badge inline optional\">Optional</span></dt>\n      <dd>\n        <p>A <a href=\"/en-US/docs/Web/API/TaskSignal\"><code>TaskSignal</code></a> or <a href=\"/en-US/docs/Web/API/AbortSignal\"><code>AbortSignal</code></a> that can be used to abort the task (from its associated controller).</p>\n        <p>\n          If the <code>options.priority</code> parameter is set then the task priority cannot be changed, and any priority on the signal is ignored.\n          Otherwise, if the signal is a <a href=\"/en-US/docs/Web/API/TaskSignal\"><code>TaskSignal</code></a> its priority is used to set the initial task priority, and the signal's controller may later use it to change the task priority.\n        </p>\n      </dd>\n      <dt id=\"delay\"><code>delay</code> <span class=\"badge inline optional\">Optional</span></dt>\n      <dd>\n        <p>\n          The minimum amount of time after which the task will be added to the scheduler queue, in whole milliseconds.\n          The actual delay may be higher than specified, but will not be less.\n          The default delay is 0.\n        </p>\n      </dd>\n    </dl>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"return_value","title":"Return Value","isH3":true,"content":"<p>\n  Returns a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> that is resolved with the return value of the <code>callback</code> function, or which may be rejected with the <code>signal</code>'s abort reason (<a href=\"/en-US/docs/Web/API/AbortSignal/reason\"><code>AbortSignal.reason</code></a>).\n  The promise may also be rejected with an error thrown by the callback during execution.\n</p>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>The following examples are slightly simplified versions of the live examples provided in <a href=\"/en-US/docs/Web/API/Prioritized_Task_Scheduling_API#examples\">Prioritized Task Scheduling API &gt; Examples</a>.</p>"}},{"type":"prose","value":{"id":"feature_checking","title":"Feature checking","isH3":true,"content":"<p>Check whether prioritized task scheduling is supported by testing for the <code>scheduler</code> property in the global \"<code>this</code>\" (such as <a href=\"/en-US/docs/Web/API/Window#scheduler\"><code>Window.scheduler</code></a>).</p>\n<p>For example, the code below logs \"Feature: Supported\" if the API is supported on this browser.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Check that feature is supported</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'scheduler'</span> <span class=\"token keyword\">in</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Feature: Supported'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Feature: NOT Supported'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"basic_usage","title":"Basic usage","isH3":true,"content":"<p>\n  Tasks are posted specifying a callback function (task) in the first argument, and an optional second argument that can be used to specify a task priority, signal, and/or delay.\n  The method returns a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> that resolves with the return value of the callback function, or rejects with either an abort error or an error thrown in the function.\n</p>\n<p>\n  Because it returns a promise, <code>postTask()</code> can be <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise#chained_promises\">chained with other promises</a>.\n  Below we show how to wait on the promise to resolve using <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then\"><code>then</code></a> or reject using <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch\"><code>catch</code></a>.\n  The priority is not specified, so the default priority of <code>user-visible</code> will be used.\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// A function that defines a task</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">myTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">'Task 1: user-visible'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Post task with default priority: 'user-visible' (no other options)</span>\n<span class=\"token comment\">// When the task resolves, Promise.then() logs the result.</span>\nscheduler\n  <span class=\"token punctuation\">.</span><span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span>myTask<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">signal</span><span class=\"token operator\">:</span> abortTaskController<span class=\"token punctuation\">.</span>signal <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">taskResult</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>taskResult<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Log resolved value</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Log error or abort</span>\n</code></pre></div>\n<p>\n  The method can also be used with <a href=\"/en-US/docs/Web/JavaScript/Reference/Operators/await\"><code>await</code></a> inside an <a href=\"/en-US/docs/Web/JavaScript/Reference/Statements/async_function\">async function</a>.\n  The code below shows how you might use this approach to wait on a <code>user-blocking</code> task.\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">myTask2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">'Task 2: user-blocking'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">runTask2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> scheduler<span class=\"token punctuation\">.</span><span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span>myTask2<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">priority</span><span class=\"token operator\">:</span> <span class=\"token string\">'user-blocking'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'Task 2: user-blocking'.</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">runTask2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"permanent_priorities","title":"Permanent priorities","isH3":true,"content":"<p>\n  <a href=\"#task_priorities\">Task priorities</a> may be set using <code>priority</code> parameter in the optional second argument.\n  Priorities that are set in this way cannot be changed (are <a href=\"#mutable_and_immutable_task_priority\">immutable</a>).\n</p>\n<p>\n  Below we post two groups of three tasks, each member in reverse order of priority.\n  The final task has the default priority.\n  When run, each task simply logs it's expected order (we're not waiting on the result because we don't need to in order to show execution order).\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// three tasks, in reverse order of priority</span>\nscheduler<span class=\"token punctuation\">.</span><span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bckg 1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">priority</span><span class=\"token operator\">:</span> <span class=\"token string\">'background'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nscheduler<span class=\"token punctuation\">.</span><span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'usr-vis 1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">priority</span><span class=\"token operator\">:</span> <span class=\"token string\">'user-visible'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nscheduler<span class=\"token punctuation\">.</span><span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'usr-blk 1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">priority</span><span class=\"token operator\">:</span> <span class=\"token string\">'user-blocking'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// three more tasks, in reverse order of priority</span>\nscheduler<span class=\"token punctuation\">.</span><span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bckg 2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">priority</span><span class=\"token operator\">:</span> <span class=\"token string\">'background'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nscheduler<span class=\"token punctuation\">.</span><span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'usr-vis 2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">priority</span><span class=\"token operator\">:</span> <span class=\"token string\">'user-visible'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nscheduler<span class=\"token punctuation\">.</span><span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'usr-blk 2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">priority</span><span class=\"token operator\">:</span> <span class=\"token string\">'user-blocking'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Task with default priority: user-visible</span>\nscheduler<span class=\"token punctuation\">.</span><span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'usr-vis 3 (default)'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>The expected output is shown below: tasks are executed in priority order, and then declaration order.</p>\n<pre class=\"notranslate\">usr-blk 1\nusr-blk 2\nusr-vis 1\nusr-vis 2\nusr-vis 3 (default)\nbckg 1\nbckg 2\n</pre>"}},{"type":"prose","value":{"id":"changing_task_priorities","title":"Changing task priorities","isH3":true,"content":"<p>\n  <a href=\"#task_priorities\">Task priorities</a> can also take their initial value from a <a href=\"/en-US/docs/Web/API/TaskSignal\"><code>TaskSignal</code></a> passed to <code>postTask()</code> in the optional second argument.\n  If set in this way, the priority of the task <a href=\"#mutable_and_immutable_task_priority\">can then be changed</a> using the controller associated with the signal.\n</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> Setting and changing task priorities using a signal only works when the <code>options.priority</code> argument to <code>postTask()</code> is not set, and when the <code>options.signal</code> is a <a href=\"/en-US/docs/Web/API/TaskSignal\"><code>TaskSignal</code></a> (and not an <a href=\"/en-US/docs/Web/API/AbortSignal\"><code>AbortSignal</code></a>).</p>\n</div>\n<p>The code below first shows how to create a <a href=\"/en-US/docs/Web/API/TaskController\"><code>TaskController</code></a>, setting the initial priority of its signal to <code>user-blocking</code> in the <a href=\"/en-US/docs/Web/API/TaskController/TaskController\"><code>TaskController()</code> constructor</a>.</p>\n<p>\n  We then use <code>addEventListener()</code> to add an event listener to the controller's signal (we could alternatively use the <code>TaskSignal.onprioritychange</code> property to add an event handler).\n  The event handler uses <a href=\"/en-US/docs/Web/API/TaskPriorityChangeEvent/previousPriority\" title=\"previousPriority\"><code>previousPriority</code></a> on the event to get the original priority and <a href=\"/en-US/docs/Web/API/TaskSignal/priority\"><code>TaskSignal.priority</code></a> on the event target to get the new/current priority.\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Create a TaskController, setting its signal priority to 'user-blocking'</span>\n<span class=\"token keyword\">const</span> controller <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TaskController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">priority</span><span class=\"token operator\">:</span> <span class=\"token string\">'user-blocking'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Listen for 'prioritychange' events on the controller's signal.</span>\ncontroller<span class=\"token punctuation\">.</span>signal<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'prioritychange'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> previousPriority <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>previousPriority<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> newPriority <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>priority<span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Priority changed from </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>previousPriority<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newPriority<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Finally, the task is posted, passing in the signal, and then we immediately change the priority to <code>background</code> by calling <a href=\"/en-US/docs/Web/API/TaskController/setPriority\"><code>TaskController.setPriority()</code></a> on the controller.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Post task using the controller's signal.</span>\n<span class=\"token comment\">// The signal priority sets the initial priority of the task</span>\nscheduler<span class=\"token punctuation\">.</span><span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Task 1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">signal</span><span class=\"token operator\">:</span> controller<span class=\"token punctuation\">.</span>signal <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Change the priority to 'background' using the controller</span>\ncontroller<span class=\"token punctuation\">.</span><span class=\"token function\">setPriority</span><span class=\"token punctuation\">(</span><span class=\"token string\">'background'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>\n  The expected output is shown below.\n  Note that in this case the priority is changed before the task is executed, but it could equally have been changed while the task was running.\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Expected output</span>\n<span class=\"token comment\">// Priority changed from user-blocking to background.</span>\n<span class=\"token comment\">// Task 1</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"aborting_tasks","title":"Aborting tasks","isH3":true,"content":"<p>\n  Tasks can be aborted using either <a href=\"/en-US/docs/Web/API/TaskController\"><code>TaskController</code></a> and <a href=\"/en-US/docs/Web/API/AbortController\"><code>AbortController</code></a>, in exactly the same way.\n  The only difference is that you must use <a href=\"/en-US/docs/Web/API/TaskController\"><code>TaskController</code></a> if you also want to set the task priority.\n</p>\n<p>\n  The code below creates a controller and passes its signal to the task.\n  The task is then immediately aborted.\n  This causes the promise to be rejected with an <code>AbortError</code>, which is caught in the <code>catch</code> block and logged.\n  Note that we could also have listened for the <a href=\"/en-US/docs/Web/API/AbortSignal/abort_event\"><code>abort</code> event</a> fired on the <a href=\"/en-US/docs/Web/API/TaskSignal\"><code>TaskSignal</code></a> or <a href=\"/en-US/docs/Web/API/AbortSignal\"><code>AbortSignal</code></a> and logged the abort there.\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Declare a TaskController with default priority</span>\n<span class=\"token keyword\">const</span> abortTaskController <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TaskController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Post task passing the controller's signal</span>\nscheduler\n  <span class=\"token punctuation\">.</span><span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Task executing'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">signal</span><span class=\"token operator\">:</span> abortTaskController<span class=\"token punctuation\">.</span>signal <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">taskResult</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>taskResult<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//This won't run!</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Log the error</span>\n\n<span class=\"token comment\">// Abort the task</span>\nabortTaskController<span class=\"token punctuation\">.</span><span class=\"token function\">abort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"delaying_tasks","title":"Delaying tasks","isH3":true,"content":"<p>\n  Tasks can be delayed by specifying an integer number of milliseconds in the <code>options.delay</code> parameter to <code>postTask()</code>.\n  This effectively adds the task to the prioritized queue on a timeout, as might be created using <a href=\"/en-US/docs/Web/API/setTimeout\"><code>setTimeout()</code></a>.\n  The <code>delay</code> is the minimum amount of time before the task is added to the scheduler; it may be longer.\n</p>\n<p>The code below shows two tasks added (as arrow functions) with a delay.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Post task as arrow function with delay of 2 seconds</span>\nscheduler\n  <span class=\"token punctuation\">.</span><span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token string\">'Task delayed by 2000ms'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">delay</span><span class=\"token operator\">:</span> <span class=\"token number\">2000</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">taskResult</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>taskResult<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nscheduler\n  <span class=\"token punctuation\">.</span><span class=\"token function\">postTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token string\">'Next task should complete in about 2000ms'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">delay</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">taskResult</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>taskResult<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://wicg.github.io/scheduling-apis/#dom-scheduler-posttask","title":"Prioritized Task Scheduling"}],"query":"api.Scheduler.postTask"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.Scheduler.postTask"}}],"toc":[{"text":"Syntax","id":"syntax"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"}],"summary":"The postTask() method of the Scheduler interface is used for adding tasks to be scheduled according to their priority.","popularity":0,"modified":"2022-09-13T06:27:50.000Z","source":{"folder":"en-us/web/api/scheduler/posttask","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/scheduler/posttask/index.md","last_commit_url":"https://github.com/mdn/content/commit/16e398809d62247dbadc89ff4024a0ffa4781f0e","filename":"index.md"},"short_title":"Scheduler.postTask()","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/Scheduler","title":"Scheduler"},{"uri":"/en-US/docs/Web/API/Scheduler/postTask","title":"Scheduler.postTask()"}],"pageTitle":"Scheduler.postTask() - Web APIs | MDN","noIndexing":false}}</script>
<!-- Mirrored from developer.mozilla.org/en-US/docs/Web/API/Scheduler/postTask by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Feb 2023 04:48:17 GMT -->
</body></html>