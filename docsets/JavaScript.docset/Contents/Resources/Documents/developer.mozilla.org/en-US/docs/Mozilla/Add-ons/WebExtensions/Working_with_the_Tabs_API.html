<html><!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Feb 2023 05:22:11 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="../../../../../favicon-48x48.cbbd161b.png"><link rel="apple-touch-icon" href="../../../../../apple-touch-icon.6803c6f0.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="../../../../../manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/opensearch.xml" title="MDN Web Docs"><title>Working with the Tabs API</title><link rel="alternate" title="Travailler avec l'API Tabs" href="../../../../../fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API.html" hreflang="fr"><link rel="alternate" title="Tabs API を使う" href="../../../../../ja/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API.html" hreflang="ja"><link rel="alternate" title="Working with the Tabs API" href="../../../../../zh-CN/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API.html" hreflang="zh"><link rel="alternate" title="Working with the Tabs API" href="Working_with_the_Tabs_API.html" hreflang="en"><meta name="robots" content="index, follow"><meta name="description" content="Tabs let a user open several web pages in their browser window and then switch between those web pages. With the Tabs API, you can work with and manipulate these tabs to create utilities that provide users with new ways to work with tabs or to deliver the features of your extension."><meta property="og:url" content="Working_with_the_Tabs_API.html"><meta property="og:title" content="Working with the Tabs API - Mozilla | MDN"><meta property="og:locale" content="en-US"><meta property="og:description" content="Tabs let a user open several web pages in their browser window and then switch between those web pages. With the Tabs API, you can work with and manipulate these tabs to create utilities that provide users with new ways to work with tabs or to deliver the features of your extension."><meta property="og:image" content="../../../../../mdn-social-share.cd6c4a5a.png"><meta property="twitter:card" content="summary_large_image"><link rel="canonical" href="Working_with_the_Tabs_API.html"><style media="print">.article-actions-container,.document-toc-container,.language-menu,.main-menu-toggle,.mdn-cta-container,.on-github,.page-footer,.sidebar,.top-navigation-main,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><script src="../../../../../static/js/ga.js" defer=""></script><script defer="defer" src="../../../../../static/js/main.5c9d40d0.js"></script><link href="../../../../../static/css/main.7d378400.css" rel="stylesheet"></head><body><script>document.body.addEventListener("load",(t=>{t.target.classList.contains("interactive")&&t.target.setAttribute("data-readystate","complete")}),{capture:!0});const c={light:"#ffffff",dark:"#1b1b1b"};if(window&&document.documentElement)try{const t=window.localStorage.getItem("theme");t&&(document.documentElement.className=t,document.documentElement.style.backgroundColor=c[t])}catch(t){console.warn("Unable to read theme from localStorage",t)}</script><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#top-nav-search-input">Skip to search</a></li><li><a id="skip-select-language" href="#languages-switcher-button">Skip to select language</a></li></ul><div class="page-wrapper   document-page"><div class="main-document-header-container"><header class="main-document-header-container top-navigation 
      
      "><div class="container "><div class="top-navigation-wrap"><a href="https://developer.mozilla.org/en-US/" class="logo" aria-label="MDN homepage"><svg id="mdn-docs-logo" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 694.9 104.4" style="enable-background:new 0 0 694.9 104.4" xml:space="preserve" role="img"><title>MDN Web Docs</title><style>.logo-m{fill:var(--text-link)}</style><g class="logo-m"><path d="M40.3 0 11.7 92.1H0L28.5 0h11.8zM50.7 0v92.1H40.3V0h10.4zM91 0 62.5 92.1H50.8L79.3 0H91zM101.4 0v92.1H91V0h10.4z"></path></g><path class="logo-m" d="M627.9 95.6h67v8.8h-67v-8.8z"></path><g style="fill:var(--text-primary)"><path d="M367 42h-4l-10.7 30.8h-5.5l-10.8-26h-.4l-10.5 26h-5.2L308.7 42h-3.8v-5.6H323V42h-6.5l6.8 20.4h.4l10.3-26h4.7l11.2 26h.5l5.7-20.3h-6.2v-5.6H367V42zM401.9 62c-.4 3.2-2 5.9-4.7 8.2-2.8 2.3-6.5 3.4-11.3 3.4-5.4 0-9.7-1.6-13.1-4.7-3.3-3.2-5-7.7-5-13.7 0-5.7 1.6-10.3 4.7-14s7.4-5.5 12.9-5.5c5.1 0 9.1 1.6 11.9 4.7s4.3 6.9 4.3 11.3c0 1.5-.2 3-.5 4.7h-25.6c.3 7.7 4 11.6 10.9 11.6 2.9 0 5.1-.7 6.5-2 1.5-1.4 2.5-3 3-4.9l6 .9zM394 51.3c.2-2.4-.4-4.7-1.8-6.9s-3.8-3.3-7-3.3c-3.1 0-5.3 1-6.9 3-1.5 2-2.5 4.4-2.8 7.2H394zM445 53.7c0 5-1.3 9.5-4 13.7s-6.9 6.2-12.7 6.2c-6 0-10.3-2.2-12.7-6.7-.1.4-.2 1.4-.4 2.9s-.3 2.5-.4 2.9h-7.3c.3-1.7.6-3.5.8-5.3.3-1.8.4-3.7.4-5.5V22.3h-6v-5.6H416v27c1.1-2.2 2.7-4.1 4.7-5.7 2-1.6 4.8-2.4 8.4-2.4 4.6 0 8.4 1.6 11.4 4.7 3 3.2 4.5 7.6 4.5 13.4zm-7.7.6c0-4.2-1-7.4-3-9.5-2-2.2-4.4-3.3-7.4-3.3-3.4 0-6 1.2-8 3.7-1.9 2.4-2.9 5-3 7.7V57c0 3 1 5.6 3 7.7s4.5 3.1 7.6 3.1c3.6 0 6.3-1.3 8.1-3.9 1.8-2.7 2.7-5.9 2.7-9.6zM506.5 72.8h-13.2v-7.2c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2 5.7 0 9.8 2.2 12.3 6.5V22.3h-8.6v-5.6h15.8v50.6h6v5.5zM493.2 56v-4.4c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zM546.3 54.6c0 5.6-1.8 10.2-5.3 13.7s-8.2 5.3-13.9 5.3-10.1-1.7-13.4-5.1c-3.3-3.4-5-7.9-5-13.5 0-5.3 1.6-9.9 4.7-13.7 3.2-3.8 7.9-5.7 14.2-5.7s11 1.9 14.1 5.7c3 3.7 4.6 8.1 4.6 13.3zm-7.7-.2c0-4-1-7.2-3-9.5s-4.8-3.5-8.2-3.5c-3.6 0-6.4 1.2-8.3 3.7s-2.9 5.6-2.9 9.5c0 3.7.9 6.8 2.8 9.4 1.9 2.6 4.6 3.9 8.3 3.9 3.6 0 6.4-1.3 8.4-3.8 1.9-2.6 2.9-5.8 2.9-9.7zM583.6 60.2c-.4 3.2-1.9 6.3-4.4 9.1-2.5 2.9-6.4 4.3-11.8 4.3-5.2 0-9.4-1.6-12.6-4.8-3.2-3.2-4.8-7.7-4.8-13.7 0-5.5 1.6-10.1 4.7-13.9 3.2-3.8 7.6-5.7 13.2-5.7 2.3 0 4.6.3 6.7.8 2.2.5 4.2 1.5 6.2 2.9l1.5 9.5-5.9.7-1.3-6.1c-2.1-1.2-4.5-1.8-7.2-1.8-3.5 0-6.1 1.2-7.7 3.7-1.7 2.5-2.5 5.7-2.5 9.6 0 4.1.9 7.3 2.7 9.5 1.8 2.3 4.4 3.4 7.8 3.4 5.2 0 8.2-2.9 9.2-8.8l6.2 1.3zM618.3 62.1c0 3.6-1.5 6.5-4.6 8.5s-7 3-11.7 3c-5.7 0-10.6-1.2-14.6-3.6l1.2-8.8 5.7.6-.2 4.7c1.1.5 2.3.9 3.6 1.1s2.6.3 3.9.3c2.4 0 4.5-.4 6.5-1.3 1.9-.9 2.9-2.2 2.9-4.1 0-1.8-.8-3.1-2.3-3.8s-3.5-1.3-5.8-1.7-4.6-.9-6.9-1.4c-2.3-.6-4.2-1.6-5.7-2.9-1.6-1.4-2.3-3.5-2.3-6.3 0-4.1 1.5-6.9 4.6-8.5s6.4-2.4 9.9-2.4c2.6 0 5 .3 7.2.9 2.2.6 4.3 1.4 6.1 2.4l.8 8.8-5.8.7-.8-5.7c-2.3-1-4.7-1.6-7.2-1.6-2.1 0-3.7.4-5.1 1.1-1.3.8-2 2-2 3.8 0 1.7.8 2.9 2.3 3.6 1.5.7 3.4 1.2 5.7 1.6 2.2.4 4.5.8 6.7 1.4 2.2.6 4.1 1.6 5.7 3 1.4 1.6 2.2 3.7 2.2 6.6zM197.6 73.2h-17.1v-5.5h3.8V51.9c0-3.7-.7-6.3-2.1-7.9-1.4-1.6-3.3-2.3-5.7-2.3-3.2 0-5.6 1.1-7.2 3.4s-2.4 4.6-2.5 6.9v15.6h6v5.5h-17.1v-5.5h3.8V51.9c0-3.8-.7-6.4-2.1-7.9-1.4-1.5-3.3-2.3-5.6-2.3-3.2 0-5.5 1.1-7.2 3.3-1.6 2.2-2.4 4.5-2.5 6.9v15.8h6.9v5.5h-20.2v-5.5h6V42.4h-6.1v-5.6h13.4v6.4c1.2-2.1 2.7-3.8 4.7-5.2 2-1.3 4.4-2 7.3-2s5.3.7 7.5 2.1c2.2 1.4 3.7 3.5 4.5 6.4 1.1-2.5 2.7-4.5 4.9-6.1s4.8-2.4 7.9-2.4c3.5 0 6.5 1.1 8.9 3.3s3.7 5.6 3.7 10.2v18.2h6.1v5.5zm42.5 0h-13.2V66c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2s9.8 2.2 12.3 6.5V22.7h-8.6v-5.6h15.8v50.6h6v5.5zm-13.3-16.8V52c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zm61.5 16.8H269v-5.5h6V51.9c0-3.7-.7-6.3-2.2-7.9-1.4-1.6-3.4-2.3-5.7-2.3-3.1 0-5.6 1-7.4 3s-2.8 4.4-2.9 7v15.9h6v5.5h-19.3v-5.5h6V42.4h-6.2v-5.6h13.6V43c2.6-4.6 6.8-6.9 12.7-6.9 3.6 0 6.7 1.1 9.2 3.3s3.7 5.6 3.7 10.2v18.2h6v5.4h-.2z"></path></g></svg></a><button title="Open main menu" type="button" class="button action has-icon main-menu-toggle" aria-haspopup="menu" aria-label="Open main menu" aria-expanded="false"><span class="button-wrap"><span class="icon icon-menu "></span><span class="visually-hidden">Open main menu</span></span></button></div><div class="top-navigation-main"><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button type="button" id="references-button" class="top-level-entry menu-toggle" aria-controls="references-menu" aria-expanded="false">References</button><a href="https://developer.mozilla.org/en-US/docs/Web" class="top-level-entry">References</a><ul id="references-menu" class="submenu references hidden inline-submenu-lg" aria-labelledby="references-button"><li class="apis-link-container mobile-only "><a href="https://developer.mozilla.org/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li><li class="html-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Structure of content on the web</p></div></a></li><li class="css-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Code used to describe document style</p></div></a></li><li class="javascript-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">General-purpose scripting language</p></div></a></li><li class="http-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP" class="submenu-item "><div class="submenu-icon http"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTTP</div><p class="submenu-item-description">Protocol for transmitting web resources</p></div></a></li><li class="apis-link-container "><a href="../../../Web/API.html" class="submenu-item "><div class="submenu-icon apis"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web APIs</div><p class="submenu-item-description">Interfaces for building web applications</p></div></a></li><li class="apis-link-container "><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Extensions</div><p class="submenu-item-description">Developing extensions for web browsers</p></div></a></li><li class="apis-link-container desktop-only "><a href="https://developer.mozilla.org/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li></ul></li><li class="top-level-entry-container"><button type="button" id="guides-button" class="top-level-entry menu-toggle" aria-controls="guides-menu" aria-expanded="false">Guides</button><a href="https://developer.mozilla.org/en-US/docs/Learn" class="top-level-entry">Guides</a><ul id="guides-menu" class="submenu guides hidden inline-submenu-lg" aria-labelledby="guides-button"><li class="apis-link-container mobile-only "><a href="https://developer.mozilla.org/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="apis-link-container desktop-only "><a href="https://developer.mozilla.org/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="html-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Learn to structure web content with HTML</p></div></a></li><li class="css-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Learn to style content using CSS</p></div></a></li><li class="javascript-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">Learn to run scripts in the browser</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Accessibility</div><p class="submenu-item-description">Learn to make the web accessible to all</p></div></a></li></ul></li><li class="top-level-entry-container"><button type="button" id="mdn-plus-button" class="top-level-entry menu-toggle" aria-controls="mdn-plus-menu" aria-expanded="false">MDN Plus</button><a href="https://developer.mozilla.org/en-US/plus" class="top-level-entry">MDN Plus</a><ul id="mdn-plus-menu" class="submenu mdn-plus hidden inline-submenu-lg" aria-labelledby="mdn-plus-button"><li class=" "><a href="https://developer.mozilla.org/en-US/plus" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview</div><p class="submenu-item-description">A customized MDN experience</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/updates" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Updates</div><p class="submenu-item-description">All browser compatibility updates at a glance</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/docs/features/overview" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Documentation</div><p class="submenu-item-description">Learn how to use MDN Plus</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/docs/faq" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">FAQ</div><p class="submenu-item-description">Frequently asked questions about MDN Plus</p></div></a></li></ul></li></ul></nav><div class="header-search"><form action="https://developer.mozilla.org/en-US/search" role="search" aria-haspopup="listbox" aria-owns="top-nav-search-menu" aria-expanded="false" class="search-form search-widget" id="top-nav-search-form"><label id="top-nav-search-label" for="top-nav-search-input" class="visually-hidden">Search MDN</label><input id="top-nav-search-input" aria-autocomplete="list" aria-controls="top-nav-search-menu" aria-labelledby="top-nav-search-label" autocomplete="off" type="search" class="search-input-field" name="q" placeholder="   " required="" value=""><button type="button" class="button action has-icon clear-search-button"><span class="button-wrap"><span class="icon icon-cancel "></span><span class="visually-hidden">Clear search input</span></span></button><button type="submit" class="button action has-icon search-button"><span class="button-wrap"><span class="icon icon-search "></span><span class="visually-hidden">Search</span></span></button><div id="top-nav-search-menu" role="listbox" aria-labelledby="top-nav-search-label"></div></form></div><div class="theme-switcher-menu"><button type="button" class="button action has-icon theme-switcher-menu small" aria-haspopup="menu"><span class="button-wrap"><span class="icon icon-theme-os-default "></span>Theme</span></button></div><ul class="auth-container"><li><a href="https://developer.mozilla.org/users/fxa/login/authenticate/?next=%2Fen-US%2Fdocs%2FMozilla%2FAdd-ons%2FWebExtensions%2FWorking_with_the_Tabs_API" class="signin-link" rel="nofollow">Already a subscriber?</a></li><li><a class="button primary mdn-plus-subscribe-link" href="https://developer.mozilla.org/en-US/plus"><span class="button-wrap">Get MDN Plus</span></a></li></ul></div></div></header><div class="article-actions-container"><div class="container"><button type="button" class="button action has-icon sidebar-button" aria-label="Expand sidebar" aria-expanded="false" aria-controls="sidebar-quicklinks"><span class="button-wrap"><span class="icon icon-sidebar "></span></span></button><nav class="breadcrumbs-container" aria-label="Breadcrumb"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="https://developer.mozilla.org/en-US/docs/Mozilla"><span property="name">Mozilla</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons"><span property="name">Add-ons</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions"><span property="name">Browser Extensions</span></a><meta property="position" content="3"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="Working_with_the_Tabs_API.html"><span property="name">Working with the Tabs API</span></a><meta property="position" content="4"></li></ol></nav><div class="article-actions"><button type="button" class="button action has-icon article-actions-toggle" aria-label="Article actions"><span class="button-wrap"><span class="icon icon-ellipses "></span><span class="article-actions-dialog-heading">Article Actions</span></span></button><ul class="article-actions-entries"><li class="article-actions-entry"><div class="languages-switcher-menu open-on-focus-within"><button id="languages-switcher-button" type="button" class="button action small has-icon languages-switcher-menu" aria-haspopup="menu"><span class="button-wrap"><span class="icon icon-language "></span>English (US)</span></button></div></li></ul></div></div></div></div><div class="main-wrapper"><aside id="sidebar-quicklinks" class="sidebar"><button type="button" class="button action backdrop" aria-label="Collapse sidebar"><span class="button-wrap"></span></button><nav aria-label="Related Topics" class="sidebar-inner"><div class="in-nav-toc"><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#permissions_and_the_tabs_api">Permissions and the Tabs API</a></li><li class="document-toc-item "><a class="document-toc-link" href="#discovering_more_about_tabs_and_their_properties">Discovering more about tabs and their properties</a></li><li class="document-toc-item "><a class="document-toc-link" href="#creating_duplicating_moving_updating_reloading_and_removing_tabs">Creating, duplicating, moving, updating, reloading, and removing tabs</a></li><li class="document-toc-item "><a class="document-toc-link" href="#manipulating_a_tabs_zoom_level">Manipulating a tab's zoom level</a></li><li class="document-toc-item "><a class="document-toc-link" href="#manipulating_a_tabs_css">Manipulating a tab's CSS</a></li><li class="document-toc-item "><a class="document-toc-link" href="#some_other_interesting_abilities">Some other interesting abilities</a></li><li class="document-toc-item "><a class="document-toc-link" href="#learn_more">Learn more</a></li></ul></section></div></div><div>
  <ol>
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions"><strong>Browser extensions</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Getting started</summary>
        <ol>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions">What are extensions?</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension">Your first extension</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension">Your second extension</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension">Anatomy of an extension</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Examples">Example extensions</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/What_next_">What next?</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Concepts</summary>
        <ol>
          <li><a href="API.html">Using the JavaScript APIs</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">Content scripts</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Background_scripts">Background scripts</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">Match patterns</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_files">Working with files</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Internationalization">Internationalization</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy">Content Security Policy</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Native_messaging">Native messaging</a></li>
          <li><a href="Differences_between_API_implementations.html">Differences between API implementations</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities">Chrome incompatibilities</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>User interface</summary>
        <ol>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface">User Interface</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action">Toolbar button</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions">Address bar button</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars">Sidebars</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items">Context menu items</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages">Options page</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages">Extension pages</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications">Notifications</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox">Address bar suggestions</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels">Developer tools panels</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details open="">
        <summary>How to</summary>
        <ol>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests">Intercept HTTP requests</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page">Modify a web page</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page">Insert external content</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts">Share objects with page scripts</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar">Add a button to the toolbar</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page">Implement a settings page</a></li>
          <li><em><a href="Working_with_the_Tabs_API.html" aria-current="page">Work with the Tabs API</a></em></li>
          <li><a href="Work_with_the_Bookmarks_API.html">Work with the Bookmarks API</a></li>
          <li><a href="Work_with_the_Cookies_API.html">Work with the Cookies API</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities">Work with contextual identities</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard">Interact with the clipboard</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Extending_the_developer_tools">Extending the developer tools</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension">Build a cross-browser extension</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators">Firefox differentiators</a></summary>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>JavaScript APIs</summary>
        <ol><li><a href="Browser_support_for_JavaScript_APIs.html">Browser support for JavaScript APIs</a></li><li><a href="API/action.html">action</a></li><li><a href="API/alarms.html">alarms</a></li><li><a href="API/bookmarks.html">bookmarks</a></li><li><a href="API/browserAction.html">browserAction</a></li><li><a href="API/browserSettings.html">browserSettings</a></li><li><a href="API/browsingData.html">browsingData</a></li><li><a href="API/captivePortal.html">captivePortal</a></li><li><a href="API/clipboard.html">clipboard</a></li><li><a href="API/commands.html">commands</a></li><li><a href="API/contentScripts.html">contentScripts</a></li><li><a href="API/contextualIdentities.html">contextualIdentities</a></li><li><a href="API/cookies.html">cookies</a></li><li><a href="API/devtools.html">devtools</a></li><li><a href="API/dns.html">dns</a></li><li><a href="API/dom.html">dom</a></li><li><a href="API/downloads.html">downloads</a></li><li><a href="API/events.html">events</a></li><li><a href="API/extension.html">extension</a></li><li><a href="API/extensionTypes.html">extensionTypes</a></li><li><a href="API/find.html">find</a></li><li><a href="API/history.html">history</a></li><li><a href="API/i18n.html">i18n</a></li><li><a href="API/identity.html">identity</a></li><li><a href="API/idle.html">idle</a></li><li><a href="API/management.html">management</a></li><li><a href="API/menus.html">menus</a></li><li><a href="API/notifications.html">notifications</a></li><li><a href="API/omnibox.html">omnibox</a></li><li><a href="API/pageAction.html">pageAction</a></li><li><a href="API/permissions.html">permissions</a></li><li><a href="API/pkcs11.html">pkcs11</a></li><li><a href="API/privacy.html">privacy</a></li><li><a href="API/proxy.html">proxy</a></li><li><a href="API/runtime.html">runtime</a></li><li><a href="API/scripting.html">scripting</a></li><li><a href="API/search.html">search</a></li><li><a href="API/sessions.html">sessions</a></li><li><a href="API/sidebarAction.html">sidebarAction</a></li><li><a href="API/storage.html">storage</a></li><li><a href="API/tabs.html">tabs</a></li><li><a href="API/theme.html">theme</a></li><li><a href="API/topSites.html">topSites</a></li><li><a href="API/types.html">types</a></li><li><a href="API/userScripts.html">userScripts</a></li><li><a href="API/webNavigation.html">webNavigation</a></li><li><a href="API/webRequest.html">webRequest</a></li><li><a href="API/windows.html">windows</a></li></ol>
      </details>
    </li>
    <li class="toggle">
      <details>
      <summary>Manifest keys</summary>
        <ol>
          <li><a href="manifest.html">Introduction</a></li>
        </ol>
      <ol><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/action">action</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author">author</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background">background</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action">browser_action</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings">browser_specific_settings</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides">chrome_settings_overrides</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides">chrome_url_overrides</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands">commands</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts">content_scripts</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy">content_security_policy</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale">default_locale</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description">description</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer">developer</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page">devtools_page</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/dictionaries">dictionaries</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/externally_connectable">externally_connectable</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url">homepage_url</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/host_permissions">host_permissions</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons">icons</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito">incognito</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version">manifest_version</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name">name</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/offline_enabled">offline_enabled</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox">omnibox</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions">optional_permissions</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_page">options_page</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui">options_ui</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action">page_action</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">permissions</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers">protocol_handlers</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name">short_name</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action">sidebar_action</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/storage">storage</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme">theme</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme_experiment">theme_experiment</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/user_scripts">user_scripts</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version">version</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name">version_name</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources">web_accessible_resources</a></li></ol>
      </details>
    </li>
     <li class="toggle">
      <details>
        <summary>Extension Workshop</summary>
        <ol>
          <li><a href="https://extensionworkshop.com/documentation/develop/">Develop</a></li>
          <li><a href="https://extensionworkshop.com/documentation/publish/">Publish</a></li>
          <li><a href="https://extensionworkshop.com/documentation/manage/">Manage</a></li>
          <li><a href="https://extensionworkshop.com/documentation/enterprise/">Enterprise</a></li>
        </ol>
      </details>
    </li>
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Contact_us"><strong>Contact us</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Channels</summary>
        <ol>
          <li><a href="https://blog.mozilla.org/addons">Add-ons blog</a></li>
          <li><a href="https://discourse.mozilla.org/c/add-ons">Add-ons forum</a></li>
          <li><a href="https://chat.mozilla.org/#/room/%23addons:mozilla.org">Add-ons chat</a></li>
        </ol>
      </details>
    </li>
  </ol>
</div></nav></aside><aside class="toc"><nav><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#permissions_and_the_tabs_api">Permissions and the Tabs API</a></li><li class="document-toc-item "><a class="document-toc-link" href="#discovering_more_about_tabs_and_their_properties">Discovering more about tabs and their properties</a></li><li class="document-toc-item "><a class="document-toc-link" href="#creating_duplicating_moving_updating_reloading_and_removing_tabs">Creating, duplicating, moving, updating, reloading, and removing tabs</a></li><li class="document-toc-item "><a class="document-toc-link" href="#manipulating_a_tabs_zoom_level">Manipulating a tab's zoom level</a></li><li class="document-toc-item "><a class="document-toc-link" href="#manipulating_a_tabs_css">Manipulating a tab's CSS</a></li><li class="document-toc-item "><a class="document-toc-link" href="#some_other_interesting_abilities">Some other interesting abilities</a></li><li class="document-toc-item "><a class="document-toc-link" href="#learn_more">Learn more</a></li></ul></section></div></nav></aside><main id="content" class="main-content  "><article class="main-page-content" lang="en-US"><h1>Working with the Tabs API</h1><div class="section-content"><p>Tabs let a user open several web pages in their browser window and then switch between those web pages. With the Tabs API, you can work with and manipulate these tabs to create utilities that provide users with new ways to work with tabs or to deliver the features of your extension.</p>
<p>In this how-to article we'll look at:</p>
<ul>
  <li>Permissions needed to use the Tabs API.</li>
  <li>Discovering more about tabs and their properties using <a href="API/tabs/query.html"><code>tabs.query</code></a>.</li>
  <li>Creating, duplicating, moving, updating, reloading, and removing tabs.</li>
  <li>Manipulating a tab's zoom level.</li>
  <li>Manipulating a tab's CSS.</li>
</ul>
<p>We then conclude by looking at some other, miscellaneous features offered by the API.</p>
<div class="notecard note" id="sect1">
  <p><strong>Note:</strong> There are some Tab API features covered elsewhere. These are the methods you can use to manipulate tab content with scripts (<a href="API/tabs/connect.html"><code>tabs.connect</code></a>, <a href="API/tabs/sendMessage.html"><code>tabs.sendMessage</code></a>, and <a href="API/tabs/executeScript.html"><code>tabs.executeScript</code></a>). If you want more information on these methods, see the Concepts article <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">Content scripts</a> and the how-to guide <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page">Modify a web page</a>.</p>
</div></div><section aria-labelledby="permissions_and_the_tabs_api"><a class="dashAnchor" name="//apple_ref/Section/Permissions%20and%20the%20Tabs%20API"></a><h2 id="permissions_and_the_tabs_api"><a href="#permissions_and_the_tabs_api">Permissions and the Tabs API</a></h2><div class="section-content"><p>For the majority of the Tabs API functions you don't need any permissions; however, there are some exceptions:</p>
<ul>
  <li><code>"tabs"</code> permission is needed to access the <code>Tab.url</code>, <code>Tab.title</code>, and <code>Tab.favIconUrl</code> properties of the Tab object. In Firefox, you also need <code>"tabs"</code> to perform a <a href="API/tabs/query.html">query</a> by URL.</li>
  <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#host_permissions">Host permission</a> is needed for <a href="API/tabs/executeScript.html"><code>tabs.executeScript()</code></a> or <a href="API/tabs/insertCSS.html"><code>tabs.insertCSS()</code></a>.</li>
</ul>
<p>The following is how you might request <code>"tabs"</code> permission in your extension's manifest.json file:</p>
<div class="code-example"><pre class="brush: json notranslate"><code><span class="token property">"permissions"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">"&lt;all_urls&gt;"</span><span class="token punctuation">,</span>
  <span class="token string">"tabs"</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div>
<p>This request gives you use of all Tabs API feature on all website your user visits. There is also an alternative approach for requesting permissions to use <a href="API/tabs/executeScript.html"><code>tabs.executeScript()</code></a> or <a href="API/tabs/insertCSS.html"><code>tabs.insertCSS()</code></a> where you don't need host permission, in the form of <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#activetab_permission"><code>"activeTab"</code></a>. This permission provides the same rights as <code>"tabs"</code> with <code>&lt;all_urls&gt;</code>, but with two restrictions:</p>
<ul>
  <li>the user must interact with the extension through its browser or page action, context menu, or shortcut key.</li>
  <li>it only grants permission within the active tab.</li>
</ul>
<p>The benefit of this approach is the user won't get a permissions warning saying your extension can "Access your data for all websites". This is because <code>&lt;all_urls&gt;</code> permission gives an extension the ability to execute scripts in any tab, any time it likes, whereas <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#activetab_permission"><code>"activeTab"</code></a> is limited to allowing the extension to perform a user requested action in the current tab.</p></div></section><section aria-labelledby="discovering_more_about_tabs_and_their_properties"><a class="dashAnchor" name="//apple_ref/Section/Discovering%20more%20about%20tabs%20and%20their%20properties"></a><h2 id="discovering_more_about_tabs_and_their_properties"><a href="#discovering_more_about_tabs_and_their_properties">Discovering more about tabs and their properties</a></h2><div class="section-content"><p>There will be occasions when you want to get a list of all the tabs in all the browser windows. Other times you might want to find a subset of tabs that match some specific criteria, such as those opened from a specific tab or displaying pages from a particular domain. And once you have your list of tabs, you'll probably want to know more about their properties.</p>
<p>This is where <a href="API/tabs/query.html"><code>tabs.query()</code></a> comes in. Used alone to get all tabs or taking the <code>queryInfo</code> object—to specify query criteria such as whether the tab is active, in the current window, or one or more of 17 criteria—<a href="API/tabs/query.html"><code>tabs.query()</code></a> returns an array of <a href="API/tabs/Tab.html"><code>tabs.Tab</code></a> objects containing information about the tabs.</p>
<p>Where you want information about the current tab only, you can get a <a href="API/tabs/Tab.html"><code>tabs.Tab</code></a> object for that tab using <a href="API/tabs/getCurrent.html"><code>tabs.getCurrent()</code></a>. If you have a tab's ID, you can get its <a href="API/tabs/Tab.html"><code>tabs.Tab</code></a> object using <a href="API/tabs/get.html"><code>tabs.get()</code></a>.</p></div></section><section aria-labelledby="how_to_example"><h3 id="how_to_example"><a href="#how_to_example">How to example</a></h3><div class="section-content"><p>To see how <a href="API/tabs/query.html"><code>tabs.query()</code></a> and <a href="API/tabs/Tab.html"><code>tabs.Tab</code></a> are used, let's walk through how the <a href="https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs" class="external" target="_blank">tabs-tabs-tabs</a> example adds the list of "switch to tabs" to its toolbar button popup.</p>
<p>
  <img src="Working_with_the_Tabs_API/switch_to_tab.png" alt="The tabs toolbar menu showing the switch to tap area" width="369" height="645" loading="lazy">
</p>
<dl>
  <dt id="manifest.json">manifest.json</dt>
  <dd>
    <p>Here is the <a href="https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/manifest.json" class="external" target="_blank"><code>manifest.json</code></a>:</p>
    <div class="code-example"><pre class="brush: json notranslate"><code><span class="token punctuation">{</span>
  <span class="token property">"browser_action"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"browser_style"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"default_title"</span><span class="token operator">:</span> <span class="token string">"Tabs, tabs, tabs"</span><span class="token punctuation">,</span>
    <span class="token property">"default_popup"</span><span class="token operator">:</span> <span class="token string">"tabs.html"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"A list of methods you can perform on a tab."</span><span class="token punctuation">,</span>
  <span class="token property">"homepage_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs"</span><span class="token punctuation">,</span>
  <span class="token property">"manifest_version"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Tabs, tabs, tabs"</span><span class="token punctuation">,</span>
  <span class="token property">"permissions"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"tabs"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0"</span>
<span class="token punctuation">}</span>
</code></pre></div>
    <div class="notecard note" id="sect2">
      <p><strong>Note:</strong></p>
      <ul>
        <li><strong><code>tabs.html</code> is defined as the <code>default_popup</code> in <code>browser_action</code>.</strong> It is displayed whenever the user clicks the extension's toolbar icon.</li>
        <li><strong>Permissions includes tabs.</strong> This is needed to support the tab list feature, as the extension reads the title of the tabs for display in the popup.</li>
      </ul>
    </div>
  </dd>
  <dt id="tabs.html">tabs.html</dt>
  <dd>
    <p><code>tabs.html</code> defines the content of the extension's popup:</p>
    <div class="code-example"><pre class="brush: html notranslate"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tabs.css<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>panel<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>panel-section panel-section-header<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-section-header<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Tabs-tabs-tabs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tabs-move-beginning<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        Move active tab to the beginning of the window
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>

      <span class="token comment">&lt;!-- Define the other menu items --&gt;</span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch-tabs<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Switch to tab<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tabs-list<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tabs.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
    <p>This does the following:</p>
    <ol>
      <li>The menu items are declared.</li>
      <li>An empty <code>div</code> with the ID <code>tabs-list</code> is declared to contain the list of tabs.</li>
      <li><code>tabs.js</code> is called.</li>
    </ol>
  </dd>
  <dt id="tabs.js">tabs.js</dt>
  <dd>
    <p>In <a href="https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.js" class="external" target="_blank"><code>tabs.js</code></a>, we'll see how the list of tabs is built and added to the popup.</p>
  </dd>
</dl>
<h4 id="creating_the_popup">Creating the popup</h4>
<p>First, an event handler is added to execute <code>listTabs()</code> when <code>tabs.html</code> is loaded:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"DOMContentLoaded"</span><span class="token punctuation">,</span> listTabs<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>The first thing that <code>listTabs()</code> does is to call <code>getCurrentWindowTabs()</code>. This is where <a href="API/tabs/query.html"><code>tabs.query()</code></a> is used to get a <a href="API/tabs/Tab.html"><code>tabs.Tab</code></a> object for the tabs in the current window:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">getCurrentWindowTabs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">currentWindow</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Now, <code>listTabs()</code> is ready to create the content for the popup.</p>
<p>To start with:</p>
<ol>
  <li>Grab the <code>&lt;div id="tabs-list"&gt;</code> element.</li>
  <li>Create a document fragment (into which the list will be built).</li>
  <li>Set counters.</li>
  <li>Clear the content of the <code>&lt;div id="tabs-list"&gt;</code> element.</li>
</ol>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">listTabs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token function">getCurrentWindowTabs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tabs</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> tabsList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tabs-list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> currentTabs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> limit <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    tabsList<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Next, we'll create the links for each tab:</p>
<ol>
  <li>Loops through the first 5 items from the <a href="API/tabs/Tab.html"><code>tabs.Tab</code></a> object.</li>
  <li>For each item, add a hyperlink to the document fragment.
    <ul>
      <li>The link's label—that is, its text—is set using the tab's <code>title</code> (or the <code>id</code>, if it has no <code>title</code>).</li>
      <li>The link's address is set using the tab's <code>id</code>.</li>
    </ul>
  </li>
</ol>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> tab <span class="token keyword">of</span> tabs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tab<span class="token punctuation">.</span>active <span class="token operator">&amp;&amp;</span> counter <span class="token operator">&lt;=</span> limit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> tabLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    tabLink<span class="token punctuation">.</span>textContent <span class="token operator">=</span> tab<span class="token punctuation">.</span>title <span class="token operator">||</span> tab<span class="token punctuation">.</span>id<span class="token punctuation">;</span>

    tabLink<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">,</span> tab<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tabLink<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"switch-tabs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    currentTabs<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>tabLink<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  counter <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Finally, the document fragment is written to the <code>&lt;div id="tabs-list"&gt;</code> element:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>    tabsList<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>currentTabs<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h4 id="working_with_the_active_tab">Working with the active tab</h4>
<p>Another related example feature is the "Alert active tab" info option that dumps all the <a href="API/tabs/Tab.html"><code>tabs.Tab</code></a> object properties for the active tab into an alert:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token string">"tabs-alertinfo"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">callOnActiveTab</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tab</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">in</span> tab<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      props <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> item <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> tab<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> \n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Where <code>callOnActiveTab()</code> finds the active tab object by looping through the <a href="API/tabs/Tab.html"><code>tabs.Tab</code></a> objects looking for the item with active set:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">callOnActiveTab</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">getCurrentWindowTabs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tabs</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> tab <span class="token keyword">of</span> tabs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>tab<span class="token punctuation">.</span>active<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">callback</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> tabs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div></section><section aria-labelledby="creating_duplicating_moving_updating_reloading_and_removing_tabs"><a class="dashAnchor" name="//apple_ref/Section/Creating%2C%20duplicating%2C%20moving%2C%20updating%2C%20reloading%2C%20and%20removing%20tabs"></a><h2 id="creating_duplicating_moving_updating_reloading_and_removing_tabs"><a href="#creating_duplicating_moving_updating_reloading_and_removing_tabs">Creating, duplicating, moving, updating, reloading, and removing tabs</a></h2><div class="section-content"><p>Having gathered information about the tabs you'll most likely want to do something with them—either to offer users features for manipulating and managing tabs or to implement functionality in your extension.</p>
<p>The following functions are available:</p>
<ul>
  <li>create a new tab (<a href="API/tabs/create.html"><code>tabs.create()</code></a>).</li>
  <li>duplicate a tab (<a href="API/tabs/duplicate.html"><code>tabs.duplicate()</code></a>).</li>
  <li>remove a tab (<a href="API/tabs/remove.html"><code>tabs.remove()</code></a>).</li>
  <li>move a tab (<a href="API/tabs/move.html"><code>tabs.move()</code></a>).</li>
  <li>update the tab's URL—effectively browse to a new page—(<a href="API/tabs/update.html"><code>tabs.update()</code></a>).</li>
  <li>reload the tab's page (<a href="API/tabs/reload.html"><code>tabs.reload()</code></a>).</li>
</ul>
<div class="notecard note" id="sect3">
  <p><strong>Note:</strong> These functions all require the ID (or IDs) of the tab they are manipulating:</p>
  <ul>
    <li><a href="API/tabs/duplicate.html"><code>tabs.duplicate()</code></a></li>
    <li><a href="API/tabs/remove.html"><code>tabs.remove()</code></a></li>
    <li><a href="API/tabs/move.html"><code>tabs.move()</code></a></li>
  </ul>
  <p>Whereas the following functions will act on the active tab (if no tab <code>id</code> is provided):</p>
  <ul>
    <li><a href="API/tabs/update.html"><code>tabs.update()</code></a></li>
    <li><a href="API/tabs/reload.html"><code>tabs.reload()</code></a></li>
  </ul>
</div></div></section><section aria-labelledby="how_to_example_2"><h3 id="how_to_example_2"><a href="#how_to_example_2">How to example</a></h3><div class="section-content"><p>The <a href="https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs" class="external" target="_blank">tabs-tabs-tabs</a> example exercises all of these features except for updating a tab's URL The way in which these APIs are used is similar, so we'll look at one of the more involved implementations, that of the "Move active tab to the beginning of the window list" option.</p>
<p>But first, here is a demonstration of the feature in action:</p><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/-lJRzTIvhxo" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" loading="lazy"></iframe>
<dl>
  <dt id="manifest.json_2">manifest.json</dt>
  <dd>
    <p>None of the functions require a permission to operate, so there are no features in the <a href="https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/manifest.json" class="external" target="_blank">manifest.json</a> file that need to be highlighted.</p>
  </dd>
  <dt id="tabs.html_2">tabs.html</dt>
  <dd>
    <p><a href="https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.html" class="external" target="_blank"><code>tabs.html</code></a> defines the "menu" displayed in the popup, which includes the "Move active tab to the beginning of the window list" option, with a series of <code>&lt;a&gt;</code> tags grouped by a visual separator. Each menu item is given an <code>id</code>, which is used in <code>tabs.js</code> to determine which menu item is being requested.</p>
    <div class="code-example"><pre class="brush: html notranslate"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tabs-move-beginning<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  Move active tab to the beginning of the window
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tabs-move-end<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Move active tab to the end of the window<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>panel-section-separator<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tabs-duplicate<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Duplicate active tab<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tabs-reload<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Reload active tab<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tabs-alertinfo<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Alert active tab info<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div>
  </dd>
  <dt id="tabs.js_2">tabs.js</dt>
  <dd>
    <p>To implement the "menu" defined in <code>tabs.html</code>, <a href="https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.js" class="external" target="_blank"><code>tabs.js</code></a> includes a listener for clicks in <code>tabs.html</code>:</p>
    <div class="code-example"><pre class="brush: js notranslate"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">callOnActiveTab</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">getCurrentWindowTabs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tabs</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> tab <span class="token keyword">of</span> tabs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>tab<span class="token punctuation">.</span>active<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">callback</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> tabs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
    <p>A series of <code>if</code> statements then look to match the <code>id</code> of the item clicked.</p>
    <p>This code snippet is for the "Move active tab to the beginning of the window list" option:</p>
    <div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token string">"tabs-move-beginning"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">callOnActiveTab</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tab<span class="token punctuation">,</span> tabs</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tab<span class="token punctuation">.</span>pinned<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      index <span class="token operator">=</span> <span class="token function">firstUnpinnedTab</span><span class="token punctuation">(</span>tabs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">moving </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tab<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">[</span>tab<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> index <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
    <p>It's worth noting the use of <code>console.log()</code>. This enables you to output information to the <a href="https://extensionworkshop.com/documentation/develop/debugging/" class="external" target="_blank">debugger</a> console, which can be useful when resolving issues found during development.</p>
    <p>
      <img src="Working_with_the_Tabs_API/console.png" alt="Example of the console.log output, from the move tabs feature, in the debugging console" width="911" height="329" loading="lazy">
    </p>
    <p>The move code first calls <code>callOnActiveTab()</code> which in turn calls <code>getCurrentWindowTabs()</code> to get a <a href="API/tabs/Tab.html"><code>tabs.Tab</code></a> object containing the active window's tabs. It then loops through the object to find and return the active tab object:</p>
    <div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">callOnActiveTab</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">getCurrentWindowTabs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tabs</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> tab <span class="token keyword">of</span> tabs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>tab<span class="token punctuation">.</span>active<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> tabs<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
  </dd>
</dl>
<h4 id="pinned_tabs">Pinned tabs</h4>
<p>A feature of tabs is that the user can <em>pin</em> tabs in a window. Pinned tabs are placed at the start of the tab list and cannot be moved. This means that the earliest position a tab can move to is the first position after any pinned tabs. So, <code>firstUnpinnedTab()</code> is called to find the position of the first unpinned tab by looping through the <code>tabs</code> object:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">firstUnpinnedTab</span><span class="token punctuation">(</span><span class="token parameter">tabs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> tab <span class="token keyword">of</span> tabs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tab<span class="token punctuation">.</span>pinned<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> tab<span class="token punctuation">.</span>index<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>We now have everything needed to move the tab: the active tab object from which we can get the tab <code>id</code> and the position the tab is to be moved to. So, we can implement the move:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">[</span>tab<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> index <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>The remaining functions to duplicate, reload, create, and remove tabs are implemented similarly.</p></div></section><section aria-labelledby="manipulating_a_tabs_zoom_level"><a class="dashAnchor" name="//apple_ref/Section/Manipulating%20a%20tab%27s%20zoom%20level"></a><h2 id="manipulating_a_tabs_zoom_level"><a href="#manipulating_a_tabs_zoom_level">Manipulating a tab's zoom level</a></h2><div class="section-content"><p>The next set of functions enable you to get (<a href="API/tabs/getZoom.html"><code>tabs.getZoom</code></a>) and set (<a href="API/tabs/setZoom.html"><code>tabs.setZoom</code></a>) the zoom level within a tab. You can also retrieve the zoom settings (<a href="API/tabs/getZoomSettings.html"><code>tabs.getZoomSettings</code></a>) but, at the time of writing, the ability to set the settings (<a href="API/tabs/setZoomSettings.html"><code>tabs.setZoomSettings</code></a>) wasn't available in Firefox.</p>
<p>The level of zoom can be between 30% and 500% (represented as decimals <code>0.3</code> to <code>5</code>).</p>
<p>In Firefox the default zoom settings are:</p>
<ul>
  <li><strong>default zoom level:</strong> 100%.</li>
  <li><strong>zoom mode:</strong> automatic (so the browser manages how zoom levels are set).</li>
  <li><strong>scope of zoom changes:</strong> <code>"per-origin"</code>, meaning that when you visit a site again, it takes the zoom level set in your last visit.</li>
</ul></div></section><section aria-labelledby="how_to_example_3"><h3 id="how_to_example_3"><a href="#how_to_example_3">How to example</a></h3><div class="section-content"><p>The <a href="https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs" class="external" target="_blank">tabs-tabs-tabs</a> example includes three demonstrations of the zoom feature: zoom in, zoom out, and reset zoom. Here is the feature in action:</p><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/RFr3oYBCg28" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" loading="lazy"></iframe>
<p>Let's take a look at how the zoom in is implemented.</p>
<dl>
  <dt id="manifest.json_3">manifest.json</dt>
  <dd>
    <p>None of the zoom functions require permissions, so there are no features in the <a href="https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/manifest.json" class="external" target="_blank">manifest.json</a> file that need to be highlighted.</p>
  </dd>
  <dt id="tabs.html_3">tabs.html</dt>
  <dd>
    <p>We have already discussed how the <a href="https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.html" class="external" target="_blank"><code>tabs.html</code></a> defines the options for this extension, nothing new or unique is done to provide the zoom options.</p>
  </dd>
  <dt id="tabs.js_3">tabs.js</dt>
  <dd>
    <p><a href="https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.js" class="external" target="_blank"><code>tabs.js</code></a> starts by defining several constants used in the zoom code:</p>
    <div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">const</span> <span class="token constant">ZOOM_INCREMENT</span> <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">MAX_ZOOM</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">MIN_ZOOM</span> <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">DEFAULT_ZOOM</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div>
    <p>It then uses the same listener we discussed earlier so it can act on clicks in <code>tabs.html</code>.</p>
    <p>For the zoom in feature, this runs:</p>
    <div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token string">"tabs-add-zoom"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callOnActiveTab</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tab</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">getZoom</span><span class="token punctuation">(</span>tab<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">zoomFactor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">//the maximum zoomFactor is 5, it can't go higher</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>zoomFactor <span class="token operator">&gt;=</span> <span class="token constant">MAX_ZOOM</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Tab zoom factor is already at max!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> newZoomFactor <span class="token operator">=</span> zoomFactor <span class="token operator">+</span> <span class="token constant">ZOOM_INCREMENT</span><span class="token punctuation">;</span>
          <span class="token comment">//if the newZoomFactor is set to higher than the max accepted</span>
          <span class="token comment">//it won't change, and will never alert that it's at maximum</span>
          newZoomFactor <span class="token operator">=</span> newZoomFactor <span class="token operator">&gt;</span> <span class="token constant">MAX_ZOOM</span> <span class="token operator">?</span> <span class="token constant">MAX_ZOOM</span> <span class="token operator">:</span> newZoomFactor<span class="token punctuation">;</span>
          browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">setZoom</span><span class="token punctuation">(</span>tab<span class="token punctuation">.</span>id<span class="token punctuation">,</span> newZoomFactor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div>
    <p>This code uses <code>callOnActiveTab()</code> to get the details of the active tab, then <a href="API/tabs/getZoom.html"><code>tabs.getZoom</code></a> gets the tab's current zoom factor. The current zoom is compared to the defined maximum (<code>MAX_ZOOM</code>) and an alert issued if the tab is already at the maximum zoom. Otherwise, the zoom level is incremented but limited to the maximum zoom, then the zoom is set with <a href="API/tabs/getZoom.html"><code>tabs.getZoom</code></a>.</p>
  </dd>
</dl></div></section><section aria-labelledby="manipulating_a_tabs_css"><a class="dashAnchor" name="//apple_ref/Section/Manipulating%20a%20tab%27s%20CSS"></a><h2 id="manipulating_a_tabs_css"><a href="#manipulating_a_tabs_css">Manipulating a tab's CSS</a></h2><div class="section-content"><p>Another significant capability offered by the Tabs API is the ability to manipulate the CSS within a tab—add new CSS to a tab (<a href="API/tabs/insertCSS.html"><code>tabs.insertCSS()</code></a>) or remove CSS from a tab (<a href="API/tabs/removeCSS.html"><code>tabs.removeCSS()</code></a>).</p>
<p>This can be useful, for example, if you want to highlight certain page elements or change the default layout of the page.</p></div></section><section aria-labelledby="how_to_example_4"><h3 id="how_to_example_4"><a href="#how_to_example_4">How to example</a></h3><div class="section-content"><p>The <a href="https://github.com/mdn/webextensions-examples/tree/master/apply-css" class="external" target="_blank">apply-css</a> example uses these features to add a red border to the web page in the active tab. Here is the feature in action:</p><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/bcK-GT2Dyhs" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" loading="lazy"></iframe>
<p>Let's walk through how it's set up.</p>
<dl>
  <dt id="manifest.json_4">manifest.json</dt>
  <dd>
    <p>The <a href="https://github.com/mdn/webextensions-examples/blob/master/apply-css/manifest.json" class="external" target="_blank"><code>manifest.json</code></a> requests permissions required to use the CSS features. You need either:</p>
    <ul>
      <li><code>"tabs"</code> permission and <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#host_permissions">host permission</a>; or,</li>
      <li><code>"activeTab"</code> permission.</li>
    </ul>
    <p>The latter is the most useful, as it allows an extension to use <a href="API/tabs/insertCSS.html"><code>tabs.insertCSS()</code></a> and <a href="API/tabs/removeCSS.html"><code>tabs.removeCSS()</code></a> in the active tab when run from the extension's browser or page action, context menu, or a shortcut.</p>
    <div class="code-example"><pre class="brush: json notranslate"><code><span class="token punctuation">{</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Adds a page action to toggle applying CSS to pages."</span><span class="token punctuation">,</span>

  <span class="token property">"manifest_version"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"apply-css"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0"</span><span class="token punctuation">,</span>
  <span class="token property">"homepage_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/mdn/webextensions-examples/tree/master/apply-css"</span><span class="token punctuation">,</span>

  <span class="token property">"background"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"background.js"</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token property">"page_action"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"default_icon"</span><span class="token operator">:</span> <span class="token string">"icons/off.svg"</span><span class="token punctuation">,</span>
    <span class="token property">"browser_style"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token property">"permissions"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"activeTab"</span><span class="token punctuation">,</span> <span class="token string">"tabs"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div>
    <p>You will note that <code>"tabs"</code> permission is requested in addition to <code>"activeTab"</code>. This additional permission is needed to enable the extension's script to access the tab's URL, the importance of which we'll see in a moment.</p>
    <p>The other main features in the manifest.json file are the definition of:</p>
    <ul>
      <li><strong>a background script</strong>, which starts running as soon as the extension is loaded.</li>
      <li><strong>a "page action"</strong>, which defines an icon to be added to the browser's address bar.</li>
    </ul>
  </dd>
  <dt id="background.js">background.js</dt>
  <dd>
    <p>On startup, <a href="https://github.com/mdn/webextensions-examples/blob/master/apply-css/background.js" class="external" target="_blank"><code>background.js</code></a> sets some constants to define the CSS to be applied, titles for the "page action", and a list of protocols the extension will work in:</p>
    <div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">const</span> <span class="token constant">CSS</span> <span class="token operator">=</span> <span class="token string">"body { border: 20px solid red; }"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">TITLE_APPLY</span> <span class="token operator">=</span> <span class="token string">"Apply CSS"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">TITLE_REMOVE</span> <span class="token operator">=</span> <span class="token string">"Remove CSS"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">APPLICABLE_PROTOCOLS</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"http:"</span><span class="token punctuation">,</span> <span class="token string">"https:"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div>
    <p>When first loaded, the extension uses <a href="API/tabs/query.html"><code>tabs.query()</code></a> to get a list of all the tabs in the current browser window. It then loops through the tabs calling <code>initializePageAction()</code>.</p>
    <div class="code-example"><pre class="brush: js notranslate"><code>browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tabs</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> tab <span class="token keyword">of</span> tabs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">initializePageAction</span><span class="token punctuation">(</span>tab<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
    <p><code>initializePageAction</code> uses <code>protocolIsApplicable()</code> to determine whether the active tab's URL is one the CSS can be applied to:</p>
    <div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">protocolIsApplicable</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> anchor <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  anchor<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token constant">APPLICABLE_PROTOCOLS</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>anchor<span class="token punctuation">.</span>protocol<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
    <p>Then, if the example can act on the tab, <code>initializePageAction()</code> sets the tab's <code>pageAction</code> (navigation bar) icon and title to use the "off" versions before making the <code>pageAction</code> visible:</p>
    <div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">initializePageAction</span><span class="token punctuation">(</span><span class="token parameter">tab</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">protocolIsApplicable</span><span class="token punctuation">(</span>tab<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    browser<span class="token punctuation">.</span>pageAction<span class="token punctuation">.</span><span class="token function">setIcon</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">tabId</span><span class="token operator">:</span> tab<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"icons/off.svg"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    browser<span class="token punctuation">.</span>pageAction<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">tabId</span><span class="token operator">:</span> tab<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token constant">TITLE_APPLY</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    browser<span class="token punctuation">.</span>pageAction<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>tab<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
    <p>Next, a listener on <code>pageAction.onClicked</code> waits for the <code>pageAction</code> icon to be clicked, and calls <code>toggleCSS</code> when it is.</p>
    <div class="code-example"><pre class="brush: js notranslate"><code>browser<span class="token punctuation">.</span>pageAction<span class="token punctuation">.</span>onClicked<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>toggleCSS<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
    <p><code>toggleCSS()</code> gets the title of the <code>pageAction</code> and then takes the action described:</p>
    <ul>
      <li><strong>For "Apply CSS":</strong>
        <ul>
          <li>toggles the <code>pageAction</code> icon and title to the "remove" versions.</li>
          <li>applies the CSS using <a href="API/tabs/insertCSS.html"><code>tabs.insertCSS()</code></a>.</li>
        </ul>
      </li>
      <li><strong>For "Remove CSS":</strong>
        <ul>
          <li>toggles the <code>pageAction</code> icon and title to the "apply" versions.</li>
          <li>removes the CSS using <a href="API/tabs/removeCSS.html"><code>tabs.removeCSS()</code></a>.</li>
        </ul>
      </li>
    </ul>
    <div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">toggleCSS</span><span class="token punctuation">(</span><span class="token parameter">tab</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">gotTitle</span><span class="token punctuation">(</span><span class="token parameter">title</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>title <span class="token operator">===</span> <span class="token constant">TITLE_APPLY</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      browser<span class="token punctuation">.</span>pageAction<span class="token punctuation">.</span><span class="token function">setIcon</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">tabId</span><span class="token operator">:</span> tab<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"icons/on.svg"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      browser<span class="token punctuation">.</span>pageAction<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">tabId</span><span class="token operator">:</span> tab<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token constant">TITLE_REMOVE</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">insertCSS</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token constant">CSS</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      browser<span class="token punctuation">.</span>pageAction<span class="token punctuation">.</span><span class="token function">setIcon</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">tabId</span><span class="token operator">:</span> tab<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"icons/off.svg"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      browser<span class="token punctuation">.</span>pageAction<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">tabId</span><span class="token operator">:</span> tab<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token constant">TITLE_APPLY</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">removeCSS</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token constant">CSS</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  browser<span class="token punctuation">.</span>pageAction<span class="token punctuation">.</span><span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">tabId</span><span class="token operator">:</span> tab<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>gotTitle<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
    <p>Finally, to ensure that the <code>pageAction</code> is valid after each update to the tab, a listener on <a href="API/tabs/onUpdated.html"><code>tabs.onUpdated</code></a> calls <code>initializePageAction()</code> each time the tab is updated to check that the tab is still using a protocol to which the CSS can be applied.</p>
    <div class="code-example"><pre class="brush: js notranslate"><code>browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span>onUpdated<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> changeInfo<span class="token punctuation">,</span> tab</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">initializePageAction</span><span class="token punctuation">(</span>tab<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
  </dd>
</dl></div></section><section aria-labelledby="some_other_interesting_abilities"><a class="dashAnchor" name="//apple_ref/Section/Some%20other%20interesting%20abilities"></a><h2 id="some_other_interesting_abilities"><a href="#some_other_interesting_abilities">Some other interesting abilities</a></h2><div class="section-content"><p>There are a couple of other Tabs API features that don't fit into one of the earlier sections:</p>
<ul>
  <li>Capture the visible tab content with <a href="API/tabs/captureVisibleTab.html"><code>tabs.captureVisibleTab</code></a>.</li>
  <li>Detect the primary language of the content in a tab using <a href="API/tabs/detectLanguage.html"><code>tabs.detectLanguage</code></a>. This could be used, for example, to match the language in your extension's UI with that of the page it's running in.</li>
</ul></div></section><section aria-labelledby="learn_more"><a class="dashAnchor" name="//apple_ref/Section/Learn%20more"></a><h2 id="learn_more"><a href="#learn_more">Learn more</a></h2><div class="section-content"><p>If you want to learn more about the Tabs API, check out:</p>
<ul>
  <li><a href="API/tabs.html">Tabs API reference</a></li>
  <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Examples">Example extensions</a> (many of which use the Tabs API)</li>
</ul></div></section><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a content problem with this page?</h3><ul><li>Edit the page <a href="https://github.com/mdn/content/edit/main/files/en-us/mozilla/add-ons/webextensions/working_with_the_tabs_api/index.md" title="This will take you to GitHub, where you'll need to sign in first." target="_blank" rel="noopener noreferrer">on GitHub</a>.</li><li>Report the <a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FMozilla%2FAdd-ons%2FWebExtensions%2FWorking_with_the_Tabs_API&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fmozilla%2Fadd-ons%2Fwebextensions%2Fworking_with_the_tabs_api%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FMozilla%2FAdd-ons%2FWebExtensions%2FWorking_with_the_Tabs_API%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fmozilla%2Fadd-ons%2Fwebextensions%2Fworking_with_the_tabs_api%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2F48882b75978cef6a4fbc68a35e547b33f8012f93%0A*+Document+last+modified%3A+2022-11-23T22%3A13%3A34.000Z%0A%0A%3C%2Fdetails%3E" title="This will take you to GitHub to file a new issue." target="_blank" rel="noopener noreferrer">content issue</a>.</li><li>View the source <a href="https://github.com/mdn/content/blob/main/files/en-us/mozilla/add-ons/webextensions/working_with_the_tabs_api/index.md?plain=1" title="Folder: en-us/mozilla/add-ons/webextensions/working_with_the_tabs_api (Opens in a new tab)" target="_blank" rel="noopener noreferrer">on GitHub</a>.</li></ul>Want to get more involved? Learn<!-- --> <a href="https://github.com/mdn/content/blob/main/CONTRIBUTING.md" title="This will take you to our contribution guidelines on GitHub." target="_blank" rel="noopener noreferrer">how to contribute</a>.</div><p class="last-modified-date">This page was last modified on<!-- --> <time datetime="2022-11-23T22:13:34.000Z">Nov 23, 2022</time> by<!-- --> <a href="Working_with_the_Tabs_API/contributors.txt">MDN contributors</a>.</p></div></aside></article></main></div><footer id="nav-footer" class="page-footer"><div><a href="http://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API">Working with the Tabs API</a> by <a href="http://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API$history">Mozilla Contributors</a> is licensed under <a href="http://creativecommons.org/licenses/by-sa/2.5/">CC-BY-SA 2.5</a>.</div></footer></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Working with the Tabs API","mdn_url":"/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API","locale":"en-US","native":"English (US)","sidebarHTML":"\n  <ol>\n    <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions\"><strong>Browser extensions</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Getting started</summary>\n        <ol>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions\">What are extensions?</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension\">Your first extension</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension\">Your second extension</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension\">Anatomy of an extension</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Examples\">Example extensions</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/What_next_\">What next?</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Concepts</summary>\n        <ol>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs\">Using the JavaScript APIs</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\">Content scripts</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Background_scripts\">Background scripts</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns\">Match patterns</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_files\">Working with files</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Internationalization\">Internationalization</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy\">Content Security Policy</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Native_messaging\">Native messaging</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations\">Differences between API implementations</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities\">Chrome incompatibilities</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>User interface</summary>\n        <ol>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface\">User Interface</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action\">Toolbar button</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions\">Address bar button</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars\">Sidebars</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items\">Context menu items</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages\">Options page</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages\">Extension pages</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications\">Notifications</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox\">Address bar suggestions</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels\">Developer tools panels</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details open=\"\">\n        <summary>How to</summary>\n        <ol>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests\">Intercept HTTP requests</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page\">Modify a web page</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page\">Insert external content</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts\">Share objects with page scripts</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar\">Add a button to the toolbar</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page\">Implement a settings page</a></li>\n          <li><em><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API\" aria-current=\"page\">Work with the Tabs API</a></em></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API\">Work with the Bookmarks API</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API\">Work with the Cookies API</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities\">Work with contextual identities</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard\">Interact with the clipboard</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Extending_the_developer_tools\">Extending the developer tools</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension\">Build a cross-browser extension</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators\">Firefox differentiators</a></summary>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>JavaScript APIs</summary>\n        <ol><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs\">Browser support for JavaScript APIs</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/action\">action</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/alarms\">alarms</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks\">bookmarks</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browserAction\">browserAction</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings\">browserSettings</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browsingData\">browsingData</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/captivePortal\">captivePortal</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/clipboard\">clipboard</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/commands\">commands</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts\">contentScripts</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/contextualIdentities\">contextualIdentities</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/cookies\">cookies</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/devtools\">devtools</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/dns\">dns</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/dom\">dom</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/downloads\">downloads</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/events\">events</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/extension\">extension</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/extensionTypes\">extensionTypes</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/find\">find</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/history\">history</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/i18n\">i18n</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/identity\">identity</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/idle\">idle</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/management\">management</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/menus\">menus</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/notifications\">notifications</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/omnibox\">omnibox</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/pageAction\">pageAction</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/permissions\">permissions</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/pkcs11\">pkcs11</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/privacy\">privacy</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/proxy\">proxy</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime\">runtime</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/scripting\">scripting</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/search\">search</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/sessions\">sessions</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/sidebarAction\">sidebarAction</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/storage\">storage</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs\">tabs</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/theme\">theme</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/topSites\">topSites</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/types\">types</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/userScripts\">userScripts</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation\">webNavigation</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest\">webRequest</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/windows\">windows</a></li></ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n      <summary>Manifest keys</summary>\n        <ol>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json\">Introduction</a></li>\n        </ol>\n      <ol><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/action\">action</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author\">author</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background\">background</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action\">browser_action</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings\">browser_specific_settings</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides\">chrome_settings_overrides</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides\">chrome_url_overrides</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands\">commands</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts\">content_scripts</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy\">content_security_policy</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale\">default_locale</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description\">description</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer\">developer</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page\">devtools_page</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/dictionaries\">dictionaries</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/externally_connectable\">externally_connectable</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url\">homepage_url</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/host_permissions\">host_permissions</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons\">icons</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito\">incognito</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version\">manifest_version</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name\">name</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/offline_enabled\">offline_enabled</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox\">omnibox</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions\">optional_permissions</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_page\">options_page</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui\">options_ui</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action\">page_action</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions\">permissions</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers\">protocol_handlers</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name\">short_name</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action\">sidebar_action</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/storage\">storage</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme\">theme</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme_experiment\">theme_experiment</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/user_scripts\">user_scripts</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version\">version</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name\">version_name</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources\">web_accessible_resources</a></li></ol>\n      </details>\n    </li>\n     <li class=\"toggle\">\n      <details>\n        <summary>Extension Workshop</summary>\n        <ol>\n          <li><a href=\"https://extensionworkshop.com/documentation/develop/\">Develop</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/publish/\">Publish</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/manage/\">Manage</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/enterprise/\">Enterprise</a></li>\n        </ol>\n      </details>\n    </li>\n    <li><a href=\"/en-US/docs/Mozilla/Add-ons/Contact_us\"><strong>Contact us</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Channels</summary>\n        <ol>\n          <li><a href=\"https://blog.mozilla.org/addons\">Add-ons blog</a></li>\n          <li><a href=\"https://discourse.mozilla.org/c/add-ons\">Add-ons forum</a></li>\n          <li><a href=\"https://chat.mozilla.org/#/room/%23addons:mozilla.org\">Add-ons chat</a></li>\n        </ol>\n      </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Tabs let a user open several web pages in their browser window and then switch between those web pages. With the Tabs API, you can work with and manipulate these tabs to create utilities that provide users with new ways to work with tabs or to deliver the features of your extension.</p>\n<p>In this how-to article we'll look at:</p>\n<ul>\n  <li>Permissions needed to use the Tabs API.</li>\n  <li>Discovering more about tabs and their properties using <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query</code></a>.</li>\n  <li>Creating, duplicating, moving, updating, reloading, and removing tabs.</li>\n  <li>Manipulating a tab's zoom level.</li>\n  <li>Manipulating a tab's CSS.</li>\n</ul>\n<p>We then conclude by looking at some other, miscellaneous features offered by the API.</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> There are some Tab API features covered elsewhere. These are the methods you can use to manipulate tab content with scripts (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/connect\"><code>tabs.connect</code></a>, <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/sendMessage\"><code>tabs.sendMessage</code></a>, and <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/executeScript\"><code>tabs.executeScript</code></a>). If you want more information on these methods, see the Concepts article <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\">Content scripts</a> and the how-to guide <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page\">Modify a web page</a>.</p>\n</div>"}},{"type":"prose","value":{"id":"permissions_and_the_tabs_api","title":"Permissions and the Tabs API","isH3":false,"content":"<p>For the majority of the Tabs API functions you don't need any permissions; however, there are some exceptions:</p>\n<ul>\n  <li><code>\"tabs\"</code> permission is needed to access the <code>Tab.url</code>, <code>Tab.title</code>, and <code>Tab.favIconUrl</code> properties of the Tab object. In Firefox, you also need <code>\"tabs\"</code> to perform a <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\">query</a> by URL.</li>\n  <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#host_permissions\">Host permission</a> is needed for <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/executeScript\"><code>tabs.executeScript()</code></a> or <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\"><code>tabs.insertCSS()</code></a>.</li>\n</ul>\n<p>The following is how you might request <code>\"tabs\"</code> permission in your extension's manifest.json file:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token property\">\"permissions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"&lt;all_urls&gt;\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"tabs\"</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</code></pre></div>\n<p>This request gives you use of all Tabs API feature on all website your user visits. There is also an alternative approach for requesting permissions to use <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/executeScript\"><code>tabs.executeScript()</code></a> or <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\"><code>tabs.insertCSS()</code></a> where you don't need host permission, in the form of <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#activetab_permission\"><code>\"activeTab\"</code></a>. This permission provides the same rights as <code>\"tabs\"</code> with <code>&lt;all_urls&gt;</code>, but with two restrictions:</p>\n<ul>\n  <li>the user must interact with the extension through its browser or page action, context menu, or shortcut key.</li>\n  <li>it only grants permission within the active tab.</li>\n</ul>\n<p>The benefit of this approach is the user won't get a permissions warning saying your extension can \"Access your data for all websites\". This is because <code>&lt;all_urls&gt;</code> permission gives an extension the ability to execute scripts in any tab, any time it likes, whereas <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#activetab_permission\"><code>\"activeTab\"</code></a> is limited to allowing the extension to perform a user requested action in the current tab.</p>"}},{"type":"prose","value":{"id":"discovering_more_about_tabs_and_their_properties","title":"Discovering more about tabs and their properties","isH3":false,"content":"<p>There will be occasions when you want to get a list of all the tabs in all the browser windows. Other times you might want to find a subset of tabs that match some specific criteria, such as those opened from a specific tab or displaying pages from a particular domain. And once you have your list of tabs, you'll probably want to know more about their properties.</p>\n<p>This is where <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query()</code></a> comes in. Used alone to get all tabs or taking the <code>queryInfo</code> object—to specify query criteria such as whether the tab is active, in the current window, or one or more of 17 criteria—<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query()</code></a> returns an array of <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> objects containing information about the tabs.</p>\n<p>Where you want information about the current tab only, you can get a <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> object for that tab using <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getCurrent\"><code>tabs.getCurrent()</code></a>. If you have a tab's ID, you can get its <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> object using <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/get\"><code>tabs.get()</code></a>.</p>"}},{"type":"prose","value":{"id":"how_to_example","title":"How to example","isH3":true,"content":"<p>To see how <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query()</code></a> and <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> are used, let's walk through how the <a href=\"https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs\" class=\"external\" target=\"_blank\">tabs-tabs-tabs</a> example adds the list of \"switch to tabs\" to its toolbar button popup.</p>\n<p>\n  <img src=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API/switch_to_tab.png\" alt=\"The tabs toolbar menu showing the switch to tap area\" width=\"369\" height=\"645\" loading=\"lazy\">\n</p>\n<dl>\n  <dt id=\"manifest.json\">manifest.json</dt>\n  <dd>\n    <p>Here is the <a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/manifest.json\" class=\"external\" target=\"_blank\"><code>manifest.json</code></a>:</p>\n    <div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"browser_action\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"browser_style\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"default_title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tabs, tabs, tabs\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"default_popup\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tabs.html\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"A list of methods you can perform on a tab.\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"homepage_url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"manifest_version\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tabs, tabs, tabs\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"permissions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"tabs\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n    <div class=\"notecard note\" id=\"sect2\">\n      <p><strong>Note:</strong></p>\n      <ul>\n        <li><strong><code>tabs.html</code> is defined as the <code>default_popup</code> in <code>browser_action</code>.</strong> It is displayed whenever the user clicks the extension's toolbar icon.</li>\n        <li><strong>Permissions includes tabs.</strong> This is needed to support the tab list feature, as the extension reads the title of the tabs for display in the popup.</li>\n      </ul>\n    </div>\n  </dd>\n  <dt id=\"tabs.html\">tabs.html</dt>\n  <dd>\n    <p><code>tabs.html</code> defines the content of the extension's popup:</p>\n    <div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs.css<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>panel<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>panel-section panel-section-header<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-section-header<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Tabs-tabs-tabs<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-move-beginning<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n        Move active tab to the beginning of the window\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/&gt;</span></span>\n\n      <span class=\"token comment\">&lt;!-- Define the other menu items --&gt;</span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>switch-tabs<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>Switch to tab<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n    <p>This does the following:</p>\n    <ol>\n      <li>The menu items are declared.</li>\n      <li>An empty <code>div</code> with the ID <code>tabs-list</code> is declared to contain the list of tabs.</li>\n      <li><code>tabs.js</code> is called.</li>\n    </ol>\n  </dd>\n  <dt id=\"tabs.js\">tabs.js</dt>\n  <dd>\n    <p>In <a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.js\" class=\"external\" target=\"_blank\"><code>tabs.js</code></a>, we'll see how the list of tabs is built and added to the popup.</p>\n  </dd>\n</dl>\n<h4 id=\"creating_the_popup\">Creating the popup</h4>\n<p>First, an event handler is added to execute <code>listTabs()</code> when <code>tabs.html</code> is loaded:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DOMContentLoaded\"</span><span class=\"token punctuation\">,</span> listTabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>The first thing that <code>listTabs()</code> does is to call <code>getCurrentWindowTabs()</code>. This is where <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query()</code></a> is used to get a <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> object for the tabs in the current window:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">currentWindow</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Now, <code>listTabs()</code> is ready to create the content for the popup.</p>\n<p>To start with:</p>\n<ol>\n  <li>Grab the <code>&lt;div id=\"tabs-list\"&gt;</code> element.</li>\n  <li>Create a document fragment (into which the list will be built).</li>\n  <li>Set counters.</li>\n  <li>Clear the content of the <code>&lt;div id=\"tabs-list\"&gt;</code> element.</li>\n</ol>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">listTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> tabsList <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tabs-list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> currentTabs <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createDocumentFragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> limit <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> counter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    tabsList<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Next, we'll create the links for each tab:</p>\n<ol>\n  <li>Loops through the first 5 items from the <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> object.</li>\n  <li>For each item, add a hyperlink to the document fragment.\n    <ul>\n      <li>The link's label—that is, its text—is set using the tab's <code>title</code> (or the <code>id</code>, if it has no <code>title</code>).</li>\n      <li>The link's address is set using the tab's <code>id</code>.</li>\n    </ul>\n  </li>\n</ol>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tab<span class=\"token punctuation\">.</span>active <span class=\"token operator\">&amp;&amp;</span> counter <span class=\"token operator\">&lt;=</span> limit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> tabLink <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    tabLink<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> tab<span class=\"token punctuation\">.</span>title <span class=\"token operator\">||</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">;</span>\n\n    tabLink<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"href\"</span><span class=\"token punctuation\">,</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    tabLink<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"switch-tabs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    currentTabs<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>tabLink<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  counter <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Finally, the document fragment is written to the <code>&lt;div id=\"tabs-list\"&gt;</code> element:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>    tabsList<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>currentTabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h4 id=\"working_with_the_active_tab\">Working with the active tab</h4>\n<p>Another related example feature is the \"Alert active tab\" info option that dumps all the <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> object properties for the active tab into an alert:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> <span class=\"token string\">\"tabs-alertinfo\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> props <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> item <span class=\"token keyword\">in</span> tab<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      props <span class=\"token operator\">+=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span> item <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> = </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span> tab<span class=\"token punctuation\">[</span>item<span class=\"token punctuation\">]</span> <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> \\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Where <code>callOnActiveTab()</code> finds the active tab object by looping through the <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> objects looking for the item with active set:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">,</span> tabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"creating_duplicating_moving_updating_reloading_and_removing_tabs","title":"Creating, duplicating, moving, updating, reloading, and removing tabs","isH3":false,"content":"<p>Having gathered information about the tabs you'll most likely want to do something with them—either to offer users features for manipulating and managing tabs or to implement functionality in your extension.</p>\n<p>The following functions are available:</p>\n<ul>\n  <li>create a new tab (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/create\"><code>tabs.create()</code></a>).</li>\n  <li>duplicate a tab (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/duplicate\"><code>tabs.duplicate()</code></a>).</li>\n  <li>remove a tab (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/remove\"><code>tabs.remove()</code></a>).</li>\n  <li>move a tab (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/move\"><code>tabs.move()</code></a>).</li>\n  <li>update the tab's URL—effectively browse to a new page—(<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/update\"><code>tabs.update()</code></a>).</li>\n  <li>reload the tab's page (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/reload\"><code>tabs.reload()</code></a>).</li>\n</ul>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>Note:</strong> These functions all require the ID (or IDs) of the tab they are manipulating:</p>\n  <ul>\n    <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/duplicate\"><code>tabs.duplicate()</code></a></li>\n    <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/remove\"><code>tabs.remove()</code></a></li>\n    <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/move\"><code>tabs.move()</code></a></li>\n  </ul>\n  <p>Whereas the following functions will act on the active tab (if no tab <code>id</code> is provided):</p>\n  <ul>\n    <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/update\"><code>tabs.update()</code></a></li>\n    <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/reload\"><code>tabs.reload()</code></a></li>\n  </ul>\n</div>"}},{"type":"prose","value":{"id":"how_to_example_2","title":"How to example","isH3":true,"content":"<p>The <a href=\"https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs\" class=\"external\" target=\"_blank\">tabs-tabs-tabs</a> example exercises all of these features except for updating a tab's URL The way in which these APIs are used is similar, so we'll look at one of the more involved implementations, that of the \"Move active tab to the beginning of the window list\" option.</p>\n<p>But first, here is a demonstration of the feature in action:</p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/-lJRzTIvhxo\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" loading=\"lazy\"></iframe>\n<dl>\n  <dt id=\"manifest.json_2\">manifest.json</dt>\n  <dd>\n    <p>None of the functions require a permission to operate, so there are no features in the <a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/manifest.json\" class=\"external\" target=\"_blank\">manifest.json</a> file that need to be highlighted.</p>\n  </dd>\n  <dt id=\"tabs.html_2\">tabs.html</dt>\n  <dd>\n    <p><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.html\" class=\"external\" target=\"_blank\"><code>tabs.html</code></a> defines the \"menu\" displayed in the popup, which includes the \"Move active tab to the beginning of the window list\" option, with a series of <code>&lt;a&gt;</code> tags grouped by a visual separator. Each menu item is given an <code>id</code>, which is used in <code>tabs.js</code> to determine which menu item is being requested.</p>\n    <div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-move-beginning<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  Move active tab to the beginning of the window\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-move-end<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Move active tab to the end of the window<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>panel-section-separator<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-duplicate<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Duplicate active tab<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-reload<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Reload active tab<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-alertinfo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Alert active tab info<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/&gt;</span></span>\n</code></pre></div>\n  </dd>\n  <dt id=\"tabs.js_2\">tabs.js</dt>\n  <dd>\n    <p>To implement the \"menu\" defined in <code>tabs.html</code>, <a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.js\" class=\"external\" target=\"_blank\"><code>tabs.js</code></a> includes a listener for clicks in <code>tabs.html</code>:</p>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">,</span> tabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n    <p>A series of <code>if</code> statements then look to match the <code>id</code> of the item clicked.</p>\n    <p>This code snippet is for the \"Move active tab to the beginning of the window list\" option:</p>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> <span class=\"token string\">\"tabs-move-beginning\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab<span class=\"token punctuation\">,</span> tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tab<span class=\"token punctuation\">.</span>pinned<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      index <span class=\"token operator\">=</span> <span class=\"token function\">firstUnpinnedTab</span><span class=\"token punctuation\">(</span>tabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">moving </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> index <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n    <p>It's worth noting the use of <code>console.log()</code>. This enables you to output information to the <a href=\"https://extensionworkshop.com/documentation/develop/debugging/\" class=\"external\" target=\"_blank\">debugger</a> console, which can be useful when resolving issues found during development.</p>\n    <p>\n      <img src=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API/console.png\" alt=\"Example of the console.log output, from the move tabs feature, in the debugging console\" width=\"911\" height=\"329\" loading=\"lazy\">\n    </p>\n    <p>The move code first calls <code>callOnActiveTab()</code> which in turn calls <code>getCurrentWindowTabs()</code> to get a <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> object containing the active window's tabs. It then loops through the object to find and return the active tab object:</p>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">,</span> tabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n  </dd>\n</dl>\n<h4 id=\"pinned_tabs\">Pinned tabs</h4>\n<p>A feature of tabs is that the user can <em>pin</em> tabs in a window. Pinned tabs are placed at the start of the tab list and cannot be moved. This means that the earliest position a tab can move to is the first position after any pinned tabs. So, <code>firstUnpinnedTab()</code> is called to find the position of the first unpinned tab by looping through the <code>tabs</code> object:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">firstUnpinnedTab</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tab<span class=\"token punctuation\">.</span>pinned<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> tab<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>We now have everything needed to move the tab: the active tab object from which we can get the tab <code>id</code> and the position the tab is to be moved to. So, we can implement the move:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> index <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>The remaining functions to duplicate, reload, create, and remove tabs are implemented similarly.</p>"}},{"type":"prose","value":{"id":"manipulating_a_tabs_zoom_level","title":"Manipulating a tab's zoom level","isH3":false,"content":"<p>The next set of functions enable you to get (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getZoom\"><code>tabs.getZoom</code></a>) and set (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/setZoom\"><code>tabs.setZoom</code></a>) the zoom level within a tab. You can also retrieve the zoom settings (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getZoomSettings\"><code>tabs.getZoomSettings</code></a>) but, at the time of writing, the ability to set the settings (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/setZoomSettings\"><code>tabs.setZoomSettings</code></a>) wasn't available in Firefox.</p>\n<p>The level of zoom can be between 30% and 500% (represented as decimals <code>0.3</code> to <code>5</code>).</p>\n<p>In Firefox the default zoom settings are:</p>\n<ul>\n  <li><strong>default zoom level:</strong> 100%.</li>\n  <li><strong>zoom mode:</strong> automatic (so the browser manages how zoom levels are set).</li>\n  <li><strong>scope of zoom changes:</strong> <code>\"per-origin\"</code>, meaning that when you visit a site again, it takes the zoom level set in your last visit.</li>\n</ul>"}},{"type":"prose","value":{"id":"how_to_example_3","title":"How to example","isH3":true,"content":"<p>The <a href=\"https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs\" class=\"external\" target=\"_blank\">tabs-tabs-tabs</a> example includes three demonstrations of the zoom feature: zoom in, zoom out, and reset zoom. Here is the feature in action:</p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/RFr3oYBCg28\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" loading=\"lazy\"></iframe>\n<p>Let's take a look at how the zoom in is implemented.</p>\n<dl>\n  <dt id=\"manifest.json_3\">manifest.json</dt>\n  <dd>\n    <p>None of the zoom functions require permissions, so there are no features in the <a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/manifest.json\" class=\"external\" target=\"_blank\">manifest.json</a> file that need to be highlighted.</p>\n  </dd>\n  <dt id=\"tabs.html_3\">tabs.html</dt>\n  <dd>\n    <p>We have already discussed how the <a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.html\" class=\"external\" target=\"_blank\"><code>tabs.html</code></a> defines the options for this extension, nothing new or unique is done to provide the zoom options.</p>\n  </dd>\n  <dt id=\"tabs.js_3\">tabs.js</dt>\n  <dd>\n    <p><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.js\" class=\"external\" target=\"_blank\"><code>tabs.js</code></a> starts by defining several constants used in the zoom code:</p>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> <span class=\"token constant\">ZOOM_INCREMENT</span> <span class=\"token operator\">=</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">MAX_ZOOM</span> <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">MIN_ZOOM</span> <span class=\"token operator\">=</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DEFAULT_ZOOM</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n    <p>It then uses the same listener we discussed earlier so it can act on clicks in <code>tabs.html</code>.</p>\n    <p>For the zoom in feature, this runs:</p>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> <span class=\"token string\">\"tabs-add-zoom\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">getZoom</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">zoomFactor</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//the maximum zoomFactor is 5, it can't go higher</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>zoomFactor <span class=\"token operator\">&gt;=</span> <span class=\"token constant\">MAX_ZOOM</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Tab zoom factor is already at max!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">let</span> newZoomFactor <span class=\"token operator\">=</span> zoomFactor <span class=\"token operator\">+</span> <span class=\"token constant\">ZOOM_INCREMENT</span><span class=\"token punctuation\">;</span>\n          <span class=\"token comment\">//if the newZoomFactor is set to higher than the max accepted</span>\n          <span class=\"token comment\">//it won't change, and will never alert that it's at maximum</span>\n          newZoomFactor <span class=\"token operator\">=</span> newZoomFactor <span class=\"token operator\">&gt;</span> <span class=\"token constant\">MAX_ZOOM</span> <span class=\"token operator\">?</span> <span class=\"token constant\">MAX_ZOOM</span> <span class=\"token operator\">:</span> newZoomFactor<span class=\"token punctuation\">;</span>\n          browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">setZoom</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> newZoomFactor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</code></pre></div>\n    <p>This code uses <code>callOnActiveTab()</code> to get the details of the active tab, then <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getZoom\"><code>tabs.getZoom</code></a> gets the tab's current zoom factor. The current zoom is compared to the defined maximum (<code>MAX_ZOOM</code>) and an alert issued if the tab is already at the maximum zoom. Otherwise, the zoom level is incremented but limited to the maximum zoom, then the zoom is set with <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getZoom\"><code>tabs.getZoom</code></a>.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"manipulating_a_tabs_css","title":"Manipulating a tab's CSS","isH3":false,"content":"<p>Another significant capability offered by the Tabs API is the ability to manipulate the CSS within a tab—add new CSS to a tab (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\"><code>tabs.insertCSS()</code></a>) or remove CSS from a tab (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/removeCSS\"><code>tabs.removeCSS()</code></a>).</p>\n<p>This can be useful, for example, if you want to highlight certain page elements or change the default layout of the page.</p>"}},{"type":"prose","value":{"id":"how_to_example_4","title":"How to example","isH3":true,"content":"<p>The <a href=\"https://github.com/mdn/webextensions-examples/tree/master/apply-css\" class=\"external\" target=\"_blank\">apply-css</a> example uses these features to add a red border to the web page in the active tab. Here is the feature in action:</p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/bcK-GT2Dyhs\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" loading=\"lazy\"></iframe>\n<p>Let's walk through how it's set up.</p>\n<dl>\n  <dt id=\"manifest.json_4\">manifest.json</dt>\n  <dd>\n    <p>The <a href=\"https://github.com/mdn/webextensions-examples/blob/master/apply-css/manifest.json\" class=\"external\" target=\"_blank\"><code>manifest.json</code></a> requests permissions required to use the CSS features. You need either:</p>\n    <ul>\n      <li><code>\"tabs\"</code> permission and <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#host_permissions\">host permission</a>; or,</li>\n      <li><code>\"activeTab\"</code> permission.</li>\n    </ul>\n    <p>The latter is the most useful, as it allows an extension to use <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\"><code>tabs.insertCSS()</code></a> and <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/removeCSS\"><code>tabs.removeCSS()</code></a> in the active tab when run from the extension's browser or page action, context menu, or a shortcut.</p>\n    <div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Adds a page action to toggle applying CSS to pages.\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token property\">\"manifest_version\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"apply-css\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"homepage_url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/mdn/webextensions-examples/tree/master/apply-css\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token property\">\"background\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"background.js\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token property\">\"page_action\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"default_icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"icons/off.svg\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"browser_style\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token property\">\"permissions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"activeTab\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"tabs\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n    <p>You will note that <code>\"tabs\"</code> permission is requested in addition to <code>\"activeTab\"</code>. This additional permission is needed to enable the extension's script to access the tab's URL, the importance of which we'll see in a moment.</p>\n    <p>The other main features in the manifest.json file are the definition of:</p>\n    <ul>\n      <li><strong>a background script</strong>, which starts running as soon as the extension is loaded.</li>\n      <li><strong>a \"page action\"</strong>, which defines an icon to be added to the browser's address bar.</li>\n    </ul>\n  </dd>\n  <dt id=\"background.js\">background.js</dt>\n  <dd>\n    <p>On startup, <a href=\"https://github.com/mdn/webextensions-examples/blob/master/apply-css/background.js\" class=\"external\" target=\"_blank\"><code>background.js</code></a> sets some constants to define the CSS to be applied, titles for the \"page action\", and a list of protocols the extension will work in:</p>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> <span class=\"token constant\">CSS</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"body { border: 20px solid red; }\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">TITLE_APPLY</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Apply CSS\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">TITLE_REMOVE</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Remove CSS\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">APPLICABLE_PROTOCOLS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"http:\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"https:\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n    <p>When first loaded, the extension uses <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query()</code></a> to get a list of all the tabs in the current browser window. It then loops through the tabs calling <code>initializePageAction()</code>.</p>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">initializePageAction</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n    <p><code>initializePageAction</code> uses <code>protocolIsApplicable()</code> to determine whether the active tab's URL is one the CSS can be applied to:</p>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">protocolIsApplicable</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> anchor <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  anchor<span class=\"token punctuation\">.</span>href <span class=\"token operator\">=</span> url<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token constant\">APPLICABLE_PROTOCOLS</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>anchor<span class=\"token punctuation\">.</span>protocol<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n    <p>Then, if the example can act on the tab, <code>initializePageAction()</code> sets the tab's <code>pageAction</code> (navigation bar) icon and title to use the \"off\" versions before making the <code>pageAction</code> visible:</p>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">initializePageAction</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">protocolIsApplicable</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"icons/off.svg\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token constant\">TITLE_APPLY</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n    <p>Next, a listener on <code>pageAction.onClicked</code> waits for the <code>pageAction</code> icon to be clicked, and calls <code>toggleCSS</code> when it is.</p>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span>onClicked<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>toggleCSS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n    <p><code>toggleCSS()</code> gets the title of the <code>pageAction</code> and then takes the action described:</p>\n    <ul>\n      <li><strong>For \"Apply CSS\":</strong>\n        <ul>\n          <li>toggles the <code>pageAction</code> icon and title to the \"remove\" versions.</li>\n          <li>applies the CSS using <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\"><code>tabs.insertCSS()</code></a>.</li>\n        </ul>\n      </li>\n      <li><strong>For \"Remove CSS\":</strong>\n        <ul>\n          <li>toggles the <code>pageAction</code> icon and title to the \"apply\" versions.</li>\n          <li>removes the CSS using <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/removeCSS\"><code>tabs.removeCSS()</code></a>.</li>\n        </ul>\n      </li>\n    </ul>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">toggleCSS</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">gotTitle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">title</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>title <span class=\"token operator\">===</span> <span class=\"token constant\">TITLE_APPLY</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"icons/on.svg\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token constant\">TITLE_REMOVE</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">insertCSS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">code</span><span class=\"token operator\">:</span> <span class=\"token constant\">CSS</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"icons/off.svg\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token constant\">TITLE_APPLY</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">removeCSS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">code</span><span class=\"token operator\">:</span> <span class=\"token constant\">CSS</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">getTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>gotTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n    <p>Finally, to ensure that the <code>pageAction</code> is valid after each update to the tab, a listener on <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/onUpdated\"><code>tabs.onUpdated</code></a> calls <code>initializePageAction()</code> each time the tab is updated to check that the tab is still using a protocol to which the CSS can be applied.</p>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>onUpdated<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> changeInfo<span class=\"token punctuation\">,</span> tab</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">initializePageAction</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"some_other_interesting_abilities","title":"Some other interesting abilities","isH3":false,"content":"<p>There are a couple of other Tabs API features that don't fit into one of the earlier sections:</p>\n<ul>\n  <li>Capture the visible tab content with <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/captureVisibleTab\"><code>tabs.captureVisibleTab</code></a>.</li>\n  <li>Detect the primary language of the content in a tab using <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/detectLanguage\"><code>tabs.detectLanguage</code></a>. This could be used, for example, to match the language in your extension's UI with that of the page it's running in.</li>\n</ul>"}},{"type":"prose","value":{"id":"learn_more","title":"Learn more","isH3":false,"content":"<p>If you want to learn more about the Tabs API, check out:</p>\n<ul>\n  <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs\">Tabs API reference</a></li>\n  <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Examples\">Example extensions</a> (many of which use the Tabs API)</li>\n</ul>"}}],"toc":[{"text":"Permissions and the Tabs API","id":"permissions_and_the_tabs_api"},{"text":"Discovering more about tabs and their properties","id":"discovering_more_about_tabs_and_their_properties"},{"text":"Creating, duplicating, moving, updating, reloading, and removing tabs","id":"creating_duplicating_moving_updating_reloading_and_removing_tabs"},{"text":"Manipulating a tab's zoom level","id":"manipulating_a_tabs_zoom_level"},{"text":"Manipulating a tab's CSS","id":"manipulating_a_tabs_css"},{"text":"Some other interesting abilities","id":"some_other_interesting_abilities"},{"text":"Learn more","id":"learn_more"}],"summary":"Tabs let a user open several web pages in their browser window and then switch between those web pages. With the Tabs API, you can work with and manipulate these tabs to create utilities that provide users with new ways to work with tabs or to deliver the features of your extension.","popularity":0,"modified":"2022-11-23T22:13:34.000Z","other_translations":[{"title":"Travailler avec l'API Tabs","locale":"fr","native":"Français"},{"title":"Tabs API を使う","locale":"ja","native":"日本語"},{"title":"Working with the Tabs API","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"en-us/mozilla/add-ons/webextensions/working_with_the_tabs_api","github_url":"https://github.com/mdn/content/blob/main/files/en-us/mozilla/add-ons/webextensions/working_with_the_tabs_api/index.md","last_commit_url":"https://github.com/mdn/content/commit/48882b75978cef6a4fbc68a35e547b33f8012f93","filename":"index.md"},"short_title":"Working with the Tabs API","parents":[{"uri":"/en-US/docs/Mozilla","title":"Mozilla"},{"uri":"/en-US/docs/Mozilla/Add-ons","title":"Add-ons"},{"uri":"/en-US/docs/Mozilla/Add-ons/WebExtensions","title":"Browser Extensions"},{"uri":"/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API","title":"Working with the Tabs API"}],"pageTitle":"Working with the Tabs API - Mozilla | MDN","noIndexing":false}}</script>
<!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Feb 2023 05:22:11 GMT -->
</body></html>