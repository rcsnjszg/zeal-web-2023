<html><!-- Mirrored from developer.mozilla.org/en-US/docs/Web/API/WebXR_Device_API/Geometry by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Feb 2023 04:50:20 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="../../../../../favicon-48x48.cbbd161b.png"><link rel="apple-touch-icon" href="../../../../../apple-touch-icon.6803c6f0.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="../../../../../manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/opensearch.xml" title="MDN Web Docs"><title>Geometry and reference spaces in WebXR</title><link rel="alternate" title="WebXR の形状と参照空間" href="https://developer.mozilla.org/ja/docs/Web/API/WebXR_Device_API/Geometry" hreflang="ja"><link rel="alternate" title="Geometry and reference spaces in WebXR" href="Geometry.html" hreflang="en"><meta name="robots" content="index, follow"><meta name="description" content="At a fundamental level, rendering of scenes for WebXR presentation in either augmented reality or virtual reality contexts is performed using WebGL, so the two APIs share much of the same design language. However, in order to provide the ability to present scenes in true 3D using XR headsets and other such equipment, WebXR has additional concepts that must be understood."><meta property="og:url" content="Geometry.html"><meta property="og:title" content="Geometry and reference spaces in WebXR - Web APIs | MDN"><meta property="og:locale" content="en-US"><meta property="og:description" content="At a fundamental level, rendering of scenes for WebXR presentation in either augmented reality or virtual reality contexts is performed using WebGL, so the two APIs share much of the same design language. However, in order to provide the ability to present scenes in true 3D using XR headsets and other such equipment, WebXR has additional concepts that must be understood."><meta property="og:image" content="../../../../../mdn-social-share.cd6c4a5a.png"><meta property="twitter:card" content="summary_large_image"><link rel="canonical" href="Geometry.html"><style media="print">.article-actions-container,.document-toc-container,.language-menu,.main-menu-toggle,.mdn-cta-container,.on-github,.page-footer,.sidebar,.top-navigation-main,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><script src="../../../../../static/js/ga.js" defer=""></script><script defer="defer" src="../../../../../static/js/main.5c9d40d0.js"></script><link href="../../../../../static/css/main.7d378400.css" rel="stylesheet"></head><body><script>document.body.addEventListener("load",(t=>{t.target.classList.contains("interactive")&&t.target.setAttribute("data-readystate","complete")}),{capture:!0});const c={light:"#ffffff",dark:"#1b1b1b"};if(window&&document.documentElement)try{const t=window.localStorage.getItem("theme");t&&(document.documentElement.className=t,document.documentElement.style.backgroundColor=c[t])}catch(t){console.warn("Unable to read theme from localStorage",t)}</script><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#top-nav-search-input">Skip to search</a></li><li><a id="skip-select-language" href="#languages-switcher-button">Skip to select language</a></li></ul><div class="page-wrapper  category-api document-page"><div class="main-document-header-container"><header class="main-document-header-container top-navigation 
      
      "><div class="container "><div class="top-navigation-wrap"><a href="https://developer.mozilla.org/en-US/" class="logo" aria-label="MDN homepage"><svg id="mdn-docs-logo" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 694.9 104.4" style="enable-background:new 0 0 694.9 104.4" xml:space="preserve" role="img"><title>MDN Web Docs</title><style>.logo-m{fill:var(--text-link)}</style><g class="logo-m"><path d="M40.3 0 11.7 92.1H0L28.5 0h11.8zM50.7 0v92.1H40.3V0h10.4zM91 0 62.5 92.1H50.8L79.3 0H91zM101.4 0v92.1H91V0h10.4z"></path></g><path class="logo-m" d="M627.9 95.6h67v8.8h-67v-8.8z"></path><g style="fill:var(--text-primary)"><path d="M367 42h-4l-10.7 30.8h-5.5l-10.8-26h-.4l-10.5 26h-5.2L308.7 42h-3.8v-5.6H323V42h-6.5l6.8 20.4h.4l10.3-26h4.7l11.2 26h.5l5.7-20.3h-6.2v-5.6H367V42zM401.9 62c-.4 3.2-2 5.9-4.7 8.2-2.8 2.3-6.5 3.4-11.3 3.4-5.4 0-9.7-1.6-13.1-4.7-3.3-3.2-5-7.7-5-13.7 0-5.7 1.6-10.3 4.7-14s7.4-5.5 12.9-5.5c5.1 0 9.1 1.6 11.9 4.7s4.3 6.9 4.3 11.3c0 1.5-.2 3-.5 4.7h-25.6c.3 7.7 4 11.6 10.9 11.6 2.9 0 5.1-.7 6.5-2 1.5-1.4 2.5-3 3-4.9l6 .9zM394 51.3c.2-2.4-.4-4.7-1.8-6.9s-3.8-3.3-7-3.3c-3.1 0-5.3 1-6.9 3-1.5 2-2.5 4.4-2.8 7.2H394zM445 53.7c0 5-1.3 9.5-4 13.7s-6.9 6.2-12.7 6.2c-6 0-10.3-2.2-12.7-6.7-.1.4-.2 1.4-.4 2.9s-.3 2.5-.4 2.9h-7.3c.3-1.7.6-3.5.8-5.3.3-1.8.4-3.7.4-5.5V22.3h-6v-5.6H416v27c1.1-2.2 2.7-4.1 4.7-5.7 2-1.6 4.8-2.4 8.4-2.4 4.6 0 8.4 1.6 11.4 4.7 3 3.2 4.5 7.6 4.5 13.4zm-7.7.6c0-4.2-1-7.4-3-9.5-2-2.2-4.4-3.3-7.4-3.3-3.4 0-6 1.2-8 3.7-1.9 2.4-2.9 5-3 7.7V57c0 3 1 5.6 3 7.7s4.5 3.1 7.6 3.1c3.6 0 6.3-1.3 8.1-3.9 1.8-2.7 2.7-5.9 2.7-9.6zM506.5 72.8h-13.2v-7.2c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2 5.7 0 9.8 2.2 12.3 6.5V22.3h-8.6v-5.6h15.8v50.6h6v5.5zM493.2 56v-4.4c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zM546.3 54.6c0 5.6-1.8 10.2-5.3 13.7s-8.2 5.3-13.9 5.3-10.1-1.7-13.4-5.1c-3.3-3.4-5-7.9-5-13.5 0-5.3 1.6-9.9 4.7-13.7 3.2-3.8 7.9-5.7 14.2-5.7s11 1.9 14.1 5.7c3 3.7 4.6 8.1 4.6 13.3zm-7.7-.2c0-4-1-7.2-3-9.5s-4.8-3.5-8.2-3.5c-3.6 0-6.4 1.2-8.3 3.7s-2.9 5.6-2.9 9.5c0 3.7.9 6.8 2.8 9.4 1.9 2.6 4.6 3.9 8.3 3.9 3.6 0 6.4-1.3 8.4-3.8 1.9-2.6 2.9-5.8 2.9-9.7zM583.6 60.2c-.4 3.2-1.9 6.3-4.4 9.1-2.5 2.9-6.4 4.3-11.8 4.3-5.2 0-9.4-1.6-12.6-4.8-3.2-3.2-4.8-7.7-4.8-13.7 0-5.5 1.6-10.1 4.7-13.9 3.2-3.8 7.6-5.7 13.2-5.7 2.3 0 4.6.3 6.7.8 2.2.5 4.2 1.5 6.2 2.9l1.5 9.5-5.9.7-1.3-6.1c-2.1-1.2-4.5-1.8-7.2-1.8-3.5 0-6.1 1.2-7.7 3.7-1.7 2.5-2.5 5.7-2.5 9.6 0 4.1.9 7.3 2.7 9.5 1.8 2.3 4.4 3.4 7.8 3.4 5.2 0 8.2-2.9 9.2-8.8l6.2 1.3zM618.3 62.1c0 3.6-1.5 6.5-4.6 8.5s-7 3-11.7 3c-5.7 0-10.6-1.2-14.6-3.6l1.2-8.8 5.7.6-.2 4.7c1.1.5 2.3.9 3.6 1.1s2.6.3 3.9.3c2.4 0 4.5-.4 6.5-1.3 1.9-.9 2.9-2.2 2.9-4.1 0-1.8-.8-3.1-2.3-3.8s-3.5-1.3-5.8-1.7-4.6-.9-6.9-1.4c-2.3-.6-4.2-1.6-5.7-2.9-1.6-1.4-2.3-3.5-2.3-6.3 0-4.1 1.5-6.9 4.6-8.5s6.4-2.4 9.9-2.4c2.6 0 5 .3 7.2.9 2.2.6 4.3 1.4 6.1 2.4l.8 8.8-5.8.7-.8-5.7c-2.3-1-4.7-1.6-7.2-1.6-2.1 0-3.7.4-5.1 1.1-1.3.8-2 2-2 3.8 0 1.7.8 2.9 2.3 3.6 1.5.7 3.4 1.2 5.7 1.6 2.2.4 4.5.8 6.7 1.4 2.2.6 4.1 1.6 5.7 3 1.4 1.6 2.2 3.7 2.2 6.6zM197.6 73.2h-17.1v-5.5h3.8V51.9c0-3.7-.7-6.3-2.1-7.9-1.4-1.6-3.3-2.3-5.7-2.3-3.2 0-5.6 1.1-7.2 3.4s-2.4 4.6-2.5 6.9v15.6h6v5.5h-17.1v-5.5h3.8V51.9c0-3.8-.7-6.4-2.1-7.9-1.4-1.5-3.3-2.3-5.6-2.3-3.2 0-5.5 1.1-7.2 3.3-1.6 2.2-2.4 4.5-2.5 6.9v15.8h6.9v5.5h-20.2v-5.5h6V42.4h-6.1v-5.6h13.4v6.4c1.2-2.1 2.7-3.8 4.7-5.2 2-1.3 4.4-2 7.3-2s5.3.7 7.5 2.1c2.2 1.4 3.7 3.5 4.5 6.4 1.1-2.5 2.7-4.5 4.9-6.1s4.8-2.4 7.9-2.4c3.5 0 6.5 1.1 8.9 3.3s3.7 5.6 3.7 10.2v18.2h6.1v5.5zm42.5 0h-13.2V66c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2s9.8 2.2 12.3 6.5V22.7h-8.6v-5.6h15.8v50.6h6v5.5zm-13.3-16.8V52c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zm61.5 16.8H269v-5.5h6V51.9c0-3.7-.7-6.3-2.2-7.9-1.4-1.6-3.4-2.3-5.7-2.3-3.1 0-5.6 1-7.4 3s-2.8 4.4-2.9 7v15.9h6v5.5h-19.3v-5.5h6V42.4h-6.2v-5.6h13.6V43c2.6-4.6 6.8-6.9 12.7-6.9 3.6 0 6.7 1.1 9.2 3.3s3.7 5.6 3.7 10.2v18.2h6v5.4h-.2z"></path></g></svg></a><button title="Open main menu" type="button" class="button action has-icon main-menu-toggle" aria-haspopup="menu" aria-label="Open main menu" aria-expanded="false"><span class="button-wrap"><span class="icon icon-menu "></span><span class="visually-hidden">Open main menu</span></span></button></div><div class="top-navigation-main"><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button type="button" id="references-button" class="top-level-entry menu-toggle" aria-controls="references-menu" aria-expanded="false">References</button><a href="https://developer.mozilla.org/en-US/docs/Web" class="top-level-entry">References</a><ul id="references-menu" class="submenu references hidden inline-submenu-lg" aria-labelledby="references-button"><li class="apis-link-container mobile-only "><a href="https://developer.mozilla.org/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li><li class="html-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Structure of content on the web</p></div></a></li><li class="css-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Code used to describe document style</p></div></a></li><li class="javascript-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">General-purpose scripting language</p></div></a></li><li class="http-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP" class="submenu-item "><div class="submenu-icon http"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTTP</div><p class="submenu-item-description">Protocol for transmitting web resources</p></div></a></li><li class="apis-link-container "><a href="../../API.html" class="submenu-item "><div class="submenu-icon apis"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web APIs</div><p class="submenu-item-description">Interfaces for building web applications</p></div></a></li><li class="apis-link-container "><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Extensions</div><p class="submenu-item-description">Developing extensions for web browsers</p></div></a></li><li class="apis-link-container desktop-only "><a href="https://developer.mozilla.org/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li></ul></li><li class="top-level-entry-container"><button type="button" id="guides-button" class="top-level-entry menu-toggle" aria-controls="guides-menu" aria-expanded="false">Guides</button><a href="https://developer.mozilla.org/en-US/docs/Learn" class="top-level-entry">Guides</a><ul id="guides-menu" class="submenu guides hidden inline-submenu-lg" aria-labelledby="guides-button"><li class="apis-link-container mobile-only "><a href="https://developer.mozilla.org/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="apis-link-container desktop-only "><a href="https://developer.mozilla.org/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="html-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Learn to structure web content with HTML</p></div></a></li><li class="css-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Learn to style content using CSS</p></div></a></li><li class="javascript-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">Learn to run scripts in the browser</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Accessibility</div><p class="submenu-item-description">Learn to make the web accessible to all</p></div></a></li></ul></li><li class="top-level-entry-container"><button type="button" id="mdn-plus-button" class="top-level-entry menu-toggle" aria-controls="mdn-plus-menu" aria-expanded="false">MDN Plus</button><a href="https://developer.mozilla.org/en-US/plus" class="top-level-entry">MDN Plus</a><ul id="mdn-plus-menu" class="submenu mdn-plus hidden inline-submenu-lg" aria-labelledby="mdn-plus-button"><li class=" "><a href="https://developer.mozilla.org/en-US/plus" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview</div><p class="submenu-item-description">A customized MDN experience</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/updates" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Updates</div><p class="submenu-item-description">All browser compatibility updates at a glance</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/docs/features/overview" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Documentation</div><p class="submenu-item-description">Learn how to use MDN Plus</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/docs/faq" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">FAQ</div><p class="submenu-item-description">Frequently asked questions about MDN Plus</p></div></a></li></ul></li></ul></nav><div class="header-search"><form action="https://developer.mozilla.org/en-US/search" role="search" aria-haspopup="listbox" aria-owns="top-nav-search-menu" aria-expanded="false" class="search-form search-widget" id="top-nav-search-form"><label id="top-nav-search-label" for="top-nav-search-input" class="visually-hidden">Search MDN</label><input id="top-nav-search-input" aria-autocomplete="list" aria-controls="top-nav-search-menu" aria-labelledby="top-nav-search-label" autocomplete="off" type="search" class="search-input-field" name="q" placeholder="   " required="" value=""><button type="button" class="button action has-icon clear-search-button"><span class="button-wrap"><span class="icon icon-cancel "></span><span class="visually-hidden">Clear search input</span></span></button><button type="submit" class="button action has-icon search-button"><span class="button-wrap"><span class="icon icon-search "></span><span class="visually-hidden">Search</span></span></button><div id="top-nav-search-menu" role="listbox" aria-labelledby="top-nav-search-label"></div></form></div><div class="theme-switcher-menu"><button type="button" class="button action has-icon theme-switcher-menu small" aria-haspopup="menu"><span class="button-wrap"><span class="icon icon-theme-os-default "></span>Theme</span></button></div><ul class="auth-container"><li><a href="https://developer.mozilla.org/users/fxa/login/authenticate/?next=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FWebXR_Device_API%2FGeometry" class="signin-link" rel="nofollow">Already a subscriber?</a></li><li><a class="button primary mdn-plus-subscribe-link" href="https://developer.mozilla.org/en-US/plus"><span class="button-wrap">Get MDN Plus</span></a></li></ul></div></div></header><div class="article-actions-container"><div class="container"><button type="button" class="button action has-icon sidebar-button" aria-label="Expand sidebar" aria-expanded="false" aria-controls="sidebar-quicklinks"><span class="button-wrap"><span class="icon icon-sidebar "></span></span></button><nav class="breadcrumbs-container" aria-label="Breadcrumb"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="https://developer.mozilla.org/en-US/docs/Web"><span property="name">References</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="../../API.html"><span property="name">Web APIs</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="../WebXR_Device_API.html"><span property="name">WebXR Device API</span></a><meta property="position" content="3"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="Geometry.html"><span property="name">Geometry and reference spaces in WebXR</span></a><meta property="position" content="4"></li></ol></nav><div class="article-actions"><button type="button" class="button action has-icon article-actions-toggle" aria-label="Article actions"><span class="button-wrap"><span class="icon icon-ellipses "></span><span class="article-actions-dialog-heading">Article Actions</span></span></button><ul class="article-actions-entries"><li class="article-actions-entry"><div class="languages-switcher-menu open-on-focus-within"><button id="languages-switcher-button" type="button" class="button action small has-icon languages-switcher-menu" aria-haspopup="menu"><span class="button-wrap"><span class="icon icon-language "></span>English (US)</span></button></div></li></ul></div></div></div></div><div class="main-wrapper"><aside id="sidebar-quicklinks" class="sidebar"><button type="button" class="button action backdrop" aria-label="Collapse sidebar"><span class="button-wrap"></span></button><nav aria-label="Related Topics" class="sidebar-inner"><div class="in-nav-toc"><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#fundamentals_of_3d_geometry">Fundamentals of 3D geometry</a></li><li class="document-toc-item "><a class="document-toc-link" href="#on_the_origins_of_spaces">On the origins of spaces</a></li><li class="document-toc-item "><a class="document-toc-link" href="#reference_spaces">Reference spaces</a></li><li class="document-toc-item "><a class="document-toc-link" href="#defining_spatial_relationships_with_reference_spaces">Defining spatial relationships with reference spaces</a></li><li class="document-toc-item "><a class="document-toc-link" href="#positioning_and_orienting_objects">Positioning and orienting objects</a></li><li class="document-toc-item "><a class="document-toc-link" href="#see_also">See also</a></li></ul></section></div></div><div><ol><li><strong><a href="../WebXR_Device_API.html">WebXR Device API</a></strong></li><li class="toggle"><details open=""><summary>Guides</summary><ol><li><a href="Fundamentals.html">Fundamentals of WebXR</a></li></ol></details></li><li class="toggle"><details open=""><summary>Interfaces</summary><ol><li><a href="../XRAnchor.html"><code>XRAnchor</code></a></li><li><a href="../XRBoundedReferenceSpace.html"><code>XRBoundedReferenceSpace</code></a></li><li><a href="../XRCPUDepthInformation.html"><code>XRCPUDepthInformation</code></a></li><li><a href="../XRDepthInformation.html"><code>XRDepthInformation</code></a></li><li><a href="../XRFrame.html"><code>XRFrame</code></a></li><li><a href="../XRInputSource.html"><code>XRInputSource</code></a></li><li><a href="../XRInputSourceArray.html"><code>XRInputSourceArray</code></a></li><li><a href="../XRInputSourceEvent.html"><code>XRInputSourceEvent</code></a></li><li><a href="../XRInputSourcesChangeEvent.html"><code>XRInputSourcesChangeEvent</code></a></li><li><a href="../XRPose.html"><code>XRPose</code></a></li><li><a href="../XRReferenceSpace.html"><code>XRReferenceSpace</code></a></li><li><a href="../XRReferenceSpaceEvent.html"><code>XRReferenceSpaceEvent</code></a></li><li><a href="../XRRenderState.html"><code>XRRenderState</code></a></li><li><a href="../XRRigidTransform.html"><code>XRRigidTransform</code></a></li><li><a href="../XRSession.html"><code>XRSession</code></a></li><li><a href="../XRSessionEvent.html"><code>XRSessionEvent</code></a></li><li><a href="../XRSpace.html"><code>XRSpace</code></a></li><li><a href="../XRSystem.html"><code>XRSystem</code></a></li><li><a href="../XRView.html"><code>XRView</code></a></li><li><a href="../XRViewerPose.html"><code>XRViewerPose</code></a></li><li><a href="../XRViewport.html"><code>XRViewport</code></a></li><li><a href="../XRWebGLBinding.html"><code>XRWebGLBinding</code></a></li><li><a href="../XRWebGLDepthInformation.html"><code>XRWebGLDepthInformation</code></a></li><li><a href="../XRWebGLLayer.html"><code>XRWebGLLayer</code></a></li></ol></details></li><li class="toggle"><details open=""><summary>Properties</summary><ol><li><a href="../Navigator/xr.html"><code>Navigator.xr</code></a></li></ol></details></li><li class="toggle"><details open=""><summary>Methods</summary><ol><li><a href="../WebGLRenderingContext/makeXRCompatible.html"><code>WebGLRenderingContext.makeXRCompatible()</code></a></li></ol></details></li><li class="toggle"><details open=""><summary>Events</summary><ol><li><a href="../XRReferenceSpace/reset_event.html"><code>XRReferenceSpace</code>: <code>reset</code></a></li><li><a href="../XRSession/end_event.html"><code>XRSession</code>: <code>end</code></a></li><li><a href="../XRSession/inputsourceschange_event.html"><code>XRSession</code>: <code>inputsourceschange</code></a></li><li><a href="../XRSession/select_event.html"><code>XRSession</code>: <code>select</code></a></li><li><a href="../XRSession/selectend_event.html"><code>XRSession</code>: <code>selectend</code></a></li><li><a href="../XRSession/selectstart_event.html"><code>XRSession</code>: <code>selectstart</code></a></li><li><a href="../XRSession/visibilitychange_event.html"><code>XRSession</code>: <code>visibilitychange</code></a></li><li><a href="../XRSystem/devicechange_event.html"><code>XRSystem</code>: <code>devicechange</code></a></li></ol></details></li></ol></div></nav></aside><aside class="toc"><nav><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#fundamentals_of_3d_geometry">Fundamentals of 3D geometry</a></li><li class="document-toc-item "><a class="document-toc-link" href="#on_the_origins_of_spaces">On the origins of spaces</a></li><li class="document-toc-item "><a class="document-toc-link" href="#reference_spaces">Reference spaces</a></li><li class="document-toc-item "><a class="document-toc-link" href="#defining_spatial_relationships_with_reference_spaces">Defining spatial relationships with reference spaces</a></li><li class="document-toc-item "><a class="document-toc-link" href="#positioning_and_orienting_objects">Positioning and orienting objects</a></li><li class="document-toc-item "><a class="document-toc-link" href="#see_also">See also</a></li></ul></section></div></nav></aside><main id="content" class="main-content  "><article class="main-page-content" lang="en-US"><h1>Geometry and reference spaces in WebXR</h1><div class="section-content"><p>At a fundamental level, rendering of scenes for <a href="../WebXR_Device_API.html">WebXR</a> presentation in either augmented reality or virtual reality contexts is performed using <a href="../WebGL_API.html">WebGL</a>, so the two APIs share much of the same design language. However, in order to provide the ability to present scenes in true 3D using XR headsets and other such equipment, WebXR has additional concepts that must be understood.</p>
<p>In this article, we introduce the ways in which WebXR expands upon the geometry of WebGL, and how the positions and orientations of objects—both physical and virtual—are described in relation to one another using spaces and, in particular, reference spaces.</p>
<p>The article <a href="Spatial_tracking.html">Spatial tracking in WebXR</a> builds upon the information provided here to cover how the physical position and orientation of the user's head, as well as potentially other parts of their body such as the hands, are mapped into the digital world, as well as how the relative positions of both physical and virtual objects are tracked as they move around, so that the scene can be properly rendered and composited.</p></div><section aria-labelledby="fundamentals_of_3d_geometry"><a class="dashAnchor" name="//apple_ref/Section/Fundamentals%20of%203D%20geometry"></a><h2 id="fundamentals_of_3d_geometry"><a href="#fundamentals_of_3d_geometry">Fundamentals of 3D geometry</a></h2><div class="section-content"><p>While we'll examine here the required math operations used to compute the positions, orientations, and movement of objects in virtual space—plus the need to integrate the human viewer of the scene into the mix—a thorough introduction to geometry and the use of matrices and vectors to manage 3D representations of a scene is well beyond the scope of what can be accomplished in this article. You can learn more about the individual operations in <a href="../WebGL_API/Matrix_math_for_the_web.html">Matrix math for the web</a>.</p></div></section><section aria-labelledby="units"><h3 id="units"><a href="#units">Units</a></h3><div class="section-content"><p>Before discussing the details of the geometry of the 3D space used by WebXR, it's first useful to understand the units of measure that are applied to the 3D world.</p>
<h4 id="lengths_and_distances">Lengths and distances</h4>
<p>WebGL measures all distances and lengths in <strong>meters</strong>. WebXR inherits this standard, as well as the fact that the world is a cube two meters wide, two meters tall, and two meters deep. Each of the three axes has a minimum value of -1.0 and a maximum of 1.0, with the center of the cube located at (0, 0, 0).</p>
<p>
  <img src="Geometry/defaultspacedimensions.svg" alt="Diagram showing a WebXR space whose X, Y, and Z coordinate axes each have a minimum value of -1 and a maximum of 1." width="730" height="438" loading="lazy">
</p>
<p>This eight cubic meter space encompasses the entire universe for the purposes of your code. Everything you draw must have its coordinates mapped to fit into this space, either explicitly within your code, or by using a transform to adjust the coordinates of all vertices. The most efficient way, of course, is to design your objects and code to use the same coordinate system as WebGL does.</p>
<p>The WebGL coordinates and lengths are transformed automatically at render time to the size of the viewport in which the scene is being rendered.</p>
<h4 id="angles">Angles</h4>
<p>Angles are specified using <strong><a href="https://en.wikipedia.org/wiki/Radians" class="external" target="_blank">radians</a></strong>. To convert degrees to radians, multiply the value in degrees by <code>π/180</code>. The following code snippet shows two simple functions, <code>degreesToRadians()</code> and <code>radiansToDegrees()</code>, which convert back and forth between the two units for measuring angles.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">const</span> <span class="token constant">RADIANS_PER_DEGREE</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180.0</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token function-variable function">degreesToRadians</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">deg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> deg <span class="token operator">*</span> <span class="token constant">RADIANS_PER_DEGREE</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">radiansToDegrees</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">rad</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> rad <span class="token operator">/</span> <span class="token constant">RADIANS_PER_DEGREE</span><span class="token punctuation">;</span>
</code></pre></div>
<h4 id="times_and_durations">Times and durations</h4>
<div class="notecard note" id="sect1">
  <p>
    <strong>Note:</strong> For security reasons, <code>DOMHighResTimeStamp</code> usually introduces a
    small amount of imprecision to the clock in order to prevent it from being used in <a href="https://developer.mozilla.org/en-US/docs/Web/Privacy#fingerprinting">fingerprinting</a> and timing-based
    attacks.
  </p>
</div>
<p>All times and durations in WebXR are measured using the <a href="../DOMHighResTimeStamp.html"><code>DOMHighResTimeStamp</code></a> type, which is a double-precision floating-point value specifying the time in milliseconds relative to the starting time. Since the value is a floating-point number, it may be accurate to well better than the millisecond level, depending on the platform and hardware.</p>
<p>Time is primarily used to determine the amount of time that's elapsed since the scene's previous animation frame was drawn. As such the time is typically in alignment with the refresh rate of the display, or some fraction thereof if the frame rate needs to be constrained due to performance issues. This means that the time will usually step in 1/60th of a second intervals, assuming a 60 FPS frame rate. Doing the math, we find that this means that each frame will ideally be rendered 16.6667 milliseconds apart.</p></div></section><section aria-labelledby="geometry_operations_with_matrices"><h3 id="geometry_operations_with_matrices"><a href="#geometry_operations_with_matrices">Geometry operations with matrices</a></h3><div class="section-content"><p>We offer a <a href="../WebGL_API/Matrix_math_for_the_web.html">guide to matrix mathematics as it pertains to 3D geometry</a>, including how matrices are used for the three primary transforms that need to be performed when rendering 3D scenes:</p>
<ul>
  <li><strong><a href="../WebGL_API/Matrix_math_for_the_web.html#translation_matrix">Translation</a></strong> is the use of a matrix to shift the position of a point through the virtual space. This motion can be along any of the object's axes, or any combination of them.</li>
  <li><strong><a href="../WebGL_API/Matrix_math_for_the_web.html#rotation_matrix">Rotation</a></strong> is the application of a matrix that rotates a point around the origin of the object's coordinate system.</li>
  <li><strong><a href="../WebGL_API/Matrix_math_for_the_web.html#scale_matrix">Scaling</a></strong> is the use of a matrix to alter the size of an object.</li>
</ul>
<p>Note that when we say that a transform applies to a point, it also, by extension, can be applied to a <em>collection</em> of points. Since an object is represented by some number of polygons made up of a number of points in space, applying the same transform to every point that makes up the object will apply that same transform to the entire object overall. Transforms can also be applied to vectors, since vectors are described using a coordinate value to define the direction and magnitude of the vector.</p></div></section><section aria-labelledby="on_the_origins_of_spaces"><a class="dashAnchor" name="//apple_ref/Section/On%20the%20origins%20of%20spaces"></a><h2 id="on_the_origins_of_spaces"><a href="#on_the_origins_of_spaces">On the origins of spaces</a></h2><div class="section-content"><p>A complete XR-enhanced scene—whether virtual or augmented—is a composite of anywhere from one to potentially dozens of frames of reference. Each object within the scene that needs to directly exchange position and orientation data with the WebXR system needs to be able to report that information in a way that can be understood and adapted as needed to be comprehensible by other objects within the scene.</p>
<p>In augmented reality (AR), this is because of the need to insert virtual objects into the real world, not only placing them correctly but also ensuring that they don't seem to wander around on their own as the user's perspective shifts. In virtual reality (VR), it's all about creating a sense of space in which the user's movements are precisely matched by the imagery presented on the virtual display, to prevent disjoints and disconnects that could cause discomfort or worse.</p>
<p>Thus it's all about creating a sense of space. From the perspective of an XR developer, designing the stage is the part that matters most to your users. Like an architect or a set designer, you have the power to create moods and experiences through a physical environment. How you structure that space will both depend on and influence how users can interact and explore it.</p>
<div class="notecard note" id="sect2">
  <p><strong>Note:</strong> A space will typically have foreground, mid-distance, and background elements. The right balance can create a unique presence and guide your user. The foreground includes objects and interfaces that you can interact with directly. The mid-distance includes objects you can interact with to some extent, or can approach in order to examine and engage with more closely. The background, on the other hand, is usually largely or entirely non-interactive, at least until and unless the user is able to approach it, bringing it into the mid-distance or foreground range.</p>
</div>
<p>In WebXR, the fundamental concept of a <strong>space</strong>—as in, a coordinate space in which a scene takes place—is represented by an instance of <a href="../XRSpace.html"><code>XRSpace</code></a>. The space is used to make determinations about the relative positions and motion of objects and other entities (such as light sources and cameras) within the user's environment.</p>
<p>As mentioned earlier, any given 3D point consists of three components, each identifying the distance from the center of the space along one of the three axes.</p>
<p>This is the <strong>native origin</strong> of the space, corresponding to a specific physical location in the user's environment. Each space has its own native origin, which is tracked by the XR device's tracking system. This may be different from the <strong>effective origin</strong>, which is the origin point for the space's local coordinate system.</p>
<p>The directionality of the coordinate system can be seen in the following diagram:</p>
<p>
  <img src="Geometry/webgl_coordinates.svg" alt="Diagram showing the coordinate system used by WebGL and WebXR." width="487" height="487" loading="lazy">
</p>
<p>An <a href="../XRRigidTransform.html"><code>XRRigidTransform</code></a> called the <strong>origin offset</strong> is used to transform points from the space's own effective coordinate system to the XR device's native coordinate system. The origin offset is initially an identity transform, since typically the two origins are aligned when the space is first established. However, as changes in alignment accumulate over time the origin offset may change to compensate.</p>
<p>The position of a point in space relative to the origin is determined by determining its distance along each of the three spatial axes shown in the diagram above. The space's origin is the point (0, 0, 0), at the center of the space and at the zero position along each axis. Specifically, under the initial starting conditions, with the default orientation of the viewer upon the space:</p>
<ul>
  <li>The <strong>x-axis</strong> extends horizontally from left to right away from the origin, with the <em>x</em> coordinate of +1.0 being located at the right edge of the world. Negative values of <em>x</em> extend toward the left from the origin, reaching a value of -1.0 at the left edge of the space.</li>
  <li>The <strong>y-axis</strong> is positive extending upward from the origin toward the top of the screen, reaching +1.0 at the top of the world space. Values of <em>y</em> less than 0 are found below the origin, extending toward the bottom of the screen and reaching -1.0 at the bottom of the world's space.</li>
  <li>The <strong>z-axis</strong> extends from the origin outward from the screen, reaching +1.0 at the closest point to the user in that direction. Negative values of <em>z</em> extend away from the user further into the screen, with the farthest away point in the world having a <em>z</em> of -1.0.</li>
</ul>
<p>Every object is, at the simplest level, a set of polygons defined by points in 3D space and an offset transform, indicating how to move and rotate the object to position it at the desired point in space. If the offset transform is an identity matrix, the object is located at the origin point.</p>
<p>To be useful for spatial tracking and scene geometry, though, you need to be able to correlate the XR device's perceived position with the space's coordinate system. That's where reference spaces come in.</p></div></section><section aria-labelledby="reference_spaces"><a class="dashAnchor" name="//apple_ref/Section/Reference%20spaces"></a><h2 id="reference_spaces"><a href="#reference_spaces">Reference spaces</a></h2><div class="section-content"><p>Because of the variety of XR hardware available, coming in a wide variety of form factors from many developers, it's impractical and non-scalable to expect developers to have to directly communicate with the tracking technology being used. Instead, the <a href="../WebXR_Device_API.html">WebXR Device API</a> is designed to have developers plan their users' experiences and request an appropriate reference space that best represents those needs. This is done by asking the <a href="https://developer.mozilla.org/en-US/docs/Glossary/User_agent">user agent</a> for an <strong><a href="../XRReferenceSpace.html"><code>XRReferenceSpace</code></a></strong> matching those needs.</p>
<p>An <code>XRReferenceSpace</code> object acts as a means to adapt one coordinate system reference frame to another. After putting on a headset, consider the virtual world around you to have a coordinate system in which your position is (0, 0, 0)—that is, you're at the center of everything. Doesn't that feel empowering? Forward, directly in front of your headset, is the -Z axis, with +Z behind you. X is positive to your right and negative to your left. Y is negative as you go downward and positive as you go upward. This indicates the position of the headset in space at the start of your use of the XR system, with the origin (0, 0, 0) being positioned basically at the bridge of your nose. This space is the <strong>world space</strong>.</p>
<p>Next, consider the XR controller you have in your left hand. It has the ability to report movement and its orientation, but it doesn't know anything about the position of the headset or, more crucially, its coordinate system. But the controller still needs a way to report its position to your app. Thus, it has its own coordinate system. This is a reference space which is provided to your app when input events occur. This reference space internally knows how to map the coordinates of the controller to the headset's coordinates, so WebXR can translate coordinates back and forth for you.</p>
<p>Once created, an <code>XRReferenceSpace</code> guarantees a certain level of support for motion and orientation tracking, and provides a mechanism for obtaining an <a href="../XRViewerPose.html"><code>XRViewerPose</code></a> from which you can get a matrix which represents the position and facing direction of the space relative to the world space, if the space represents a viewer such as the user's headset, an observer's headset, or a virtual camera.</p>
<p>All of this is the browser's responsibility to handle, providing consistent behavior regardless of how capable each of the underlying reference spaces are. No matter how powerful or simple the individual XR device is, code written using WebXR will still work, within the limitations of the available hardware.</p>
<p>Regardless of the type of reference space you choose, its type is <a href="../XRReferenceSpace.html"><code>XRReferenceSpace</code></a> or is a type derived from <code>XRReferenceSpace</code>. The currently available reference space types, are shown below.</p>
<dl>
  <dt id="bounded-floor"><code>bounded-floor</code></dt>
  <dd>
    <p>An <a href="../XRBoundedReferenceSpace.html"><code>XRBoundedReferenceSpace</code></a> similar to the <code>local</code> type, except the user is not expected to move outside a predetermined boundary, given by the <a href="../XRBoundedReferenceSpace/boundsGeometry.html" title="boundsGeometry"><code>boundsGeometry</code></a> in the returned object.</p>
  </dd>
  <dt id="local"><code>local</code></dt>
  <dd>
    <p>An <a href="../XRReferenceSpace.html"><code>XRReferenceSpace</code></a> tracking space whose native origin is located near the viewer's position at the time the session was created. The exact position depends on the underlying platform and implementation. The user isn't expected to move much if at all beyond their starting position, and tracking is optimized for this use case. For devices with six degrees of freedom (6DoF) tracking, the <code>local</code> reference space tries to keep the origin stable relative to the environment.</p>
  </dd>
  <dt id="local-floor"><code>local-floor</code></dt>
  <dd>
    <p>An <a href="../XRReferenceSpace.html"><code>XRReferenceSpace</code></a> similar to the <code>local</code> type, except the starting position is placed in a safe location for the viewer to stand, where the value of the y axis is 0 at floor level. If that floor level isn't known, the <a href="https://developer.mozilla.org/en-US/docs/Glossary/User_agent">user agent</a> will estimate the floor level. If the estimated floor level is non-zero, the browser is expected to round it such a way as to avoid fingerprinting (likely to the nearest centimeter).</p>
  </dd>
  <dt id="unbounded"><code>unbounded</code></dt>
  <dd>
    <p>An <a href="../XRReferenceSpace.html"><code>XRReferenceSpace</code></a> tracking space which allows the user total freedom of movement, possibly over extremely long distances from their origin point. The viewer isn't tracked at all; tracking is optimized for stability around the user's current position, so the native origin may drift as needed to accommodate that need.</p>
  </dd>
  <dt id="viewer"><code>viewer</code></dt>
  <dd>
    <p>An <a href="../XRReferenceSpace.html"><code>XRReferenceSpace</code></a> tracking space whose native origin tracks the viewer's position and orientation. This is used for environments in which the user can physically move around, and is supported by all instances of <a href="../XRSession.html"><code>XRSession</code></a>, both immersive and inline, though it's most useful for inline sessions. It's particularly useful when determining the distance between the viewer and an input, or when working with offset spaces. Otherwise, typically, one of the other reference space types will be used more often.</p>
  </dd>
</dl>
<p>The remainder of this guide explores how to select the right reference space for your app's needs.</p></div></section><section aria-labelledby="defining_spatial_relationships_with_reference_spaces"><a class="dashAnchor" name="//apple_ref/Section/Defining%20spatial%20relationships%20with%20reference%20spaces"></a><h2 id="defining_spatial_relationships_with_reference_spaces"><a href="#defining_spatial_relationships_with_reference_spaces">Defining spatial relationships with reference spaces</a></h2><div class="section-content"><p>There are a number of commonly used ways to reference the positions and orientations of objects relative to their environment, as well as to constrain the environment itself. To that end, WebXR defines a set of standard spaces, called <strong>reference spaces</strong>, each of which supports a different technique for correlating its local space's reference frame coordinate system to the coordinate system of the space in which it exists.</p>
<p>However, regardless of which type of reference space is being used, you can use the same functions to convert coordinates from space to parent space.</p></div></section><section aria-labelledby="selecting_the_reference_space_type"><h3 id="selecting_the_reference_space_type"><a href="#selecting_the_reference_space_type">Selecting the reference space type</a></h3><div class="section-content"><p>Straight off, let's state the simplest step in the process of deciding which reference type to use: the reference spaces you're most likely to use are <code>local</code>, <code>local-floor</code>, <code>unbounded</code>, or <code>bounded-floor</code>.</p>
<h4 id="floor_level_reference_spaces">Floor level reference spaces</h4>
<p>The reference space types with <code>-floor</code> in their names work just like the corresponding non-floor spaces, except that they attempt to automatically ensure that the viewer is positioned in a safe place at or near (but always above) ground level. This is the plane at which the <code>y</code> coordinate is always 0, unless a floor is otherwise established. These space types are <em>not</em> viable if the rooms have uneven floors or floors whose height above ground level vary, since they don't support the avatar's vertical position changing.</p>
<h4 id="the_primary_reference_space_types">The primary reference space types</h4>
<p>The <code>viewer</code> reference space corresponds to the viewer's position in space; it's used by the <a href="../XRViewerPose.html"><code>XRViewerPose</code></a> returned by the <a href="../XRFrame.html"><code>XRFrame</code></a> method <a href="../XRFrame/getViewerPose.html" title="getViewerPose()"><code>getViewerPose()</code></a>. It's not typically used directly otherwise. The only real exception is that you are likely to use the <code>viewer</code> reference space when performing the XR scene inline within web content.</p>
<p>The <code>local</code> reference space is typically used to describe a relatively small area, such as a single room. It is not only always available when using an immersive session mode (<code>immersive-vr</code> or <code>immersive-ar</code>), but is always included among the optional features when requesting a new session; thus, every session created by <a href="../XRSystem/requestSession.html" title="navigator.xr.requestSession()"><code>navigator.xr.requestSession()</code></a> supports the <code>local</code> reference space type.</p>
<p>To represent a large area—potentially involving multiple rooms or beyond—you can use the <code>unbounded</code> reference space type, which specifies no constraints on the viewer's movement. If you wish to prevent the user from moving into certain areas, you must handle that yourself.</p>
<p>The <code>bounded-floor</code> reference space type doesn't have a corresponding one that isn't floor-bound. If the user's XR hardware permits them to move about their real-world space, and you are able to do so, it may be useful to use a <code>bounded-floor</code> reference space, which lets you specifically define the boundaries of the area in which passage is allowed and safe. See the article <a href="Bounded_reference_spaces.html">Using bounded reference spaces</a> to learn more about the use of bounded reference spaces.</p>
<p>By using a reference space to describe the position and orientation of objects, WebXR is able to standardize the form of the data you use to describe these things, regardless of the underlying XR hardware. The reference space's configuration is then able to provide you with the view matrices and object poses needed to correctly render the contents of the space.</p></div></section><section aria-labelledby="establishing_the_reference_space"><h3 id="establishing_the_reference_space"><a href="#establishing_the_reference_space">Establishing the reference space</a></h3><div class="section-content"><p>The topmost space—the one obtained by calling the <a href="../XRSession.html"><code>XRSession</code></a> method <a href="../XRSession/requestReferenceSpace.html" title="requestReferenceSpace()"><code>requestReferenceSpace()</code></a>—describes the coordinate system used for the overall world space. Everything is fundamentally tied to this coordinate system, which represents the relationship between the user's equipment's position and the virtual world.</p>
<p>While you can use WebXR for everything from augmenting the world with annotations to 360° video playback to scientific simulations to virtual reality training systems or anything else you can imagine, let's take a 3D video game as an example of a typical WebXR application. Consider the model of a player's avatar standing in the game world's space. You position that avatar relative to the world space, using the coordinate system defined by the world's reference space.</p>
<p>To move the player to a new position, you could rewrite all of its coordinates or manually apply a transform each time they move, but there's an easier way, thanks to reference spaces and their ability to be created relative to one another. Create an <a href="../XRRigidTransform.html"><code>XRRigidTransform</code></a> object representing the new position and orientation of the player's avatar, then create a new reference space to represent the avatar's point of view at the new position using the <a href="../XRReferenceSpace.html"><code>XRReferenceSpace</code></a> method <a href="../XRReferenceSpace/getOffsetReferenceSpace.html" title="getOffsetReferenceSpace()"><code>getOffsetReferenceSpace()</code></a>. This comes in especially handy when implementing support for using non-XR devices such as keyboards or mice to move the player's avatar through the world.</p><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/nVSlQkSSQeQ" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" loading="lazy"></iframe>
<p>With the newly-created reference space, the avatar can remain at the same coordinates yet appear in the world to be located at (and be see the world from the perspective of) its new location. For a more detailed look at how to use reference spaces to manage the player's viewpoint, see the article</p>
<p>In the case of our game avatar example, it's rare for an avatar (or any other moving creature or machine) to be a simple blob sliding around the world. They usually have additional form, as well as internal movement, such as moving legs, arms that swing as they walk, a head that turns or bobs, weapons that move around, and so forth. Bring these to life using standard WebGL techniques and a positioning matrix or <a href="../XRRigidTransform.html"><code>XRRigidTransform</code></a> to shift the objects to the correct position relative to the effective origin.</p></div></section><section aria-labelledby="device_limitations_on_reference_spaces"><h3 id="device_limitations_on_reference_spaces"><a href="#device_limitations_on_reference_spaces">Device limitations on reference spaces</a></h3><div class="section-content"><p>Some XR devices can't be made to support a given experience, despite the efforts the API goes to in order to make up for any missing capabilities. For example, there's no way for a basic headset such as a GearVR device to be made to work in an app that requires support for allowing the user to walk around the environment by tracking their real-world movements.</p>
<p>To support progressive enhancement—and thus broaden the availability of your app or site—you should choose a reference space that offers the lowest amount of functionality needed, or provide a fallback mechanism that detects failed attempts to obtain reference spaces and tries again with a less powerful alternative.</p>
<p>The compatibility issues that arise may be as fundamental as being unable to support <code>immersive-ar</code> mode (augmented reality sessions) on a VR-only headset, or may involve a request for one or more required options which cannot be met when attempting to create the XR session.</p>
<p>XR sessions are created using the <a href="../XRSystem/requestSession.html" title="navigator.xr.requestSession()"><code>navigator.xr.requestSession()</code></a> method. One of its optional parameters is an object which you can use to specify required and/or optional features that the session must (or should ideally) support. Currently, the only supported options are strings identifying the standard reference spaces. Using these, you can ensure before your code even runs that you have access to a WebXR session that can support the reference space type you require or prefer.</p>
<div class="notecard note" id="sect3">
  <p><strong>Note:</strong> At this time, the reference space to use or to prefer is the only option available when creating an <a href="../XRSession.html"><code>XRSession</code></a>. In the future, it's likely that more options will become available.</p>
</div></div></section><section aria-labelledby="positioning_and_orienting_objects"><a class="dashAnchor" name="//apple_ref/Section/Positioning%20and%20orienting%20objects"></a><h2 id="positioning_and_orienting_objects"><a href="#positioning_and_orienting_objects">Positioning and orienting objects</a></h2><div class="section-content"><p>All spatial (position, orientation, and movement) information exchanged between your app and the WebXR API is expressed in relation to a specific space at the time the frame is being rendered. Any further position and orientation management is between you and WebGL, though you do make use of the origin offset from the reference space in order to position the objects correctly in the 3D world.</p>
<p>When it's time to render an animation frame, the callback function specified when you called the WebXR session's <a href="../XRSession.html"><code>XRSession</code></a> object's <a href="../XRSession/requestAnimationFrame.html" title="requestAnimationFrame()"><code>requestAnimationFrame()</code></a> method is invoked. The callback receives as one of its parameters a timestamp indicating the time at which the frame takes place, and should perform all rendering for the corresponding animation frame.</p>
<p>As the callback is repeatedly called with increasing time values, the callback generates a sequence of frames which are presented using the XR hardware, thereby showing a 3D scene to the user.</p>
<p>You can learn more about the animation process in the article <a href="Rendering.html">Rendering and the WebXR frame animation callback</a>.</p>
<p>For an example and a more detailed, code-level explanation of how to position, orient, and move objects in virtual space, see the article <a href="Movement_and_motion.html">Movement, orientation, and motion</a>.</p></div></section><section aria-labelledby="see_also"><a class="dashAnchor" name="//apple_ref/Section/See%20also"></a><h2 id="see_also"><a href="#see_also">See also</a></h2><div class="section-content"><ul>
  <li><a href="../WebXR_Device_API.html">WebXR Device API</a></li>
  <li><a href="../WebGL_API.html">WebGL: 2D and 3D rendering for the web</a></li>
  <li><a href="../WebGL_API/Matrix_math_for_the_web.html">Matrix math for the web</a></li>
</ul></div></section><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a content problem with this page?</h3><ul><li>Edit the page <a href="https://github.com/mdn/content/edit/main/files/en-us/web/api/webxr_device_api/geometry/index.md" title="This will take you to GitHub, where you'll need to sign in first." target="_blank" rel="noopener noreferrer">on GitHub</a>.</li><li>Report the <a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FWebXR_Device_API%2FGeometry&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fapi%2Fwebxr_device_api%2Fgeometry%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FWebXR_Device_API%2FGeometry%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fapi%2Fwebxr_device_api%2Fgeometry%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2Ff7dae62645a2c735ed6f6ed63f664bf279fdfc4b%0A*+Document+last+modified%3A+2022-09-09T05%3A19%3A45.000Z%0A%0A%3C%2Fdetails%3E" title="This will take you to GitHub to file a new issue." target="_blank" rel="noopener noreferrer">content issue</a>.</li><li>View the source <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/webxr_device_api/geometry/index.md?plain=1" title="Folder: en-us/web/api/webxr_device_api/geometry (Opens in a new tab)" target="_blank" rel="noopener noreferrer">on GitHub</a>.</li></ul>Want to get more involved? Learn<!-- --> <a href="https://github.com/mdn/content/blob/main/CONTRIBUTING.md" title="This will take you to our contribution guidelines on GitHub." target="_blank" rel="noopener noreferrer">how to contribute</a>.</div><p class="last-modified-date">This page was last modified on<!-- --> <time datetime="2022-09-09T05:19:45.000Z">Sep 9, 2022</time> by<!-- --> <a href="Geometry/contributors.txt">MDN contributors</a>.</p></div></aside></article></main></div><footer id="nav-footer" class="page-footer"><div><a href="http://developer.mozilla.org/en-US/docs/Web/API/WebXR_Device_API/Geometry">Geometry and reference spaces in WebXR</a> by <a href="http://developer.mozilla.org/en-US/docs/Web/API/WebXR_Device_API/Geometry$history">Mozilla Contributors</a> is licensed under <a href="http://creativecommons.org/licenses/by-sa/2.5/">CC-BY-SA 2.5</a>.</div></footer></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Geometry and reference spaces in WebXR","mdn_url":"/en-US/docs/Web/API/WebXR_Device_API/Geometry","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/WebXR_Device_API\">WebXR Device API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Guides</summary><ol><li><a href=\"/en-US/docs/Web/API/WebXR_Device_API/Fundamentals\">Fundamentals of WebXR</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/en-US/docs/Web/API/XRAnchor\"><code>XRAnchor</code></a></li><li><a href=\"/en-US/docs/Web/API/XRBoundedReferenceSpace\"><code>XRBoundedReferenceSpace</code></a></li><li><a href=\"/en-US/docs/Web/API/XRCPUDepthInformation\"><code>XRCPUDepthInformation</code></a></li><li><a href=\"/en-US/docs/Web/API/XRDepthInformation\"><code>XRDepthInformation</code></a></li><li><a href=\"/en-US/docs/Web/API/XRFrame\"><code>XRFrame</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSource\"><code>XRInputSource</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSourceArray\"><code>XRInputSourceArray</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSourceEvent\"><code>XRInputSourceEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSourcesChangeEvent\"><code>XRInputSourcesChangeEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/XRPose\"><code>XRPose</code></a></li><li><a href=\"/en-US/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a></li><li><a href=\"/en-US/docs/Web/API/XRReferenceSpaceEvent\"><code>XRReferenceSpaceEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/XRRenderState\"><code>XRRenderState</code></a></li><li><a href=\"/en-US/docs/Web/API/XRRigidTransform\"><code>XRRigidTransform</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSession\"><code>XRSession</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSessionEvent\"><code>XRSessionEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSpace\"><code>XRSpace</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSystem\"><code>XRSystem</code></a></li><li><a href=\"/en-US/docs/Web/API/XRView\"><code>XRView</code></a></li><li><a href=\"/en-US/docs/Web/API/XRViewerPose\"><code>XRViewerPose</code></a></li><li><a href=\"/en-US/docs/Web/API/XRViewport\"><code>XRViewport</code></a></li><li><a href=\"/en-US/docs/Web/API/XRWebGLBinding\"><code>XRWebGLBinding</code></a></li><li><a href=\"/en-US/docs/Web/API/XRWebGLDepthInformation\"><code>XRWebGLDepthInformation</code></a></li><li><a href=\"/en-US/docs/Web/API/XRWebGLLayer\"><code>XRWebGLLayer</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Properties</summary><ol><li><a href=\"/en-US/docs/Web/API/Navigator/xr\"><code>Navigator.xr</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Methods</summary><ol><li><a href=\"/en-US/docs/Web/API/WebGLRenderingContext/makeXRCompatible\"><code>WebGLRenderingContext.makeXRCompatible()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Events</summary><ol><li><a href=\"/en-US/docs/Web/API/XRReferenceSpace/reset_event\"><code>XRReferenceSpace</code>: <code>reset</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSession/end_event\"><code>XRSession</code>: <code>end</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSession/inputsourceschange_event\"><code>XRSession</code>: <code>inputsourceschange</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSession/select_event\"><code>XRSession</code>: <code>select</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSession/selectend_event\"><code>XRSession</code>: <code>selectend</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSession/selectstart_event\"><code>XRSession</code>: <code>selectstart</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSession/visibilitychange_event\"><code>XRSession</code>: <code>visibilitychange</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSystem/devicechange_event\"><code>XRSystem</code>: <code>devicechange</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>At a fundamental level, rendering of scenes for <a href=\"/en-US/docs/Web/API/WebXR_Device_API\">WebXR</a> presentation in either augmented reality or virtual reality contexts is performed using <a href=\"/en-US/docs/Web/API/WebGL_API\">WebGL</a>, so the two APIs share much of the same design language. However, in order to provide the ability to present scenes in true 3D using XR headsets and other such equipment, WebXR has additional concepts that must be understood.</p>\n<p>In this article, we introduce the ways in which WebXR expands upon the geometry of WebGL, and how the positions and orientations of objects—both physical and virtual—are described in relation to one another using spaces and, in particular, reference spaces.</p>\n<p>The article <a href=\"/en-US/docs/Web/API/WebXR_Device_API/Spatial_tracking\">Spatial tracking in WebXR</a> builds upon the information provided here to cover how the physical position and orientation of the user's head, as well as potentially other parts of their body such as the hands, are mapped into the digital world, as well as how the relative positions of both physical and virtual objects are tracked as they move around, so that the scene can be properly rendered and composited.</p>"}},{"type":"prose","value":{"id":"fundamentals_of_3d_geometry","title":"Fundamentals of 3D geometry","isH3":false,"content":"<p>While we'll examine here the required math operations used to compute the positions, orientations, and movement of objects in virtual space—plus the need to integrate the human viewer of the scene into the mix—a thorough introduction to geometry and the use of matrices and vectors to manage 3D representations of a scene is well beyond the scope of what can be accomplished in this article. You can learn more about the individual operations in <a href=\"/en-US/docs/Web/API/WebGL_API/Matrix_math_for_the_web\">Matrix math for the web</a>.</p>"}},{"type":"prose","value":{"id":"units","title":"Units","isH3":true,"content":"<p>Before discussing the details of the geometry of the 3D space used by WebXR, it's first useful to understand the units of measure that are applied to the 3D world.</p>\n<h4 id=\"lengths_and_distances\">Lengths and distances</h4>\n<p>WebGL measures all distances and lengths in <strong>meters</strong>. WebXR inherits this standard, as well as the fact that the world is a cube two meters wide, two meters tall, and two meters deep. Each of the three axes has a minimum value of -1.0 and a maximum of 1.0, with the center of the cube located at (0, 0, 0).</p>\n<p>\n  <img src=\"/en-US/docs/Web/API/WebXR_Device_API/Geometry/defaultspacedimensions.svg\" alt=\"Diagram showing a WebXR space whose X, Y, and Z coordinate axes each have a minimum value of -1 and a maximum of 1.\" width=\"730\" height=\"438\" loading=\"lazy\">\n</p>\n<p>This eight cubic meter space encompasses the entire universe for the purposes of your code. Everything you draw must have its coordinates mapped to fit into this space, either explicitly within your code, or by using a transform to adjust the coordinates of all vertices. The most efficient way, of course, is to design your objects and code to use the same coordinate system as WebGL does.</p>\n<p>The WebGL coordinates and lengths are transformed automatically at render time to the size of the viewport in which the scene is being rendered.</p>\n<h4 id=\"angles\">Angles</h4>\n<p>Angles are specified using <strong><a href=\"https://en.wikipedia.org/wiki/Radians\" class=\"external\" target=\"_blank\">radians</a></strong>. To convert degrees to radians, multiply the value in degrees by <code>π/180</code>. The following code snippet shows two simple functions, <code>degreesToRadians()</code> and <code>radiansToDegrees()</code>, which convert back and forth between the two units for measuring angles.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> <span class=\"token constant\">RADIANS_PER_DEGREE</span> <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">/</span> <span class=\"token number\">180.0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">degreesToRadians</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">deg</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> deg <span class=\"token operator\">*</span> <span class=\"token constant\">RADIANS_PER_DEGREE</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">radiansToDegrees</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">rad</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> rad <span class=\"token operator\">/</span> <span class=\"token constant\">RADIANS_PER_DEGREE</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h4 id=\"times_and_durations\">Times and durations</h4>\n<div class=\"notecard note\" id=\"sect1\">\n  <p>\n    <strong>Note:</strong> For security reasons, <code>DOMHighResTimeStamp</code> usually introduces a\n    small amount of imprecision to the clock in order to prevent it from being used in <a href=\"/en-US/docs/Web/Privacy#fingerprinting\">fingerprinting</a> and timing-based\n    attacks.\n  </p>\n</div>\n<p>All times and durations in WebXR are measured using the <a href=\"/en-US/docs/Web/API/DOMHighResTimeStamp\"><code>DOMHighResTimeStamp</code></a> type, which is a double-precision floating-point value specifying the time in milliseconds relative to the starting time. Since the value is a floating-point number, it may be accurate to well better than the millisecond level, depending on the platform and hardware.</p>\n<p>Time is primarily used to determine the amount of time that's elapsed since the scene's previous animation frame was drawn. As such the time is typically in alignment with the refresh rate of the display, or some fraction thereof if the frame rate needs to be constrained due to performance issues. This means that the time will usually step in 1/60th of a second intervals, assuming a 60 FPS frame rate. Doing the math, we find that this means that each frame will ideally be rendered 16.6667 milliseconds apart.</p>"}},{"type":"prose","value":{"id":"geometry_operations_with_matrices","title":"Geometry operations with matrices","isH3":true,"content":"<p>We offer a <a href=\"/en-US/docs/Web/API/WebGL_API/Matrix_math_for_the_web\">guide to matrix mathematics as it pertains to 3D geometry</a>, including how matrices are used for the three primary transforms that need to be performed when rendering 3D scenes:</p>\n<ul>\n  <li><strong><a href=\"/en-US/docs/Web/API/WebGL_API/Matrix_math_for_the_web#translation_matrix\">Translation</a></strong> is the use of a matrix to shift the position of a point through the virtual space. This motion can be along any of the object's axes, or any combination of them.</li>\n  <li><strong><a href=\"/en-US/docs/Web/API/WebGL_API/Matrix_math_for_the_web#rotation_matrix\">Rotation</a></strong> is the application of a matrix that rotates a point around the origin of the object's coordinate system.</li>\n  <li><strong><a href=\"/en-US/docs/Web/API/WebGL_API/Matrix_math_for_the_web#scale_matrix\">Scaling</a></strong> is the use of a matrix to alter the size of an object.</li>\n</ul>\n<p>Note that when we say that a transform applies to a point, it also, by extension, can be applied to a <em>collection</em> of points. Since an object is represented by some number of polygons made up of a number of points in space, applying the same transform to every point that makes up the object will apply that same transform to the entire object overall. Transforms can also be applied to vectors, since vectors are described using a coordinate value to define the direction and magnitude of the vector.</p>"}},{"type":"prose","value":{"id":"on_the_origins_of_spaces","title":"On the origins of spaces","isH3":false,"content":"<p>A complete XR-enhanced scene—whether virtual or augmented—is a composite of anywhere from one to potentially dozens of frames of reference. Each object within the scene that needs to directly exchange position and orientation data with the WebXR system needs to be able to report that information in a way that can be understood and adapted as needed to be comprehensible by other objects within the scene.</p>\n<p>In augmented reality (AR), this is because of the need to insert virtual objects into the real world, not only placing them correctly but also ensuring that they don't seem to wander around on their own as the user's perspective shifts. In virtual reality (VR), it's all about creating a sense of space in which the user's movements are precisely matched by the imagery presented on the virtual display, to prevent disjoints and disconnects that could cause discomfort or worse.</p>\n<p>Thus it's all about creating a sense of space. From the perspective of an XR developer, designing the stage is the part that matters most to your users. Like an architect or a set designer, you have the power to create moods and experiences through a physical environment. How you structure that space will both depend on and influence how users can interact and explore it.</p>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note:</strong> A space will typically have foreground, mid-distance, and background elements. The right balance can create a unique presence and guide your user. The foreground includes objects and interfaces that you can interact with directly. The mid-distance includes objects you can interact with to some extent, or can approach in order to examine and engage with more closely. The background, on the other hand, is usually largely or entirely non-interactive, at least until and unless the user is able to approach it, bringing it into the mid-distance or foreground range.</p>\n</div>\n<p>In WebXR, the fundamental concept of a <strong>space</strong>—as in, a coordinate space in which a scene takes place—is represented by an instance of <a href=\"/en-US/docs/Web/API/XRSpace\"><code>XRSpace</code></a>. The space is used to make determinations about the relative positions and motion of objects and other entities (such as light sources and cameras) within the user's environment.</p>\n<p>As mentioned earlier, any given 3D point consists of three components, each identifying the distance from the center of the space along one of the three axes.</p>\n<p>This is the <strong>native origin</strong> of the space, corresponding to a specific physical location in the user's environment. Each space has its own native origin, which is tracked by the XR device's tracking system. This may be different from the <strong>effective origin</strong>, which is the origin point for the space's local coordinate system.</p>\n<p>The directionality of the coordinate system can be seen in the following diagram:</p>\n<p>\n  <img src=\"/en-US/docs/Web/API/WebXR_Device_API/Geometry/webgl_coordinates.svg\" alt=\"Diagram showing the coordinate system used by WebGL and WebXR.\" width=\"487\" height=\"487\" loading=\"lazy\">\n</p>\n<p>An <a href=\"/en-US/docs/Web/API/XRRigidTransform\"><code>XRRigidTransform</code></a> called the <strong>origin offset</strong> is used to transform points from the space's own effective coordinate system to the XR device's native coordinate system. The origin offset is initially an identity transform, since typically the two origins are aligned when the space is first established. However, as changes in alignment accumulate over time the origin offset may change to compensate.</p>\n<p>The position of a point in space relative to the origin is determined by determining its distance along each of the three spatial axes shown in the diagram above. The space's origin is the point (0, 0, 0), at the center of the space and at the zero position along each axis. Specifically, under the initial starting conditions, with the default orientation of the viewer upon the space:</p>\n<ul>\n  <li>The <strong>x-axis</strong> extends horizontally from left to right away from the origin, with the <em>x</em> coordinate of +1.0 being located at the right edge of the world. Negative values of <em>x</em> extend toward the left from the origin, reaching a value of -1.0 at the left edge of the space.</li>\n  <li>The <strong>y-axis</strong> is positive extending upward from the origin toward the top of the screen, reaching +1.0 at the top of the world space. Values of <em>y</em> less than 0 are found below the origin, extending toward the bottom of the screen and reaching -1.0 at the bottom of the world's space.</li>\n  <li>The <strong>z-axis</strong> extends from the origin outward from the screen, reaching +1.0 at the closest point to the user in that direction. Negative values of <em>z</em> extend away from the user further into the screen, with the farthest away point in the world having a <em>z</em> of -1.0.</li>\n</ul>\n<p>Every object is, at the simplest level, a set of polygons defined by points in 3D space and an offset transform, indicating how to move and rotate the object to position it at the desired point in space. If the offset transform is an identity matrix, the object is located at the origin point.</p>\n<p>To be useful for spatial tracking and scene geometry, though, you need to be able to correlate the XR device's perceived position with the space's coordinate system. That's where reference spaces come in.</p>"}},{"type":"prose","value":{"id":"reference_spaces","title":"Reference spaces","isH3":false,"content":"<p>Because of the variety of XR hardware available, coming in a wide variety of form factors from many developers, it's impractical and non-scalable to expect developers to have to directly communicate with the tracking technology being used. Instead, the <a href=\"/en-US/docs/Web/API/WebXR_Device_API\">WebXR Device API</a> is designed to have developers plan their users' experiences and request an appropriate reference space that best represents those needs. This is done by asking the <a href=\"/en-US/docs/Glossary/User_agent\">user agent</a> for an <strong><a href=\"/en-US/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a></strong> matching those needs.</p>\n<p>An <code>XRReferenceSpace</code> object acts as a means to adapt one coordinate system reference frame to another. After putting on a headset, consider the virtual world around you to have a coordinate system in which your position is (0, 0, 0)—that is, you're at the center of everything. Doesn't that feel empowering? Forward, directly in front of your headset, is the -Z axis, with +Z behind you. X is positive to your right and negative to your left. Y is negative as you go downward and positive as you go upward. This indicates the position of the headset in space at the start of your use of the XR system, with the origin (0, 0, 0) being positioned basically at the bridge of your nose. This space is the <strong>world space</strong>.</p>\n<p>Next, consider the XR controller you have in your left hand. It has the ability to report movement and its orientation, but it doesn't know anything about the position of the headset or, more crucially, its coordinate system. But the controller still needs a way to report its position to your app. Thus, it has its own coordinate system. This is a reference space which is provided to your app when input events occur. This reference space internally knows how to map the coordinates of the controller to the headset's coordinates, so WebXR can translate coordinates back and forth for you.</p>\n<p>Once created, an <code>XRReferenceSpace</code> guarantees a certain level of support for motion and orientation tracking, and provides a mechanism for obtaining an <a href=\"/en-US/docs/Web/API/XRViewerPose\"><code>XRViewerPose</code></a> from which you can get a matrix which represents the position and facing direction of the space relative to the world space, if the space represents a viewer such as the user's headset, an observer's headset, or a virtual camera.</p>\n<p>All of this is the browser's responsibility to handle, providing consistent behavior regardless of how capable each of the underlying reference spaces are. No matter how powerful or simple the individual XR device is, code written using WebXR will still work, within the limitations of the available hardware.</p>\n<p>Regardless of the type of reference space you choose, its type is <a href=\"/en-US/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a> or is a type derived from <code>XRReferenceSpace</code>. The currently available reference space types, are shown below.</p>\n<dl>\n  <dt id=\"bounded-floor\"><code>bounded-floor</code></dt>\n  <dd>\n    <p>An <a href=\"/en-US/docs/Web/API/XRBoundedReferenceSpace\"><code>XRBoundedReferenceSpace</code></a> similar to the <code>local</code> type, except the user is not expected to move outside a predetermined boundary, given by the <a href=\"/en-US/docs/Web/API/XRBoundedReferenceSpace/boundsGeometry\" title=\"boundsGeometry\"><code>boundsGeometry</code></a> in the returned object.</p>\n  </dd>\n  <dt id=\"local\"><code>local</code></dt>\n  <dd>\n    <p>An <a href=\"/en-US/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a> tracking space whose native origin is located near the viewer's position at the time the session was created. The exact position depends on the underlying platform and implementation. The user isn't expected to move much if at all beyond their starting position, and tracking is optimized for this use case. For devices with six degrees of freedom (6DoF) tracking, the <code>local</code> reference space tries to keep the origin stable relative to the environment.</p>\n  </dd>\n  <dt id=\"local-floor\"><code>local-floor</code></dt>\n  <dd>\n    <p>An <a href=\"/en-US/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a> similar to the <code>local</code> type, except the starting position is placed in a safe location for the viewer to stand, where the value of the y axis is 0 at floor level. If that floor level isn't known, the <a href=\"/en-US/docs/Glossary/User_agent\">user agent</a> will estimate the floor level. If the estimated floor level is non-zero, the browser is expected to round it such a way as to avoid fingerprinting (likely to the nearest centimeter).</p>\n  </dd>\n  <dt id=\"unbounded\"><code>unbounded</code></dt>\n  <dd>\n    <p>An <a href=\"/en-US/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a> tracking space which allows the user total freedom of movement, possibly over extremely long distances from their origin point. The viewer isn't tracked at all; tracking is optimized for stability around the user's current position, so the native origin may drift as needed to accommodate that need.</p>\n  </dd>\n  <dt id=\"viewer\"><code>viewer</code></dt>\n  <dd>\n    <p>An <a href=\"/en-US/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a> tracking space whose native origin tracks the viewer's position and orientation. This is used for environments in which the user can physically move around, and is supported by all instances of <a href=\"/en-US/docs/Web/API/XRSession\"><code>XRSession</code></a>, both immersive and inline, though it's most useful for inline sessions. It's particularly useful when determining the distance between the viewer and an input, or when working with offset spaces. Otherwise, typically, one of the other reference space types will be used more often.</p>\n  </dd>\n</dl>\n<p>The remainder of this guide explores how to select the right reference space for your app's needs.</p>"}},{"type":"prose","value":{"id":"defining_spatial_relationships_with_reference_spaces","title":"Defining spatial relationships with reference spaces","isH3":false,"content":"<p>There are a number of commonly used ways to reference the positions and orientations of objects relative to their environment, as well as to constrain the environment itself. To that end, WebXR defines a set of standard spaces, called <strong>reference spaces</strong>, each of which supports a different technique for correlating its local space's reference frame coordinate system to the coordinate system of the space in which it exists.</p>\n<p>However, regardless of which type of reference space is being used, you can use the same functions to convert coordinates from space to parent space.</p>"}},{"type":"prose","value":{"id":"selecting_the_reference_space_type","title":"Selecting the reference space type","isH3":true,"content":"<p>Straight off, let's state the simplest step in the process of deciding which reference type to use: the reference spaces you're most likely to use are <code>local</code>, <code>local-floor</code>, <code>unbounded</code>, or <code>bounded-floor</code>.</p>\n<h4 id=\"floor_level_reference_spaces\">Floor level reference spaces</h4>\n<p>The reference space types with <code>-floor</code> in their names work just like the corresponding non-floor spaces, except that they attempt to automatically ensure that the viewer is positioned in a safe place at or near (but always above) ground level. This is the plane at which the <code>y</code> coordinate is always 0, unless a floor is otherwise established. These space types are <em>not</em> viable if the rooms have uneven floors or floors whose height above ground level vary, since they don't support the avatar's vertical position changing.</p>\n<h4 id=\"the_primary_reference_space_types\">The primary reference space types</h4>\n<p>The <code>viewer</code> reference space corresponds to the viewer's position in space; it's used by the <a href=\"/en-US/docs/Web/API/XRViewerPose\"><code>XRViewerPose</code></a> returned by the <a href=\"/en-US/docs/Web/API/XRFrame\"><code>XRFrame</code></a> method <a href=\"/en-US/docs/Web/API/XRFrame/getViewerPose\" title=\"getViewerPose()\"><code>getViewerPose()</code></a>. It's not typically used directly otherwise. The only real exception is that you are likely to use the <code>viewer</code> reference space when performing the XR scene inline within web content.</p>\n<p>The <code>local</code> reference space is typically used to describe a relatively small area, such as a single room. It is not only always available when using an immersive session mode (<code>immersive-vr</code> or <code>immersive-ar</code>), but is always included among the optional features when requesting a new session; thus, every session created by <a href=\"/en-US/docs/Web/API/XRSystem/requestSession\" title=\"navigator.xr.requestSession()\"><code>navigator.xr.requestSession()</code></a> supports the <code>local</code> reference space type.</p>\n<p>To represent a large area—potentially involving multiple rooms or beyond—you can use the <code>unbounded</code> reference space type, which specifies no constraints on the viewer's movement. If you wish to prevent the user from moving into certain areas, you must handle that yourself.</p>\n<p>The <code>bounded-floor</code> reference space type doesn't have a corresponding one that isn't floor-bound. If the user's XR hardware permits them to move about their real-world space, and you are able to do so, it may be useful to use a <code>bounded-floor</code> reference space, which lets you specifically define the boundaries of the area in which passage is allowed and safe. See the article <a href=\"/en-US/docs/Web/API/WebXR_Device_API/Bounded_reference_spaces\">Using bounded reference spaces</a> to learn more about the use of bounded reference spaces.</p>\n<p>By using a reference space to describe the position and orientation of objects, WebXR is able to standardize the form of the data you use to describe these things, regardless of the underlying XR hardware. The reference space's configuration is then able to provide you with the view matrices and object poses needed to correctly render the contents of the space.</p>"}},{"type":"prose","value":{"id":"establishing_the_reference_space","title":"Establishing the reference space","isH3":true,"content":"<p>The topmost space—the one obtained by calling the <a href=\"/en-US/docs/Web/API/XRSession\"><code>XRSession</code></a> method <a href=\"/en-US/docs/Web/API/XRSession/requestReferenceSpace\" title=\"requestReferenceSpace()\"><code>requestReferenceSpace()</code></a>—describes the coordinate system used for the overall world space. Everything is fundamentally tied to this coordinate system, which represents the relationship between the user's equipment's position and the virtual world.</p>\n<p>While you can use WebXR for everything from augmenting the world with annotations to 360° video playback to scientific simulations to virtual reality training systems or anything else you can imagine, let's take a 3D video game as an example of a typical WebXR application. Consider the model of a player's avatar standing in the game world's space. You position that avatar relative to the world space, using the coordinate system defined by the world's reference space.</p>\n<p>To move the player to a new position, you could rewrite all of its coordinates or manually apply a transform each time they move, but there's an easier way, thanks to reference spaces and their ability to be created relative to one another. Create an <a href=\"/en-US/docs/Web/API/XRRigidTransform\"><code>XRRigidTransform</code></a> object representing the new position and orientation of the player's avatar, then create a new reference space to represent the avatar's point of view at the new position using the <a href=\"/en-US/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a> method <a href=\"/en-US/docs/Web/API/XRReferenceSpace/getOffsetReferenceSpace\" title=\"getOffsetReferenceSpace()\"><code>getOffsetReferenceSpace()</code></a>. This comes in especially handy when implementing support for using non-XR devices such as keyboards or mice to move the player's avatar through the world.</p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/nVSlQkSSQeQ\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" loading=\"lazy\"></iframe>\n<p>With the newly-created reference space, the avatar can remain at the same coordinates yet appear in the world to be located at (and be see the world from the perspective of) its new location. For a more detailed look at how to use reference spaces to manage the player's viewpoint, see the article</p>\n<p>In the case of our game avatar example, it's rare for an avatar (or any other moving creature or machine) to be a simple blob sliding around the world. They usually have additional form, as well as internal movement, such as moving legs, arms that swing as they walk, a head that turns or bobs, weapons that move around, and so forth. Bring these to life using standard WebGL techniques and a positioning matrix or <a href=\"/en-US/docs/Web/API/XRRigidTransform\"><code>XRRigidTransform</code></a> to shift the objects to the correct position relative to the effective origin.</p>"}},{"type":"prose","value":{"id":"device_limitations_on_reference_spaces","title":"Device limitations on reference spaces","isH3":true,"content":"<p>Some XR devices can't be made to support a given experience, despite the efforts the API goes to in order to make up for any missing capabilities. For example, there's no way for a basic headset such as a GearVR device to be made to work in an app that requires support for allowing the user to walk around the environment by tracking their real-world movements.</p>\n<p>To support progressive enhancement—and thus broaden the availability of your app or site—you should choose a reference space that offers the lowest amount of functionality needed, or provide a fallback mechanism that detects failed attempts to obtain reference spaces and tries again with a less powerful alternative.</p>\n<p>The compatibility issues that arise may be as fundamental as being unable to support <code>immersive-ar</code> mode (augmented reality sessions) on a VR-only headset, or may involve a request for one or more required options which cannot be met when attempting to create the XR session.</p>\n<p>XR sessions are created using the <a href=\"/en-US/docs/Web/API/XRSystem/requestSession\" title=\"navigator.xr.requestSession()\"><code>navigator.xr.requestSession()</code></a> method. One of its optional parameters is an object which you can use to specify required and/or optional features that the session must (or should ideally) support. Currently, the only supported options are strings identifying the standard reference spaces. Using these, you can ensure before your code even runs that you have access to a WebXR session that can support the reference space type you require or prefer.</p>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>Note:</strong> At this time, the reference space to use or to prefer is the only option available when creating an <a href=\"/en-US/docs/Web/API/XRSession\"><code>XRSession</code></a>. In the future, it's likely that more options will become available.</p>\n</div>"}},{"type":"prose","value":{"id":"positioning_and_orienting_objects","title":"Positioning and orienting objects","isH3":false,"content":"<p>All spatial (position, orientation, and movement) information exchanged between your app and the WebXR API is expressed in relation to a specific space at the time the frame is being rendered. Any further position and orientation management is between you and WebGL, though you do make use of the origin offset from the reference space in order to position the objects correctly in the 3D world.</p>\n<p>When it's time to render an animation frame, the callback function specified when you called the WebXR session's <a href=\"/en-US/docs/Web/API/XRSession\"><code>XRSession</code></a> object's <a href=\"/en-US/docs/Web/API/XRSession/requestAnimationFrame\" title=\"requestAnimationFrame()\"><code>requestAnimationFrame()</code></a> method is invoked. The callback receives as one of its parameters a timestamp indicating the time at which the frame takes place, and should perform all rendering for the corresponding animation frame.</p>\n<p>As the callback is repeatedly called with increasing time values, the callback generates a sequence of frames which are presented using the XR hardware, thereby showing a 3D scene to the user.</p>\n<p>You can learn more about the animation process in the article <a href=\"/en-US/docs/Web/API/WebXR_Device_API/Rendering\">Rendering and the WebXR frame animation callback</a>.</p>\n<p>For an example and a more detailed, code-level explanation of how to position, orient, and move objects in virtual space, see the article <a href=\"/en-US/docs/Web/API/WebXR_Device_API/Movement_and_motion\">Movement, orientation, and motion</a>.</p>"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/WebXR_Device_API\">WebXR Device API</a></li>\n  <li><a href=\"/en-US/docs/Web/API/WebGL_API\">WebGL: 2D and 3D rendering for the web</a></li>\n  <li><a href=\"/en-US/docs/Web/API/WebGL_API/Matrix_math_for_the_web\">Matrix math for the web</a></li>\n</ul>"}}],"toc":[{"text":"Fundamentals of 3D geometry","id":"fundamentals_of_3d_geometry"},{"text":"On the origins of spaces","id":"on_the_origins_of_spaces"},{"text":"Reference spaces","id":"reference_spaces"},{"text":"Defining spatial relationships with reference spaces","id":"defining_spatial_relationships_with_reference_spaces"},{"text":"Positioning and orienting objects","id":"positioning_and_orienting_objects"},{"text":"See also","id":"see_also"}],"summary":"At a fundamental level, rendering of scenes for WebXR presentation in either augmented reality or virtual reality contexts is performed using WebGL, so the two APIs share much of the same design language. However, in order to provide the ability to present scenes in true 3D using XR headsets and other such equipment, WebXR has additional concepts that must be understood.","popularity":0,"modified":"2022-09-09T05:19:45.000Z","other_translations":[{"title":"WebXR の形状と参照空間","locale":"ja","native":"日本語"}],"source":{"folder":"en-us/web/api/webxr_device_api/geometry","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/webxr_device_api/geometry/index.md","last_commit_url":"https://github.com/mdn/content/commit/f7dae62645a2c735ed6f6ed63f664bf279fdfc4b","filename":"index.md"},"short_title":"Geometry and reference spaces in WebXR","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/WebXR_Device_API","title":"WebXR Device API"},{"uri":"/en-US/docs/Web/API/WebXR_Device_API/Geometry","title":"Geometry and reference spaces in WebXR"}],"pageTitle":"Geometry and reference spaces in WebXR - Web APIs | MDN","noIndexing":false}}</script>
<!-- Mirrored from developer.mozilla.org/en-US/docs/Web/API/WebXR_Device_API/Geometry by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Feb 2023 04:50:20 GMT -->
</body></html>