<html><!-- Mirrored from developer.mozilla.org/en-US/docs/Web/API/WebVR_API/Using_the_WebVR_API by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Feb 2023 04:50:08 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="../../../../../favicon-48x48.cbbd161b.png"><link rel="apple-touch-icon" href="../../../../../apple-touch-icon.6803c6f0.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="../../../../../manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/opensearch.xml" title="MDN Web Docs"><title>Using the WebVR API</title><link rel="alternate" title="Uso de la API de WebVR" href="https://developer.mozilla.org/es/docs/Web/API/WebVR_API/Using_the_WebVR_API" hreflang="es"><link rel="alternate" title="WebVR API の使用" href="https://developer.mozilla.org/ja/docs/Web/API/WebVR_API/Using_the_WebVR_API" hreflang="ja"><link rel="alternate" title="Using the WebVR API" href="https://developer.mozilla.org/pt-BR/docs/Web/API/WebVR_API/Using_the_WebVR_API" hreflang="pt"><link rel="alternate" title="Использование WebVR API" href="https://developer.mozilla.org/ru/docs/Web/API/WebVR_API/Using_the_WebVR_API" hreflang="ru"><link rel="alternate" title="Using the WebVR API" href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebVR_API/Using_the_WebVR_API" hreflang="zh"><link rel="alternate" title="Using the WebVR API" href="Using_the_WebVR_API.html" hreflang="en"><meta name="robots" content="index, follow"><meta name="description" content="This article has given you the very basics of how to create a simple WebVR 1.1 app, to help you get started."><meta property="og:url" content="Using_the_WebVR_API.html"><meta property="og:title" content="Using the WebVR API - Web APIs | MDN"><meta property="og:locale" content="en-US"><meta property="og:description" content="This article has given you the very basics of how to create a simple WebVR 1.1 app, to help you get started."><meta property="og:image" content="../../../../../mdn-social-share.cd6c4a5a.png"><meta property="twitter:card" content="summary_large_image"><link rel="canonical" href="Using_the_WebVR_API.html"><style media="print">.article-actions-container,.document-toc-container,.language-menu,.main-menu-toggle,.mdn-cta-container,.on-github,.page-footer,.sidebar,.top-navigation-main,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><script src="../../../../../static/js/ga.js" defer=""></script><script defer="defer" src="../../../../../static/js/main.5c9d40d0.js"></script><link href="../../../../../static/css/main.7d378400.css" rel="stylesheet"></head><body><script>document.body.addEventListener("load",(t=>{t.target.classList.contains("interactive")&&t.target.setAttribute("data-readystate","complete")}),{capture:!0});const c={light:"#ffffff",dark:"#1b1b1b"};if(window&&document.documentElement)try{const t=window.localStorage.getItem("theme");t&&(document.documentElement.className=t,document.documentElement.style.backgroundColor=c[t])}catch(t){console.warn("Unable to read theme from localStorage",t)}</script><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#top-nav-search-input">Skip to search</a></li><li><a id="skip-select-language" href="#languages-switcher-button">Skip to select language</a></li></ul><div class="page-wrapper  category-api document-page"><div class="main-document-header-container"><header class="main-document-header-container top-navigation 
      
      "><div class="container "><div class="top-navigation-wrap"><a href="https://developer.mozilla.org/en-US/" class="logo" aria-label="MDN homepage"><svg id="mdn-docs-logo" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 694.9 104.4" style="enable-background:new 0 0 694.9 104.4" xml:space="preserve" role="img"><title>MDN Web Docs</title><style>.logo-m{fill:var(--text-link)}</style><g class="logo-m"><path d="M40.3 0 11.7 92.1H0L28.5 0h11.8zM50.7 0v92.1H40.3V0h10.4zM91 0 62.5 92.1H50.8L79.3 0H91zM101.4 0v92.1H91V0h10.4z"></path></g><path class="logo-m" d="M627.9 95.6h67v8.8h-67v-8.8z"></path><g style="fill:var(--text-primary)"><path d="M367 42h-4l-10.7 30.8h-5.5l-10.8-26h-.4l-10.5 26h-5.2L308.7 42h-3.8v-5.6H323V42h-6.5l6.8 20.4h.4l10.3-26h4.7l11.2 26h.5l5.7-20.3h-6.2v-5.6H367V42zM401.9 62c-.4 3.2-2 5.9-4.7 8.2-2.8 2.3-6.5 3.4-11.3 3.4-5.4 0-9.7-1.6-13.1-4.7-3.3-3.2-5-7.7-5-13.7 0-5.7 1.6-10.3 4.7-14s7.4-5.5 12.9-5.5c5.1 0 9.1 1.6 11.9 4.7s4.3 6.9 4.3 11.3c0 1.5-.2 3-.5 4.7h-25.6c.3 7.7 4 11.6 10.9 11.6 2.9 0 5.1-.7 6.5-2 1.5-1.4 2.5-3 3-4.9l6 .9zM394 51.3c.2-2.4-.4-4.7-1.8-6.9s-3.8-3.3-7-3.3c-3.1 0-5.3 1-6.9 3-1.5 2-2.5 4.4-2.8 7.2H394zM445 53.7c0 5-1.3 9.5-4 13.7s-6.9 6.2-12.7 6.2c-6 0-10.3-2.2-12.7-6.7-.1.4-.2 1.4-.4 2.9s-.3 2.5-.4 2.9h-7.3c.3-1.7.6-3.5.8-5.3.3-1.8.4-3.7.4-5.5V22.3h-6v-5.6H416v27c1.1-2.2 2.7-4.1 4.7-5.7 2-1.6 4.8-2.4 8.4-2.4 4.6 0 8.4 1.6 11.4 4.7 3 3.2 4.5 7.6 4.5 13.4zm-7.7.6c0-4.2-1-7.4-3-9.5-2-2.2-4.4-3.3-7.4-3.3-3.4 0-6 1.2-8 3.7-1.9 2.4-2.9 5-3 7.7V57c0 3 1 5.6 3 7.7s4.5 3.1 7.6 3.1c3.6 0 6.3-1.3 8.1-3.9 1.8-2.7 2.7-5.9 2.7-9.6zM506.5 72.8h-13.2v-7.2c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2 5.7 0 9.8 2.2 12.3 6.5V22.3h-8.6v-5.6h15.8v50.6h6v5.5zM493.2 56v-4.4c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zM546.3 54.6c0 5.6-1.8 10.2-5.3 13.7s-8.2 5.3-13.9 5.3-10.1-1.7-13.4-5.1c-3.3-3.4-5-7.9-5-13.5 0-5.3 1.6-9.9 4.7-13.7 3.2-3.8 7.9-5.7 14.2-5.7s11 1.9 14.1 5.7c3 3.7 4.6 8.1 4.6 13.3zm-7.7-.2c0-4-1-7.2-3-9.5s-4.8-3.5-8.2-3.5c-3.6 0-6.4 1.2-8.3 3.7s-2.9 5.6-2.9 9.5c0 3.7.9 6.8 2.8 9.4 1.9 2.6 4.6 3.9 8.3 3.9 3.6 0 6.4-1.3 8.4-3.8 1.9-2.6 2.9-5.8 2.9-9.7zM583.6 60.2c-.4 3.2-1.9 6.3-4.4 9.1-2.5 2.9-6.4 4.3-11.8 4.3-5.2 0-9.4-1.6-12.6-4.8-3.2-3.2-4.8-7.7-4.8-13.7 0-5.5 1.6-10.1 4.7-13.9 3.2-3.8 7.6-5.7 13.2-5.7 2.3 0 4.6.3 6.7.8 2.2.5 4.2 1.5 6.2 2.9l1.5 9.5-5.9.7-1.3-6.1c-2.1-1.2-4.5-1.8-7.2-1.8-3.5 0-6.1 1.2-7.7 3.7-1.7 2.5-2.5 5.7-2.5 9.6 0 4.1.9 7.3 2.7 9.5 1.8 2.3 4.4 3.4 7.8 3.4 5.2 0 8.2-2.9 9.2-8.8l6.2 1.3zM618.3 62.1c0 3.6-1.5 6.5-4.6 8.5s-7 3-11.7 3c-5.7 0-10.6-1.2-14.6-3.6l1.2-8.8 5.7.6-.2 4.7c1.1.5 2.3.9 3.6 1.1s2.6.3 3.9.3c2.4 0 4.5-.4 6.5-1.3 1.9-.9 2.9-2.2 2.9-4.1 0-1.8-.8-3.1-2.3-3.8s-3.5-1.3-5.8-1.7-4.6-.9-6.9-1.4c-2.3-.6-4.2-1.6-5.7-2.9-1.6-1.4-2.3-3.5-2.3-6.3 0-4.1 1.5-6.9 4.6-8.5s6.4-2.4 9.9-2.4c2.6 0 5 .3 7.2.9 2.2.6 4.3 1.4 6.1 2.4l.8 8.8-5.8.7-.8-5.7c-2.3-1-4.7-1.6-7.2-1.6-2.1 0-3.7.4-5.1 1.1-1.3.8-2 2-2 3.8 0 1.7.8 2.9 2.3 3.6 1.5.7 3.4 1.2 5.7 1.6 2.2.4 4.5.8 6.7 1.4 2.2.6 4.1 1.6 5.7 3 1.4 1.6 2.2 3.7 2.2 6.6zM197.6 73.2h-17.1v-5.5h3.8V51.9c0-3.7-.7-6.3-2.1-7.9-1.4-1.6-3.3-2.3-5.7-2.3-3.2 0-5.6 1.1-7.2 3.4s-2.4 4.6-2.5 6.9v15.6h6v5.5h-17.1v-5.5h3.8V51.9c0-3.8-.7-6.4-2.1-7.9-1.4-1.5-3.3-2.3-5.6-2.3-3.2 0-5.5 1.1-7.2 3.3-1.6 2.2-2.4 4.5-2.5 6.9v15.8h6.9v5.5h-20.2v-5.5h6V42.4h-6.1v-5.6h13.4v6.4c1.2-2.1 2.7-3.8 4.7-5.2 2-1.3 4.4-2 7.3-2s5.3.7 7.5 2.1c2.2 1.4 3.7 3.5 4.5 6.4 1.1-2.5 2.7-4.5 4.9-6.1s4.8-2.4 7.9-2.4c3.5 0 6.5 1.1 8.9 3.3s3.7 5.6 3.7 10.2v18.2h6.1v5.5zm42.5 0h-13.2V66c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2s9.8 2.2 12.3 6.5V22.7h-8.6v-5.6h15.8v50.6h6v5.5zm-13.3-16.8V52c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zm61.5 16.8H269v-5.5h6V51.9c0-3.7-.7-6.3-2.2-7.9-1.4-1.6-3.4-2.3-5.7-2.3-3.1 0-5.6 1-7.4 3s-2.8 4.4-2.9 7v15.9h6v5.5h-19.3v-5.5h6V42.4h-6.2v-5.6h13.6V43c2.6-4.6 6.8-6.9 12.7-6.9 3.6 0 6.7 1.1 9.2 3.3s3.7 5.6 3.7 10.2v18.2h6v5.4h-.2z"></path></g></svg></a><button title="Open main menu" type="button" class="button action has-icon main-menu-toggle" aria-haspopup="menu" aria-label="Open main menu" aria-expanded="false"><span class="button-wrap"><span class="icon icon-menu "></span><span class="visually-hidden">Open main menu</span></span></button></div><div class="top-navigation-main"><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button type="button" id="references-button" class="top-level-entry menu-toggle" aria-controls="references-menu" aria-expanded="false">References</button><a href="https://developer.mozilla.org/en-US/docs/Web" class="top-level-entry">References</a><ul id="references-menu" class="submenu references hidden inline-submenu-lg" aria-labelledby="references-button"><li class="apis-link-container mobile-only "><a href="https://developer.mozilla.org/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li><li class="html-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Structure of content on the web</p></div></a></li><li class="css-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Code used to describe document style</p></div></a></li><li class="javascript-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">General-purpose scripting language</p></div></a></li><li class="http-link-container "><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP" class="submenu-item "><div class="submenu-icon http"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTTP</div><p class="submenu-item-description">Protocol for transmitting web resources</p></div></a></li><li class="apis-link-container "><a href="../../API.html" class="submenu-item "><div class="submenu-icon apis"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web APIs</div><p class="submenu-item-description">Interfaces for building web applications</p></div></a></li><li class="apis-link-container "><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Extensions</div><p class="submenu-item-description">Developing extensions for web browsers</p></div></a></li><li class="apis-link-container desktop-only "><a href="https://developer.mozilla.org/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li></ul></li><li class="top-level-entry-container"><button type="button" id="guides-button" class="top-level-entry menu-toggle" aria-controls="guides-menu" aria-expanded="false">Guides</button><a href="https://developer.mozilla.org/en-US/docs/Learn" class="top-level-entry">Guides</a><ul id="guides-menu" class="submenu guides hidden inline-submenu-lg" aria-labelledby="guides-button"><li class="apis-link-container mobile-only "><a href="https://developer.mozilla.org/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="apis-link-container desktop-only "><a href="https://developer.mozilla.org/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="html-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Learn to structure web content with HTML</p></div></a></li><li class="css-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Learn to style content using CSS</p></div></a></li><li class="javascript-link-container "><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">Learn to run scripts in the browser</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Accessibility</div><p class="submenu-item-description">Learn to make the web accessible to all</p></div></a></li></ul></li><li class="top-level-entry-container"><button type="button" id="mdn-plus-button" class="top-level-entry menu-toggle" aria-controls="mdn-plus-menu" aria-expanded="false">MDN Plus</button><a href="https://developer.mozilla.org/en-US/plus" class="top-level-entry">MDN Plus</a><ul id="mdn-plus-menu" class="submenu mdn-plus hidden inline-submenu-lg" aria-labelledby="mdn-plus-button"><li class=" "><a href="https://developer.mozilla.org/en-US/plus" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview</div><p class="submenu-item-description">A customized MDN experience</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/updates" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Updates</div><p class="submenu-item-description">All browser compatibility updates at a glance</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/docs/features/overview" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Documentation</div><p class="submenu-item-description">Learn how to use MDN Plus</p></div></a></li><li class=" "><a href="https://developer.mozilla.org/en-US/plus/docs/faq" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">FAQ</div><p class="submenu-item-description">Frequently asked questions about MDN Plus</p></div></a></li></ul></li></ul></nav><div class="header-search"><form action="https://developer.mozilla.org/en-US/search" role="search" aria-haspopup="listbox" aria-owns="top-nav-search-menu" aria-expanded="false" class="search-form search-widget" id="top-nav-search-form"><label id="top-nav-search-label" for="top-nav-search-input" class="visually-hidden">Search MDN</label><input id="top-nav-search-input" aria-autocomplete="list" aria-controls="top-nav-search-menu" aria-labelledby="top-nav-search-label" autocomplete="off" type="search" class="search-input-field" name="q" placeholder="   " required="" value=""><button type="button" class="button action has-icon clear-search-button"><span class="button-wrap"><span class="icon icon-cancel "></span><span class="visually-hidden">Clear search input</span></span></button><button type="submit" class="button action has-icon search-button"><span class="button-wrap"><span class="icon icon-search "></span><span class="visually-hidden">Search</span></span></button><div id="top-nav-search-menu" role="listbox" aria-labelledby="top-nav-search-label"></div></form></div><div class="theme-switcher-menu"><button type="button" class="button action has-icon theme-switcher-menu small" aria-haspopup="menu"><span class="button-wrap"><span class="icon icon-theme-os-default "></span>Theme</span></button></div><ul class="auth-container"><li><a href="https://developer.mozilla.org/users/fxa/login/authenticate/?next=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FWebVR_API%2FUsing_the_WebVR_API" class="signin-link" rel="nofollow">Already a subscriber?</a></li><li><a class="button primary mdn-plus-subscribe-link" href="https://developer.mozilla.org/en-US/plus"><span class="button-wrap">Get MDN Plus</span></a></li></ul></div></div></header><div class="article-actions-container"><div class="container"><button type="button" class="button action has-icon sidebar-button" aria-label="Expand sidebar" aria-expanded="false" aria-controls="sidebar-quicklinks"><span class="button-wrap"><span class="icon icon-sidebar "></span></span></button><nav class="breadcrumbs-container" aria-label="Breadcrumb"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="https://developer.mozilla.org/en-US/docs/Web"><span property="name">References</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="../../API.html"><span property="name">Web APIs</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="../WebVR_API.html"><span property="name">WebVR API</span></a><meta property="position" content="3"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="Using_the_WebVR_API.html"><span property="name">Using the WebVR API</span></a><meta property="position" content="4"></li></ol></nav><div class="article-actions"><button type="button" class="button action has-icon article-actions-toggle" aria-label="Article actions"><span class="button-wrap"><span class="icon icon-ellipses "></span><span class="article-actions-dialog-heading">Article Actions</span></span></button><ul class="article-actions-entries"><li class="article-actions-entry"><div class="languages-switcher-menu open-on-focus-within"><button id="languages-switcher-button" type="button" class="button action small has-icon languages-switcher-menu" aria-haspopup="menu"><span class="button-wrap"><span class="icon icon-language "></span>English (US)</span></button></div></li></ul></div></div></div></div><div class="main-wrapper"><aside id="sidebar-quicklinks" class="sidebar"><button type="button" class="button action backdrop" aria-label="Collapse sidebar"><span class="button-wrap"></span></button><nav aria-label="Related Topics" class="sidebar-inner"><div class="in-nav-toc"><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#getting_started">Getting started</a></li><li class="document-toc-item "><a class="document-toc-link" href="#introducing_our_demo">Introducing our demo</a></li><li class="document-toc-item "><a class="document-toc-link" href="#how_does_it_work">How does it work?</a></li><li class="document-toc-item "><a class="document-toc-link" href="#webvr_events">WebVR events</a></li><li class="document-toc-item "><a class="document-toc-link" href="#summary">Summary</a></li></ul></section></div></div><div><ol><li><strong><a href="../WebVR_API.html">WebVR API</a></strong></li><li><strong><a href="../WebVR_API.html"><code>WebVR_API</code></a></strong></li><li class="toggle"><details open=""><summary>Related pages for WebVR API</summary><ol><li><a href="../Gamepad/displayId.html"><code>Gamepad.displayId</code></a></li><li><a href="../Navigator/activeVRDisplays.html"><code>Navigator.activeVRDisplays</code></a></li><li><a href="../Navigator/getVRDisplays.html"><code>Navigator.getVRDisplays()</code></a></li><li><a href="../VRDisplay.html"><code>VRDisplay</code></a></li><li><a href="../VRDisplayCapabilities.html"><code>VRDisplayCapabilities</code></a></li><li><a href="../VRDisplayEvent.html"><code>VRDisplayEvent</code></a></li><li><a href="../VREyeParameters.html"><code>VREyeParameters</code></a></li><li><a href="../VRFieldOfView.html"><code>VRFieldOfView</code></a></li><li><a href="../VRFrameData.html"><code>VRFrameData</code></a></li><li><a href="../VRLayerInit.html"><code>VRLayerInit</code></a></li><li><a href="../VRPose.html"><code>VRPose</code></a></li><li><a href="../VRStageParameters.html"><code>VRStageParameters</code></a></li></ol></details></li></ol></div></nav></aside><aside class="toc"><nav><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#getting_started">Getting started</a></li><li class="document-toc-item "><a class="document-toc-link" href="#introducing_our_demo">Introducing our demo</a></li><li class="document-toc-item "><a class="document-toc-link" href="#how_does_it_work">How does it work?</a></li><li class="document-toc-item "><a class="document-toc-link" href="#webvr_events">WebVR events</a></li><li class="document-toc-item "><a class="document-toc-link" href="#summary">Summary</a></li></ul></section></div></nav></aside><main id="content" class="main-content  "><article class="main-page-content" lang="en-US"><h1>Using the WebVR API</h1><div class="section-content"><div class="notecard deprecated" id="sect1"><p><strong>Deprecated:</strong> This feature is no longer recommended. Though some browsers might still support it, it may have already been removed from the relevant web standards, may be in the process of being dropped, or may only be kept for compatibility purposes. Avoid using it, and update existing code if possible; see the <a href="#browser_compatibility">compatibility table</a> at the bottom of this page to guide your decision. Be aware that this feature may cease to work at any time.</p></div>
<div class="notecard note" id="sect2">
  <p><strong>Note:</strong> WebVR API is replaced by <a href="../WebXR_Device_API.html">WebXR API</a>. WebVR was never ratified as a standard, was implemented and enabled by default in very few browsers and supported a small number of devices.</p>
</div>
<p>The WebVR API is a fantastic addition to the web developer's toolkit, allowing WebGL scenes to be presented in virtual reality displays such as the Oculus Rift and HTC Vive. But how do you get started with developing VR apps for the Web? This article will guide you through the basics.</p></div><section aria-labelledby="getting_started"><a class="dashAnchor" name="//apple_ref/Section/Getting%20started"></a><h2 id="getting_started"><a href="#getting_started">Getting started</a></h2><div class="section-content"><p>To get started, you need:</p>
<ul>
  <li>Supporting VR hardware.
    <ul>
      <li>The cheapest option is to use a mobile device, supporting browser, and device mount (e.g. Google Cardboard). This won't be quite as good an experience as dedicated hardware, but you won't need to purchase a powerful computer or dedicated VR display.</li>
      <li>Dedicated hardware can be costly, but it does provide a better experience. The most WebVR-compatible hardware at the moment is the HTC VIVE, and The Oculus Rift. The front page of <a href="https://webvr.info/" class="external" target="_blank">webvr.info</a> has some further useful information about available hardware, and what browser support them.</li>
    </ul>
  </li>
  <li>A computer powerful enough to handle rendering/displaying of VR scenes using your dedicated VR Hardware, if required. To give you an idea of what you need, look at the relevant guide for the VR you are purchasing (e.g. <a href="https://www.vive.com/us/ready/" class="external" target="_blank">VIVE READY Computers</a>).</li>
  <li>A supporting browser installed — the latest <a href="https://www.mozilla.org/en-US/firefox/channel/desktop/" class="external" target="_blank">Firefox Nightly</a> or <a href="https://www.google.com/chrome/index.html" class="external" target="_blank">Chrome</a> are your best options right now, on desktop or mobile.</li>
</ul>
<p>Once you have everything assembled, you can test to see whether your setup works with WebVR by going to our <a href="../../../../../../mdn.github.io/webvr-tests/webvr/aframe-demo/index.html" class="external" target="_blank">simple A-Frame demo</a>, and seeing whether the scene renders and whether you can enter VR display mode by pressing the button at the bottom right.</p>
<p><a href="https://aframe.io/" class="external" target="_blank">A-Frame</a> is by far the best option if you want to create a WebVR-compatible 3D scene quickly, without needing to understand a bunch of new JavaScript code. It doesn't however teach you how the raw WebVR API works, and this is what we'll get on to next.</p></div></section><section aria-labelledby="introducing_our_demo"><a class="dashAnchor" name="//apple_ref/Section/Introducing%20our%20demo"></a><h2 id="introducing_our_demo"><a href="#introducing_our_demo">Introducing our demo</a></h2><div class="section-content"><p>To illustrate how the WebVR API works, we'll study our raw-webgl-example, which looks a bit like this:</p>
<p>
  <img src="Using_the_WebVR_API/capture1.png" alt="A gray rotating 3D cube" width="1341" height="761" loading="lazy">
</p>
<div class="notecard note" id="sect3">
  <p><strong>Note:</strong> You can find the <a href="https://github.com/mdn/webvr-tests/tree/main/webvr/raw-webgl-example" class="external" target="_blank">source code of our demo</a> on GitHub, and <a href="../../../../../../mdn.github.io/webvr-tests/webvr/raw-webgl-example/index.html" class="external" target="_blank">view it live</a> also.</p>
</div>
<div class="notecard note" id="sect4">
  <p><strong>Note:</strong> If WebVR isn't working in your browser, you might need to make sure it is running through your graphics card. For example for NVIDIA cards, if you've got the NVIDIA control panel set up successfully, there will be a context menu option available — right click on Firefox, then choose <em>Run with graphics processor &gt; High-performance NVIDIA processor</em>.</p>
</div>
<p>Our demo features the holy grail of WebGL demos — a rotating 3D cube. We've implemented this using raw <a href="../WebGL_API.html">WebGL API</a> code. We won't be teaching any basic JavaScript or WebGL, just the WebVR parts.</p>
<p>Our demo also features:</p>
<ul>
  <li>A button to start (and stop) our scene from being presented in the VR display.</li>
  <li>A button to show (and hide) VR pose data, i.e. the position and orientation of the headset, updated in real time.</li>
</ul>
<p>When you look through the source code of <a href="https://github.com/mdn/webvr-tests/blob/main/webvr/raw-webgl-example/webgl-demo.js" class="external" target="_blank">our demo's main JavaScript file</a>, you can easily find the WebVR-specific parts by searching for the string "WebVR" in preceding comments.</p>
<div class="notecard note" id="sect5">
  <p><strong>Note:</strong> To find out more about basic JavaScript and WebGL, consult our <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript">JavaScript learning material</a>, and our <a href="../WebGL_API/Tutorial.html">WebGL Tutorial</a>.</p>
</div></div></section><section aria-labelledby="how_does_it_work"><a class="dashAnchor" name="//apple_ref/Section/How%20does%20it%20work%3F"></a><h2 id="how_does_it_work"><a href="#how_does_it_work">How does it work?</a></h2><div class="section-content"><p>At this point, let's look at how the WebVR parts of the code work.</p>
<p>A typical (simple) WebVR app works like this:</p>
<ol>
  <li><a href="../Navigator/getVRDisplays.html"><code>Navigator.getVRDisplays()</code></a> is used to get a reference to your VR display.</li>
  <li><a href="../VRDisplay/requestPresent.html"><code>VRDisplay.requestPresent()</code></a> is used to start presenting to the VR display.</li>
  <li>WebVR's dedicated <a href="../VRDisplay/requestAnimationFrame.html"><code>VRDisplay.requestAnimationFrame()</code></a> method is used to run the app's rendering loop at the correct refresh rate for the display.</li>
  <li>Inside the rendering loop, you grab the data required to display the current frame (<a href="../VRDisplay/getFrameData.html"><code>VRDisplay.getFrameData()</code></a>), draw the displayed scene twice — once for the view in each eye — then submit the rendered view to the display to show to the user via (<a href="../VRDisplay/submitFrame.html"><code>VRDisplay.submitFrame()</code></a>).</li>
</ol>
<p>In the below sections we'll look at our raw-webgl-demo in detail, and see where exactly the above features are used.</p></div></section><section aria-labelledby="starting_with_some_variables"><h3 id="starting_with_some_variables"><a href="#starting_with_some_variables">Starting with some variables</a></h3><div class="section-content"><p>The first WebVR-related code you'll meet is this following block:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// WebVR variables</span>

<span class="token keyword">const</span> frameData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VRFrameData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> vrDisplay<span class="token punctuation">;</span>
<span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.stop-start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> normalSceneFrame<span class="token punctuation">;</span>
<span class="token keyword">let</span> vrSceneFrame<span class="token punctuation">;</span>

<span class="token keyword">const</span> poseStatsBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.pose-stats'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> poseStatsSection <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'section'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
poseStatsSection<span class="token punctuation">.</span>style<span class="token punctuation">.</span>visibility <span class="token operator">=</span> <span class="token string">'hidden'</span><span class="token punctuation">;</span> <span class="token comment">// hide it initially</span>

<span class="token keyword">const</span> posStats <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.pos'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> orientStats <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.orient'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> linVelStats <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.lin-vel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> linAccStats <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.lin-acc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> angVelStats <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.ang-vel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> angAccStats <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.ang-acc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> poseStatsDisplayed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Let's briefly explain these:</p>
<ul>
  <li><code>frameData</code> contains a <a href="../VRFrameData.html"><code>VRFrameData</code></a> object, created using the <a href="../VRFrameData/VRFrameData.html" title="VRFrameData()"><code>VRFrameData()</code></a> constructor. This is initially empty, but will later contain the data required to render each frame to show in the VR display, updated constantly as the rendering loop runs.</li>
  <li><code>vrDisplay</code> starts uninitialized, but will later on hold a reference to our VR headset (<a href="../VRDisplay.html"><code>VRDisplay</code></a> — the central control object of the API).</li>
  <li><code>btn</code> and <code>poseStatsBtn</code> hold references to the two buttons we are using to control our app.</li>
  <li><code>normalSceneFrame</code> and <code>vrSceneFrame</code> start uninitialized, but later on will hold references to <a href="../window/requestAnimationFrame.html"><code>Window.requestAnimationFrame()</code></a> and <a href="../VRDisplay/requestAnimationFrame.html"><code>VRDisplay.requestAnimationFrame()</code></a> calls — these will initiate the running of a normal rendering loop, and a special WebVR rendering loop; we'll explain the difference between these two later on.</li>
  <li>The other variables store references to different parts of the VR pose data display box, which you can see in the bottom right-hand corner of the UI.</li>
</ul></div></section><section aria-labelledby="getting_a_reference_to_our_vr_display"><h3 id="getting_a_reference_to_our_vr_display"><a href="#getting_a_reference_to_our_vr_display">Getting a reference to our VR display</a></h3><div class="section-content"><p>One of the major functions inside our code is <code>start()</code> — we run this function when the body has finished loading:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// start</span>
<span class="token comment">//</span>
<span class="token comment">// Called when the body has loaded is created to get the ball rolling.</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>onload <span class="token operator">=</span> start<span class="token punctuation">;</span>
</code></pre></div>
<p>To begin with, <code>start()</code> retrieves a WebGL context to use to render 3D graphics into the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas"><code>&lt;canvas&gt;</code></a> element in <a href="https://github.com/mdn/webvr-tests/blob/main/webvr/raw-webgl-example/index.html" class="external" target="_blank">our HTML</a>. We then check whether the <code>gl</code> context is available — if so, we run a number of functions to set up the scene for display.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"glcanvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">initWebGL</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// Initialize the GL context</span>

  <span class="token comment">// WebGL setup code here</span>
</code></pre></div>
<p>Next, we start the process of actually rendering the scene onto the canvas, by setting the canvas to fill the entire browser viewport, and running the rendering loop (<code>drawScene()</code>) for the first time. This is the non-WebVR — normal — rendering loop.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token comment">// draw the scene normally, without WebVR - for those who don't have it and want to see the scene in their browser</span>

  canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span>
  canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>
  <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Now onto our first WebVR-specific code. First of all, we check to see if <a href="../Navigator/getVRDisplays.html"><code>Navigator.getVRDisplays</code></a> exists — this is the entry point into the API, and therefore good basic feature detection for WebVR. You'll see at the end of the block (inside the <code>else</code> clause) that if this doesn't exist, we log a message to indicate that WebVR 1.1 isn't supported by the browser.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token comment">// WebVR: Check to see if WebVR is supported</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>getVRDisplays<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'WebVR 1.1 supported'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Inside our <code>if () { }</code> block, we run the <a href="../Navigator/getVRDisplays.html"><code>Navigator.getVRDisplays()</code></a> function. This returns a promise, which is fulfilled with an array containing all the VR display devices connected to the computer. If none are connected, the array will be empty.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>    <span class="token comment">// Then get the displays attached to the computer</span>
    navigator<span class="token punctuation">.</span><span class="token function">getVRDisplays</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">displays</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</code></pre></div>
<p>Inside the promise <code>then()</code> block, we check whether the array length is more than 0; if so, we set the value of our <code>vrDisplay</code> variable to the 0 index item inside the array. <code>vrDisplay</code> now contains a <a href="../VRDisplay.html"><code>VRDisplay</code></a> object representing our connected display!</p>
<div class="code-example"><pre class="brush: js notranslate"><code>      <span class="token comment">// If a display is available, use it to present the scene</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>displays<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        vrDisplay <span class="token operator">=</span> displays<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Display found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="notecard note" id="sect6">
  <p><strong>Note:</strong> It is unlikely that you'll have multiple VR displays connected to your computer, and this is just a simple demo, so this will do for now.</p>
</div></div></section><section aria-labelledby="starting_and_stopping_the_vr_presentation"><h3 id="starting_and_stopping_the_vr_presentation"><a href="#starting_and_stopping_the_vr_presentation">Starting and stopping the VR presentation</a></h3><div class="section-content"><p>Now we have a <a href="../VRDisplay.html"><code>VRDisplay</code></a> object, we can use it do a number of things. The next thing we want to do is wire up functionality to start and stop presentation of the WebGL content to the display.</p>
<p>Continuing on with the previous code block, we now add an event listener to our start/stop button (<code>btn</code>) — when this button is clicked we want to check whether we are presenting to the display already (we do this in a fairly dumb fashion, by checking what the button <a href="../Node/textContent.html"><code>textContent</code></a> contains).</p>
<p>If the display is not already presenting, we use the <a href="../VRDisplay/requestPresent.html"><code>VRDisplay.requestPresent()</code></a> method to request that the browser start presenting content to the display. This takes as a parameter an array of the <a href="../VRLayerInit.html"><code>VRLayerInit</code></a> objects representing the layers you want to present in the display.</p>
<p>Since the maximum number of layers you can display is currently 1, and the only required object member is the <a href="../VRLayerInit/source.html"><code>VRLayerInit.source</code></a> property (which is a reference to the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas"><code>&lt;canvas&gt;</code></a> you want to present in that layer; the other parameters are given sensible defaults — see <a href="../VRLayerInit/leftBounds.html" title="leftBounds"><code>leftBounds</code></a> and <a href="../VRLayerInit/rightBounds.html" title="rightBounds"><code>rightBounds</code></a>)), the parameter is [{ source: canvas }].</p>
<p><code>requestPresent()</code> returns a promise that is fulfilled when the presentation begins successfully.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>        <span class="token comment">// Starting the presentation when the button is clicked: It can only be called in response to a user gesture</span>
        btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>btn<span class="token punctuation">.</span>textContent <span class="token operator">===</span> <span class="token string">'Start VR display'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            vrDisplay<span class="token punctuation">.</span><span class="token function">requestPresent</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">source</span><span class="token operator">:</span> canvas <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Presenting to WebVR display'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>With our presentation request successful, we now want to start setting up to render content to present to the VRDisplay. First of all we set the canvas to the same size as the VR display area. We do this by getting the <a href="../VREyeParameters.html"><code>VREyeParameters</code></a> for both eyes using <a href="../VRDisplay/getEyeParameters.html"><code>VRDisplay.getEyeParameters()</code></a>.</p>
<p>We then do some simple math to calculate the total width of the VRDisplay rendering area based on the eye <a href="../VREyeParameters/renderWidth.html"><code>VREyeParameters.renderWidth</code></a> and <a href="../VREyeParameters/renderHeight.html"><code>VREyeParameters.renderHeight</code></a>.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>              <span class="token comment">// Set the canvas size to the size of the vrDisplay viewport</span>

              <span class="token keyword">const</span> leftEye <span class="token operator">=</span> vrDisplay<span class="token punctuation">.</span><span class="token function">getEyeParameters</span><span class="token punctuation">(</span><span class="token string">'left'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">const</span> rightEye <span class="token operator">=</span> vrDisplay<span class="token punctuation">.</span><span class="token function">getEyeParameters</span><span class="token punctuation">(</span><span class="token string">'right'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

              canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftEye<span class="token punctuation">.</span>renderWidth<span class="token punctuation">,</span> rightEye<span class="token punctuation">.</span>renderWidth<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
              canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftEye<span class="token punctuation">.</span>renderHeight<span class="token punctuation">,</span> rightEye<span class="token punctuation">.</span>renderHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Next, we <a href="../Window/cancelAnimationFrame.html" title="cancel the animation loop"><code>cancel the animation loop</code></a> previously set in motion by the <a href="../window/requestAnimationFrame.html"><code>Window.requestAnimationFrame()</code></a> call inside the <code>drawScene()</code> function, and instead invoke <code>drawVRScene()</code>. This function renders the same scene as before, but with some special WebVR magic going on. The loop inside here is maintained by WebVR's special <a href="../VRDisplay/requestAnimationFrame.html"><code>VRDisplay.requestAnimationFrame</code></a> method.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>              <span class="token comment">// stop the normal presentation, and start the vr presentation</span>
              window<span class="token punctuation">.</span><span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>normalSceneFrame<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token function">drawVRScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Finally, we update the button text so that the next time it is pressed, it will stop presentation to the VR display.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>              btn<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Exit VR display'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>To stop the VR presentation when the button is subsequently pressed, we call <a href="../VRDisplay/exitPresent.html"><code>VRDisplay.exitPresent()</code></a>. We also reverse the button's text content, and swap over the <code>requestAnimationFrame</code> calls. You can see here that we are using <a href="../VRDisplay/cancelAnimationFrame.html"><code>VRDisplay.cancelAnimationFrame</code></a> to stop the VR rendering loop, and starting the normal rendering loop off again by calling <code>drawScene()</code>.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            vrDisplay<span class="token punctuation">.</span><span class="token function">exitPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Stopped presenting to WebVR display'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            btn<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Start VR display'</span><span class="token punctuation">;</span>

            <span class="token comment">// Stop the VR presentation, and start the normal presentation</span>
            vrDisplay<span class="token punctuation">.</span><span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>vrSceneFrame<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'WebVR API not supported by this browser.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Once the presentation starts, you'll be able to see the stereoscopic view displayed in the browser:</p>
<p>
  <img src="Using_the_WebVR_API/capture2.png" alt="Stereoscopic view of 3D cube" width="1341" height="761" loading="lazy">
</p>
<p>You'll learn below how the stereoscopic view is actually produced.</p></div></section><section aria-labelledby="why_does_webvr_have_its_own_requestanimationframe"><h3 id="why_does_webvr_have_its_own_requestanimationframe"><a href="#why_does_webvr_have_its_own_requestanimationframe">Why does WebVR have its own requestAnimationFrame()?</a></h3><div class="section-content"><p>This is a good question. The reason is that for smooth rendering inside the VR display, you need to render the content at the display's native refresh rate, not that of the computer. VR display refresh rates are greater than PC refresh rates, typically up to 90fps. The rate will be differ from the computer's core refresh rate.</p>
<p>Note that when the VR display is not presenting, <a href="../VRDisplay/requestAnimationFrame.html"><code>VRDisplay.requestAnimationFrame</code></a> runs identically to <a href="../window/requestAnimationFrame.html"><code>Window.requestAnimationFrame</code></a>, so if you wanted, you could just use a single rendering loop, rather than the two we are using in our app. We have used two because we wanted to do slightly different things depending on whether the VR display is presenting or not, and keep things separated for ease of comprehension.</p></div></section><section aria-labelledby="rendering_and_display"><h3 id="rendering_and_display"><a href="#rendering_and_display">Rendering and display</a></h3><div class="section-content"><p>At this point, we've seen all the code required to access the VR hardware, request that we present our scene to the hardware, and start running the rending loop. Let's now look at the code for the rendering loop, and explain how the WebVR-specific parts of it work.</p>
<p>First of all, we begin the definition of our rendering loop function — <code>drawVRScene()</code>. The first thing we do inside here is make a call to <a href="../VRDisplay/requestAnimationFrame.html"><code>VRDisplay.requestAnimationFrame()</code></a> to keep the loop running after it has been called once (this occurred earlier on in our code when we started presenting to the VR display). This call is set as the value of the global <code>vrSceneFrame</code> variable, so we can cancel the loop with a call to <a href="../VRDisplay/cancelAnimationFrame.html"><code>VRDisplay.cancelAnimationFrame()</code></a> once we exit VR presenting.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">drawVRScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// WebVR: Request the next frame of the animation</span>
  vrSceneFrame <span class="token operator">=</span> vrDisplay<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>drawVRScene<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Next, we call <a href="../VRDisplay/getFrameData.html"><code>VRDisplay.getFrameData()</code></a>, passing it the name of the variable that we want to use to contain the frame data. We initialized this earlier on — <code>frameData</code>. After the call completes, this variable will contain the data need to render the next frame to the VR device, packaged up as a <a href="../VRFrameData.html"><code>VRFrameData</code></a> object. This contains things like projection and view matrices for rendering the scene correctly for the left and right eye view, and the current <a href="../VRPose.html"><code>VRPose</code></a> object, which contains data on the VR display such as orientation, position, etc.</p>
<p>This has to be called on every frame so the rendered view is always up-to-date.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token comment">// Populate frameData with the data of the next frame to display</span>
  vrDisplay<span class="token punctuation">.</span><span class="token function">getFrameData</span><span class="token punctuation">(</span>frameData<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Now we retrieve the current <a href="../VRPose.html"><code>VRPose</code></a> from the <a href="../VRFrameData/pose.html"><code>VRFrameData.pose</code></a> property, store the position and orientation for use later on, and send the current pose to the pose stats box for display, if the <code>poseStatsDisplayed</code> variable is set to true.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token comment">// You can get the position, orientation, etc. of the display from the current frame's pose</span>

  <span class="token keyword">const</span> curFramePose <span class="token operator">=</span> frameData<span class="token punctuation">.</span>pose<span class="token punctuation">;</span>
  <span class="token keyword">const</span> curPos <span class="token operator">=</span> curFramePose<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
  <span class="token keyword">const</span> curOrient <span class="token operator">=</span> curFramePose<span class="token punctuation">.</span>orientation<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>poseStatsDisplayed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">displayPoseStats</span><span class="token punctuation">(</span>curFramePose<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div>
<p>We now clear the canvas before we start drawing on it, so that the next frame is clearly seen, and we don't also see previous rendered frames:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token comment">// Clear the canvas before we start drawing on it.</span>

  gl<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_BUFFER_BIT</span> <span class="token operator">|</span> gl<span class="token punctuation">.</span><span class="token constant">DEPTH_BUFFER_BIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>We now render the view for both the left and right eyes. First of all we need to create projection and view locations for use in the rendering. These are <a href="../WebGLUniformLocation.html"><code>WebGLUniformLocation</code></a> objects, created using the <a href="../WebGLRenderingContext/getUniformLocation.html"><code>WebGLRenderingContext.getUniformLocation()</code></a> method, passing it the shader program's identifier and an identifying name as parameters.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token comment">// WebVR: Create the required projection and view matrix locations needed</span>
  <span class="token comment">// for passing into the uniformMatrix4fv methods below</span>

  <span class="token keyword">const</span> projectionMatrixLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>shaderProgram<span class="token punctuation">,</span> <span class="token string">"projMatrix"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> viewMatrixLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>shaderProgram<span class="token punctuation">,</span> <span class="token string">"viewMatrix"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>The next rendering step involves:</p>
<ul>
  <li>Specifying the viewport size for the left eye, using <a href="../WebGLRenderingContext/viewport.html"><code>WebGLRenderingContext.viewport</code></a> — this is logically the first half of the canvas width, and the full canvas height.</li>
  <li>Specifying the view and projection matrix values to use to render the left eye — this is done using the <a href="../WebGLRenderingContext/uniformMatrix.html" title="WebGLRenderingContext.uniformMatrix4fv"><code>WebGLRenderingContext.uniformMatrix4fv</code></a> method, which is passed the location values we retrieved above, and the left matrices obtained from the <a href="../VRFrameData.html"><code>VRFrameData</code></a> object.</li>
  <li>Running the <code>drawGeometry()</code> function, which renders the actual scene — because of what we specified in the previous two steps, we will render it for the left eye only.</li>
</ul>
<div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token comment">// WebVR: Render the left eye's view to the left half of the canvas</span>
  gl<span class="token punctuation">.</span><span class="token function">viewport</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
  gl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>projectionMatrixLocation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> frameData<span class="token punctuation">.</span>leftProjectionMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>
  gl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>viewMatrixLocation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> frameData<span class="token punctuation">.</span>leftViewMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">drawGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>We now do exactly the same thing, but for the right eye:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token comment">// WebVR: Render the right eye's view to the right half of the canvas</span>
  gl<span class="token punctuation">.</span><span class="token function">viewport</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
  gl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>projectionMatrixLocation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> frameData<span class="token punctuation">.</span>rightProjectionMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>
  gl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>viewMatrixLocation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> frameData<span class="token punctuation">.</span>rightViewMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">drawGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Next we define our <code>drawGeometry()</code> function. Most of this is just general WebGL code required to draw our 3D cube. You'll see some WebVR-specific parts in the <code>mvTranslate()</code> and <code>mvRotate()</code> function calls — these pass matrices into the WebGL program that define the translation and rotation of the cube for the current frame</p>
<p>You'll see that we are modifying these values by the position (<code>curPos</code>) and orientation (<code>curOrient</code>) of the VR display we got from the <a href="../VRPose.html"><code>VRPose</code></a> object. The result is that, for example, as you move or rotate your head left, the x position value (<code>curPos[0]</code>) and y rotation value (<code>[curOrient[1]</code>) are added to the x translation value, meaning that the cube will move to the right, as you'd expect when you are looking at something and then move/turn your head left.</p>
<p>This is a quick and dirty way to use VR pose data, but it illustrates the basic principle.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token keyword">function</span> <span class="token function">drawGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Establish the perspective with which we want to view the</span>
    <span class="token comment">// scene. Our field of view is 45 degrees, with a width/height</span>
    <span class="token comment">// ratio of 640:480, and we only want to see objects between 0.1 units</span>
    <span class="token comment">// and 100 units away from the camera.</span>
    perspectiveMatrix <span class="token operator">=</span> <span class="token function">makePerspective</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">640.0</span><span class="token operator">/</span><span class="token number">480.0</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">100.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Set the drawing position to the "identity" point, which is</span>
    <span class="token comment">// the center of the scene.</span>
    <span class="token function">loadIdentity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Now move the drawing position a bit to where we want to start</span>
    <span class="token comment">// drawing the cube.</span>
    <span class="token function">mvTranslate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                  <span class="token number">0.0</span> <span class="token operator">-</span> <span class="token punctuation">(</span>curPos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">25</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>curOrient<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token number">5.0</span> <span class="token operator">-</span> <span class="token punctuation">(</span>curPos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">25</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>curOrient<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token operator">-</span><span class="token number">15.0</span> <span class="token operator">-</span> <span class="token punctuation">(</span>curPos<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">25</span><span class="token punctuation">)</span>
               <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Save the current matrix, then rotate before we draw.</span>
    <span class="token function">mvPushMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">mvRotate</span><span class="token punctuation">(</span>cubeRotation<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.25</span> <span class="token operator">-</span> curOrient<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Draw the cube by binding the array buffer to the cube's vertices</span>
    <span class="token comment">// array, setting attributes, and pushing it to GL.</span>
    gl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> cubeVerticesBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    gl<span class="token punctuation">.</span><span class="token function">vertexAttribPointer</span><span class="token punctuation">(</span>vertexPositionAttribute<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">FLOAT</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Set the texture coordinates attribute for the vertices.</span>
    gl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> cubeVerticesTextureCoordBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    gl<span class="token punctuation">.</span><span class="token function">vertexAttribPointer</span><span class="token punctuation">(</span>textureCoordAttribute<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">FLOAT</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Specify the texture to map onto the faces.</span>
    gl<span class="token punctuation">.</span><span class="token function">activeTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> cubeTexture<span class="token punctuation">)</span><span class="token punctuation">;</span>
    gl<span class="token punctuation">.</span><span class="token function">uniform1i</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>shaderProgram<span class="token punctuation">,</span> <span class="token string">"uSampler"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Draw the cube.</span>
    gl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ELEMENT_ARRAY_BUFFER</span><span class="token punctuation">,</span> cubeVerticesIndexBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setMatrixUniforms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    gl<span class="token punctuation">.</span><span class="token function">drawElements</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_SHORT</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Restore the original matrix</span>
    <span class="token function">mvPopMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div>
<p>The next bit of the code has nothing to do with WebVR — it just updates the rotation of the cube on each frame:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token comment">// Update the rotation for the next draw, if it's time to do so.</span>
  <span class="token keyword">let</span> currentTime <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>lastCubeUpdateTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> delta <span class="token operator">=</span> currentTime <span class="token operator">-</span> lastCubeUpdateTime<span class="token punctuation">;</span>

    cubeRotation <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token number">30</span> <span class="token operator">*</span> delta<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000.0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  lastCubeUpdateTime <span class="token operator">=</span> currentTime<span class="token punctuation">;</span>
</code></pre></div>
<p>The last part of the rendering loop involves us calling <a href="../VRDisplay/submitFrame.html"><code>VRDisplay.submitFrame()</code></a> — now all the work has been done and we've rendered the display on the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas"><code>&lt;canvas&gt;</code></a>, this method then submits the frame to the VR display so it is displayed on there as well.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token comment">// WebVR: Indicate that we are ready to present the rendered frame to the VR display</span>
  vrDisplay<span class="token punctuation">.</span><span class="token function">submitFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div></section><section aria-labelledby="displaying_the_pose_position_orientation_etc._data"><h3 id="displaying_the_pose_position_orientation_etc._data"><a href="#displaying_the_pose_position_orientation_etc._data">Displaying the pose (position, orientation, etc.) data</a></h3><div class="section-content"><p>In this section we'll discuss the <code>displayPoseStats()</code> function, which displays our updated pose data on each frame. The function is fairly simple.</p>
<p>First of all, we store the six different property values obtainable from the <a href="../VRPose.html"><code>VRPose</code></a> object in their own variables — each one is a <a href="../../JavaScript/Reference/Global_Objects/Float32Array.html"><code>Float32Array</code></a>.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">displayPoseStats</span><span class="token punctuation">(</span><span class="token parameter">pose</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> pos <span class="token operator">=</span> pose<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
  <span class="token keyword">const</span> orient <span class="token operator">=</span> pose<span class="token punctuation">.</span>orientation<span class="token punctuation">;</span>
  <span class="token keyword">const</span> linVel <span class="token operator">=</span> pose<span class="token punctuation">.</span>linearVelocity<span class="token punctuation">;</span>
  <span class="token keyword">const</span> linAcc <span class="token operator">=</span> pose<span class="token punctuation">.</span>linearAcceleration<span class="token punctuation">;</span>
  <span class="token keyword">const</span> angVel <span class="token operator">=</span> pose<span class="token punctuation">.</span>angularVelocity<span class="token punctuation">;</span>
  <span class="token keyword">const</span> angAcc <span class="token operator">=</span> pose<span class="token punctuation">.</span>angularAcceleration<span class="token punctuation">;</span>
</code></pre></div>
<p>We then write out the data into the information box, updating it on every frame. We've clamped each value to three decimal places using <a href="../../JavaScript/Reference/Global_Objects/Number/toFixed.html"><code>toFixed()</code></a>, as the values are hard to read otherwise.</p>
<p>You should note that we've used a conditional expression to detect whether the linear acceleration and angular acceleration arrays are successfully returned before we display the data. These values are not reported by most VR hardware as yet, so the code would throw an error if we did not do this (the arrays return <code>null</code> if they are not successfully reported).</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  posStats<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Position: </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">x </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">y </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">z </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pos<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  orientStats<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Orientation: </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">x </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>orient<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">y </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>orient<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">z </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>orient<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  linVelStats<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Linear velocity: </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">x </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>linVel<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">y </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>linVel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">z </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>linVel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  angVelStats<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Angular velocity: </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">x </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>angVel<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">y </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>angVel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">z </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>angVel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>linAcc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    linAccStats<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Linear acceleration: </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">x </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>linAcc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">y </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>linAcc<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">z </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>linAcc<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    linAccStats<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Linear acceleration not reported'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>angAcc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    angAccStats<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Angular acceleration: </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">x </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>angAcc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">y </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>angAcc<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">z </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>angAcc<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    angAccStats<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Angular acceleration not reported'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div></section><section aria-labelledby="webvr_events"><a class="dashAnchor" name="//apple_ref/Section/WebVR%20events"></a><h2 id="webvr_events"><a href="#webvr_events">WebVR events</a></h2><div class="section-content"><p>The WebVR spec features a number of events that are fired, allowing our app code to react to changes in the state of the VR display (see <a href="../WebVR_API.html#window_events">Window events</a>). For example:</p>
<ul>
  <li><a href="../Window/vrdisplaypresentchange_event.html" title="vrdisplaypresentchange"><code>vrdisplaypresentchange</code></a> — Fires when the presenting state of a VR display changes — i.e. goes from presenting to not presenting, or vice versa.</li>
  <li><a href="../Window/vrdisplayconnect_event.html" title="vrdisplayconnect"><code>vrdisplayconnect</code></a> — Fires when a compatible VR display has been connected to the computer.</li>
  <li><a href="../Window/vrdisplaydisconnect_event.html" title="vrdisplaydisconnect"><code>vrdisplaydisconnect</code></a> — Fires when a compatible VR display has been disconnected from the computer.</li>
</ul>
<p>To demonstrate how they work, our simple demo includes the following example:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'vrdisplaypresentchange'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Display </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>e<span class="token punctuation">.</span>display<span class="token punctuation">.</span>displayId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> presentation has changed. Reason given: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>e<span class="token punctuation">.</span>reason<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>As you can see, the <a href="../VRDisplayEvent.html" title="event object"><code>event object</code></a> provides two useful properties — <a href="../VRDisplayEvent/display.html"><code>VRDisplayEvent.display</code></a>, which contains a reference to the <a href="../VRDisplay.html"><code>VRDisplay</code></a> the event was fired in response to, and <a href="../VRDisplayEvent/reason.html"><code>VRDisplayEvent.reason</code></a>, which contains a human-readable reason why the event was fired.</p>
<p>This is a very useful event; you could use it to handle cases where the display gets disconnected unexpectedly, stopping errors from being thrown and making sure the user is aware of the situation. In Google's Webvr.info presentation demo, the event is used to run an <a href="https://github.com/toji/webvr.info/blob/master/samples/03-vr-presentation.html#L174" class="external" target="_blank"><code>onVRPresentChange()</code> function</a>, which updates the UI controls as appropriate and resizes the canvas.</p></div></section><section aria-labelledby="summary"><a class="dashAnchor" name="//apple_ref/Section/Summary"></a><h2 id="summary"><a href="#summary">Summary</a></h2><div class="section-content"><p>This article has given you the very basics of how to create a simple WebVR 1.1 app, to help you get started.</p></div></section><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a content problem with this page?</h3><ul><li>Edit the page <a href="https://github.com/mdn/content/edit/main/files/en-us/web/api/webvr_api/using_the_webvr_api/index.md" title="This will take you to GitHub, where you'll need to sign in first." target="_blank" rel="noopener noreferrer">on GitHub</a>.</li><li>Report the <a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FWebVR_API%2FUsing_the_WebVR_API&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fapi%2Fwebvr_api%2Fusing_the_webvr_api%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FWebVR_API%2FUsing_the_WebVR_API%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fapi%2Fwebvr_api%2Fusing_the_webvr_api%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2F081123785142051fba3e353ff2d8c743af69b862%0A*+Document+last+modified%3A+2022-10-27T08%3A51%3A59.000Z%0A%0A%3C%2Fdetails%3E" title="This will take you to GitHub to file a new issue." target="_blank" rel="noopener noreferrer">content issue</a>.</li><li>View the source <a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/webvr_api/using_the_webvr_api/index.md?plain=1" title="Folder: en-us/web/api/webvr_api/using_the_webvr_api (Opens in a new tab)" target="_blank" rel="noopener noreferrer">on GitHub</a>.</li></ul>Want to get more involved? Learn<!-- --> <a href="https://github.com/mdn/content/blob/main/CONTRIBUTING.md" title="This will take you to our contribution guidelines on GitHub." target="_blank" rel="noopener noreferrer">how to contribute</a>.</div><p class="last-modified-date">This page was last modified on<!-- --> <time datetime="2022-10-27T08:51:59.000Z">Oct 27, 2022</time> by<!-- --> <a href="Using_the_WebVR_API/contributors.txt">MDN contributors</a>.</p></div></aside></article></main></div><footer id="nav-footer" class="page-footer"><div><a href="http://developer.mozilla.org/en-US/docs/Web/API/WebVR_API/Using_the_WebVR_API">Using the WebVR API</a> by <a href="http://developer.mozilla.org/en-US/docs/Web/API/WebVR_API/Using_the_WebVR_API$history">Mozilla Contributors</a> is licensed under <a href="http://creativecommons.org/licenses/by-sa/2.5/">CC-BY-SA 2.5</a>.</div></footer></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Using the WebVR API","mdn_url":"/en-US/docs/Web/API/WebVR_API/Using_the_WebVR_API","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/WebVR_API\">WebVR API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/WebVR_API\"><code>WebVR_API</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for WebVR API</summary><ol><li><a href=\"/en-US/docs/Web/API/Gamepad/displayId\"><code>Gamepad.displayId</code></a></li><li><a href=\"/en-US/docs/Web/API/Navigator/activeVRDisplays\"><code>Navigator.activeVRDisplays</code></a></li><li><a href=\"/en-US/docs/Web/API/Navigator/getVRDisplays\"><code>Navigator.getVRDisplays()</code></a></li><li><a href=\"/en-US/docs/Web/API/VRDisplay\"><code>VRDisplay</code></a></li><li><a href=\"/en-US/docs/Web/API/VRDisplayCapabilities\"><code>VRDisplayCapabilities</code></a></li><li><a href=\"/en-US/docs/Web/API/VRDisplayEvent\"><code>VRDisplayEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/VREyeParameters\"><code>VREyeParameters</code></a></li><li><a href=\"/en-US/docs/Web/API/VRFieldOfView\"><code>VRFieldOfView</code></a></li><li><a href=\"/en-US/docs/Web/API/VRFrameData\"><code>VRFrameData</code></a></li><li><a href=\"/en-US/docs/Web/API/VRLayerInit\"><code>VRLayerInit</code></a></li><li><a href=\"/en-US/docs/Web/API/VRPose\"><code>VRPose</code></a></li><li><a href=\"/en-US/docs/Web/API/VRStageParameters\"><code>VRStageParameters</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard deprecated\" id=\"sect1\"><p><strong>Deprecated:</strong> This feature is no longer recommended. Though some browsers might still support it, it may have already been removed from the relevant web standards, may be in the process of being dropped, or may only be kept for compatibility purposes. Avoid using it, and update existing code if possible; see the <a href=\"#browser_compatibility\">compatibility table</a> at the bottom of this page to guide your decision. Be aware that this feature may cease to work at any time.</p></div>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note:</strong> WebVR API is replaced by <a href=\"/en-US/docs/Web/API/WebXR_Device_API\">WebXR API</a>. WebVR was never ratified as a standard, was implemented and enabled by default in very few browsers and supported a small number of devices.</p>\n</div>\n<p>The WebVR API is a fantastic addition to the web developer's toolkit, allowing WebGL scenes to be presented in virtual reality displays such as the Oculus Rift and HTC Vive. But how do you get started with developing VR apps for the Web? This article will guide you through the basics.</p>"}},{"type":"prose","value":{"id":"getting_started","title":"Getting started","isH3":false,"content":"<p>To get started, you need:</p>\n<ul>\n  <li>Supporting VR hardware.\n    <ul>\n      <li>The cheapest option is to use a mobile device, supporting browser, and device mount (e.g. Google Cardboard). This won't be quite as good an experience as dedicated hardware, but you won't need to purchase a powerful computer or dedicated VR display.</li>\n      <li>Dedicated hardware can be costly, but it does provide a better experience. The most WebVR-compatible hardware at the moment is the HTC VIVE, and The Oculus Rift. The front page of <a href=\"https://webvr.info/\" class=\"external\" target=\"_blank\">webvr.info</a> has some further useful information about available hardware, and what browser support them.</li>\n    </ul>\n  </li>\n  <li>A computer powerful enough to handle rendering/displaying of VR scenes using your dedicated VR Hardware, if required. To give you an idea of what you need, look at the relevant guide for the VR you are purchasing (e.g. <a href=\"https://www.vive.com/us/ready/\" class=\"external\" target=\"_blank\">VIVE READY Computers</a>).</li>\n  <li>A supporting browser installed — the latest <a href=\"https://www.mozilla.org/en-US/firefox/channel/desktop/\" class=\"external\" target=\"_blank\">Firefox Nightly</a> or <a href=\"https://www.google.com/chrome/index.html\" class=\"external\" target=\"_blank\">Chrome</a> are your best options right now, on desktop or mobile.</li>\n</ul>\n<p>Once you have everything assembled, you can test to see whether your setup works with WebVR by going to our <a href=\"https://mdn.github.io/webvr-tests/webvr/aframe-demo/\" class=\"external\" target=\"_blank\">simple A-Frame demo</a>, and seeing whether the scene renders and whether you can enter VR display mode by pressing the button at the bottom right.</p>\n<p><a href=\"https://aframe.io/\" class=\"external\" target=\"_blank\">A-Frame</a> is by far the best option if you want to create a WebVR-compatible 3D scene quickly, without needing to understand a bunch of new JavaScript code. It doesn't however teach you how the raw WebVR API works, and this is what we'll get on to next.</p>"}},{"type":"prose","value":{"id":"introducing_our_demo","title":"Introducing our demo","isH3":false,"content":"<p>To illustrate how the WebVR API works, we'll study our raw-webgl-example, which looks a bit like this:</p>\n<p>\n  <img src=\"/en-US/docs/Web/API/WebVR_API/Using_the_WebVR_API/capture1.png\" alt=\"A gray rotating 3D cube\" width=\"1341\" height=\"761\" loading=\"lazy\">\n</p>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>Note:</strong> You can find the <a href=\"https://github.com/mdn/webvr-tests/tree/main/webvr/raw-webgl-example\" class=\"external\" target=\"_blank\">source code of our demo</a> on GitHub, and <a href=\"https://mdn.github.io/webvr-tests/webvr/raw-webgl-example/\" class=\"external\" target=\"_blank\">view it live</a> also.</p>\n</div>\n<div class=\"notecard note\" id=\"sect4\">\n  <p><strong>Note:</strong> If WebVR isn't working in your browser, you might need to make sure it is running through your graphics card. For example for NVIDIA cards, if you've got the NVIDIA control panel set up successfully, there will be a context menu option available — right click on Firefox, then choose <em>Run with graphics processor &gt; High-performance NVIDIA processor</em>.</p>\n</div>\n<p>Our demo features the holy grail of WebGL demos — a rotating 3D cube. We've implemented this using raw <a href=\"/en-US/docs/Web/API/WebGL_API\">WebGL API</a> code. We won't be teaching any basic JavaScript or WebGL, just the WebVR parts.</p>\n<p>Our demo also features:</p>\n<ul>\n  <li>A button to start (and stop) our scene from being presented in the VR display.</li>\n  <li>A button to show (and hide) VR pose data, i.e. the position and orientation of the headset, updated in real time.</li>\n</ul>\n<p>When you look through the source code of <a href=\"https://github.com/mdn/webvr-tests/blob/main/webvr/raw-webgl-example/webgl-demo.js\" class=\"external\" target=\"_blank\">our demo's main JavaScript file</a>, you can easily find the WebVR-specific parts by searching for the string \"WebVR\" in preceding comments.</p>\n<div class=\"notecard note\" id=\"sect5\">\n  <p><strong>Note:</strong> To find out more about basic JavaScript and WebGL, consult our <a href=\"/en-US/docs/Learn/JavaScript\">JavaScript learning material</a>, and our <a href=\"/en-US/docs/Web/API/WebGL_API/Tutorial\">WebGL Tutorial</a>.</p>\n</div>"}},{"type":"prose","value":{"id":"how_does_it_work","title":"How does it work?","isH3":false,"content":"<p>At this point, let's look at how the WebVR parts of the code work.</p>\n<p>A typical (simple) WebVR app works like this:</p>\n<ol>\n  <li><a href=\"/en-US/docs/Web/API/Navigator/getVRDisplays\"><code>Navigator.getVRDisplays()</code></a> is used to get a reference to your VR display.</li>\n  <li><a href=\"/en-US/docs/Web/API/VRDisplay/requestPresent\"><code>VRDisplay.requestPresent()</code></a> is used to start presenting to the VR display.</li>\n  <li>WebVR's dedicated <a href=\"/en-US/docs/Web/API/VRDisplay/requestAnimationFrame\"><code>VRDisplay.requestAnimationFrame()</code></a> method is used to run the app's rendering loop at the correct refresh rate for the display.</li>\n  <li>Inside the rendering loop, you grab the data required to display the current frame (<a href=\"/en-US/docs/Web/API/VRDisplay/getFrameData\"><code>VRDisplay.getFrameData()</code></a>), draw the displayed scene twice — once for the view in each eye — then submit the rendered view to the display to show to the user via (<a href=\"/en-US/docs/Web/API/VRDisplay/submitFrame\"><code>VRDisplay.submitFrame()</code></a>).</li>\n</ol>\n<p>In the below sections we'll look at our raw-webgl-demo in detail, and see where exactly the above features are used.</p>"}},{"type":"prose","value":{"id":"starting_with_some_variables","title":"Starting with some variables","isH3":true,"content":"<p>The first WebVR-related code you'll meet is this following block:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// WebVR variables</span>\n\n<span class=\"token keyword\">const</span> frameData <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">VRFrameData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> vrDisplay<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> btn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.stop-start'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> normalSceneFrame<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> vrSceneFrame<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> poseStatsBtn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.pose-stats'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> poseStatsSection <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'section'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nposeStatsSection<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>visibility <span class=\"token operator\">=</span> <span class=\"token string\">'hidden'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// hide it initially</span>\n\n<span class=\"token keyword\">const</span> posStats <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.pos'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> orientStats <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.orient'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> linVelStats <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.lin-vel'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> linAccStats <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.lin-acc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> angVelStats <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.ang-vel'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> angAccStats <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.ang-acc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> poseStatsDisplayed <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Let's briefly explain these:</p>\n<ul>\n  <li><code>frameData</code> contains a <a href=\"/en-US/docs/Web/API/VRFrameData\"><code>VRFrameData</code></a> object, created using the <a href=\"/en-US/docs/Web/API/VRFrameData/VRFrameData\" title=\"VRFrameData()\"><code>VRFrameData()</code></a> constructor. This is initially empty, but will later contain the data required to render each frame to show in the VR display, updated constantly as the rendering loop runs.</li>\n  <li><code>vrDisplay</code> starts uninitialized, but will later on hold a reference to our VR headset (<a href=\"/en-US/docs/Web/API/VRDisplay\"><code>VRDisplay</code></a> — the central control object of the API).</li>\n  <li><code>btn</code> and <code>poseStatsBtn</code> hold references to the two buttons we are using to control our app.</li>\n  <li><code>normalSceneFrame</code> and <code>vrSceneFrame</code> start uninitialized, but later on will hold references to <a href=\"/en-US/docs/Web/API/window/requestAnimationFrame\"><code>Window.requestAnimationFrame()</code></a> and <a href=\"/en-US/docs/Web/API/VRDisplay/requestAnimationFrame\"><code>VRDisplay.requestAnimationFrame()</code></a> calls — these will initiate the running of a normal rendering loop, and a special WebVR rendering loop; we'll explain the difference between these two later on.</li>\n  <li>The other variables store references to different parts of the VR pose data display box, which you can see in the bottom right-hand corner of the UI.</li>\n</ul>"}},{"type":"prose","value":{"id":"getting_a_reference_to_our_vr_display","title":"Getting a reference to our VR display","isH3":true,"content":"<p>One of the major functions inside our code is <code>start()</code> — we run this function when the body has finished loading:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// start</span>\n<span class=\"token comment\">//</span>\n<span class=\"token comment\">// Called when the body has loaded is created to get the ball rolling.</span>\n\ndocument<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>onload <span class=\"token operator\">=</span> start<span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>To begin with, <code>start()</code> retrieves a WebGL context to use to render 3D graphics into the <a href=\"/en-US/docs/Web/HTML/Element/canvas\"><code>&lt;canvas&gt;</code></a> element in <a href=\"https://github.com/mdn/webvr-tests/blob/main/webvr/raw-webgl-example/index.html\" class=\"external\" target=\"_blank\">our HTML</a>. We then check whether the <code>gl</code> context is available — if so, we run a number of functions to set up the scene for display.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  canvas <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"glcanvas\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">initWebGL</span><span class=\"token punctuation\">(</span>canvas<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// Initialize the GL context</span>\n\n  <span class=\"token comment\">// WebGL setup code here</span>\n</code></pre></div>\n<p>Next, we start the process of actually rendering the scene onto the canvas, by setting the canvas to fill the entire browser viewport, and running the rendering loop (<code>drawScene()</code>) for the first time. This is the non-WebVR — normal — rendering loop.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token comment\">// draw the scene normally, without WebVR - for those who don't have it and want to see the scene in their browser</span>\n\n  canvas<span class=\"token punctuation\">.</span>width <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>innerWidth<span class=\"token punctuation\">;</span>\n  canvas<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>innerHeight<span class=\"token punctuation\">;</span>\n  <span class=\"token function\">drawScene</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Now onto our first WebVR-specific code. First of all, we check to see if <a href=\"/en-US/docs/Web/API/Navigator/getVRDisplays\"><code>Navigator.getVRDisplays</code></a> exists — this is the entry point into the API, and therefore good basic feature detection for WebVR. You'll see at the end of the block (inside the <code>else</code> clause) that if this doesn't exist, we log a message to indicate that WebVR 1.1 isn't supported by the browser.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token comment\">// WebVR: Check to see if WebVR is supported</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>navigator<span class=\"token punctuation\">.</span>getVRDisplays<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'WebVR 1.1 supported'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Inside our <code>if () { }</code> block, we run the <a href=\"/en-US/docs/Web/API/Navigator/getVRDisplays\"><code>Navigator.getVRDisplays()</code></a> function. This returns a promise, which is fulfilled with an array containing all the VR display devices connected to the computer. If none are connected, the array will be empty.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>    <span class=\"token comment\">// Then get the displays attached to the computer</span>\n    navigator<span class=\"token punctuation\">.</span><span class=\"token function\">getVRDisplays</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">displays</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n</code></pre></div>\n<p>Inside the promise <code>then()</code> block, we check whether the array length is more than 0; if so, we set the value of our <code>vrDisplay</code> variable to the 0 index item inside the array. <code>vrDisplay</code> now contains a <a href=\"/en-US/docs/Web/API/VRDisplay\"><code>VRDisplay</code></a> object representing our connected display!</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>      <span class=\"token comment\">// If a display is available, use it to present the scene</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>displays<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        vrDisplay <span class=\"token operator\">=</span> displays<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Display found'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"notecard note\" id=\"sect6\">\n  <p><strong>Note:</strong> It is unlikely that you'll have multiple VR displays connected to your computer, and this is just a simple demo, so this will do for now.</p>\n</div>"}},{"type":"prose","value":{"id":"starting_and_stopping_the_vr_presentation","title":"Starting and stopping the VR presentation","isH3":true,"content":"<p>Now we have a <a href=\"/en-US/docs/Web/API/VRDisplay\"><code>VRDisplay</code></a> object, we can use it do a number of things. The next thing we want to do is wire up functionality to start and stop presentation of the WebGL content to the display.</p>\n<p>Continuing on with the previous code block, we now add an event listener to our start/stop button (<code>btn</code>) — when this button is clicked we want to check whether we are presenting to the display already (we do this in a fairly dumb fashion, by checking what the button <a href=\"/en-US/docs/Web/API/Node/textContent\"><code>textContent</code></a> contains).</p>\n<p>If the display is not already presenting, we use the <a href=\"/en-US/docs/Web/API/VRDisplay/requestPresent\"><code>VRDisplay.requestPresent()</code></a> method to request that the browser start presenting content to the display. This takes as a parameter an array of the <a href=\"/en-US/docs/Web/API/VRLayerInit\"><code>VRLayerInit</code></a> objects representing the layers you want to present in the display.</p>\n<p>Since the maximum number of layers you can display is currently 1, and the only required object member is the <a href=\"/en-US/docs/Web/API/VRLayerInit/source\"><code>VRLayerInit.source</code></a> property (which is a reference to the <a href=\"/en-US/docs/Web/HTML/Element/canvas\"><code>&lt;canvas&gt;</code></a> you want to present in that layer; the other parameters are given sensible defaults — see <a href=\"/en-US/docs/Web/API/VRLayerInit/leftBounds\" title=\"leftBounds\"><code>leftBounds</code></a> and <a href=\"/en-US/docs/Web/API/VRLayerInit/rightBounds\" title=\"rightBounds\"><code>rightBounds</code></a>)), the parameter is [{ source: canvas }].</p>\n<p><code>requestPresent()</code> returns a promise that is fulfilled when the presentation begins successfully.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>        <span class=\"token comment\">// Starting the presentation when the button is clicked: It can only be called in response to a user gesture</span>\n        btn<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>btn<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">===</span> <span class=\"token string\">'Start VR display'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            vrDisplay<span class=\"token punctuation\">.</span><span class=\"token function\">requestPresent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">source</span><span class=\"token operator\">:</span> canvas <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n              console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Presenting to WebVR display'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>With our presentation request successful, we now want to start setting up to render content to present to the VRDisplay. First of all we set the canvas to the same size as the VR display area. We do this by getting the <a href=\"/en-US/docs/Web/API/VREyeParameters\"><code>VREyeParameters</code></a> for both eyes using <a href=\"/en-US/docs/Web/API/VRDisplay/getEyeParameters\"><code>VRDisplay.getEyeParameters()</code></a>.</p>\n<p>We then do some simple math to calculate the total width of the VRDisplay rendering area based on the eye <a href=\"/en-US/docs/Web/API/VREyeParameters/renderWidth\"><code>VREyeParameters.renderWidth</code></a> and <a href=\"/en-US/docs/Web/API/VREyeParameters/renderHeight\"><code>VREyeParameters.renderHeight</code></a>.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>              <span class=\"token comment\">// Set the canvas size to the size of the vrDisplay viewport</span>\n\n              <span class=\"token keyword\">const</span> leftEye <span class=\"token operator\">=</span> vrDisplay<span class=\"token punctuation\">.</span><span class=\"token function\">getEyeParameters</span><span class=\"token punctuation\">(</span><span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">const</span> rightEye <span class=\"token operator\">=</span> vrDisplay<span class=\"token punctuation\">.</span><span class=\"token function\">getEyeParameters</span><span class=\"token punctuation\">(</span><span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n              canvas<span class=\"token punctuation\">.</span>width <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>leftEye<span class=\"token punctuation\">.</span>renderWidth<span class=\"token punctuation\">,</span> rightEye<span class=\"token punctuation\">.</span>renderWidth<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n              canvas<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>leftEye<span class=\"token punctuation\">.</span>renderHeight<span class=\"token punctuation\">,</span> rightEye<span class=\"token punctuation\">.</span>renderHeight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Next, we <a href=\"/en-US/docs/Web/API/Window/cancelAnimationFrame\" title=\"cancel the animation loop\"><code>cancel the animation loop</code></a> previously set in motion by the <a href=\"/en-US/docs/Web/API/window/requestAnimationFrame\"><code>Window.requestAnimationFrame()</code></a> call inside the <code>drawScene()</code> function, and instead invoke <code>drawVRScene()</code>. This function renders the same scene as before, but with some special WebVR magic going on. The loop inside here is maintained by WebVR's special <a href=\"/en-US/docs/Web/API/VRDisplay/requestAnimationFrame\"><code>VRDisplay.requestAnimationFrame</code></a> method.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>              <span class=\"token comment\">// stop the normal presentation, and start the vr presentation</span>\n              window<span class=\"token punctuation\">.</span><span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span>normalSceneFrame<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token function\">drawVRScene</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Finally, we update the button text so that the next time it is pressed, it will stop presentation to the VR display.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>              btn<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Exit VR display'</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>To stop the VR presentation when the button is subsequently pressed, we call <a href=\"/en-US/docs/Web/API/VRDisplay/exitPresent\"><code>VRDisplay.exitPresent()</code></a>. We also reverse the button's text content, and swap over the <code>requestAnimationFrame</code> calls. You can see here that we are using <a href=\"/en-US/docs/Web/API/VRDisplay/cancelAnimationFrame\"><code>VRDisplay.cancelAnimationFrame</code></a> to stop the VR rendering loop, and starting the normal rendering loop off again by calling <code>drawScene()</code>.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            vrDisplay<span class=\"token punctuation\">.</span><span class=\"token function\">exitPresent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Stopped presenting to WebVR display'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            btn<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Start VR display'</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// Stop the VR presentation, and start the normal presentation</span>\n            vrDisplay<span class=\"token punctuation\">.</span><span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span>vrSceneFrame<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">drawScene</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'WebVR API not supported by this browser.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Once the presentation starts, you'll be able to see the stereoscopic view displayed in the browser:</p>\n<p>\n  <img src=\"/en-US/docs/Web/API/WebVR_API/Using_the_WebVR_API/capture2.png\" alt=\"Stereoscopic view of 3D cube\" width=\"1341\" height=\"761\" loading=\"lazy\">\n</p>\n<p>You'll learn below how the stereoscopic view is actually produced.</p>"}},{"type":"prose","value":{"id":"why_does_webvr_have_its_own_requestanimationframe","title":"Why does WebVR have its own requestAnimationFrame()?","isH3":true,"content":"<p>This is a good question. The reason is that for smooth rendering inside the VR display, you need to render the content at the display's native refresh rate, not that of the computer. VR display refresh rates are greater than PC refresh rates, typically up to 90fps. The rate will be differ from the computer's core refresh rate.</p>\n<p>Note that when the VR display is not presenting, <a href=\"/en-US/docs/Web/API/VRDisplay/requestAnimationFrame\"><code>VRDisplay.requestAnimationFrame</code></a> runs identically to <a href=\"/en-US/docs/Web/API/window/requestAnimationFrame\"><code>Window.requestAnimationFrame</code></a>, so if you wanted, you could just use a single rendering loop, rather than the two we are using in our app. We have used two because we wanted to do slightly different things depending on whether the VR display is presenting or not, and keep things separated for ease of comprehension.</p>"}},{"type":"prose","value":{"id":"rendering_and_display","title":"Rendering and display","isH3":true,"content":"<p>At this point, we've seen all the code required to access the VR hardware, request that we present our scene to the hardware, and start running the rending loop. Let's now look at the code for the rendering loop, and explain how the WebVR-specific parts of it work.</p>\n<p>First of all, we begin the definition of our rendering loop function — <code>drawVRScene()</code>. The first thing we do inside here is make a call to <a href=\"/en-US/docs/Web/API/VRDisplay/requestAnimationFrame\"><code>VRDisplay.requestAnimationFrame()</code></a> to keep the loop running after it has been called once (this occurred earlier on in our code when we started presenting to the VR display). This call is set as the value of the global <code>vrSceneFrame</code> variable, so we can cancel the loop with a call to <a href=\"/en-US/docs/Web/API/VRDisplay/cancelAnimationFrame\"><code>VRDisplay.cancelAnimationFrame()</code></a> once we exit VR presenting.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">drawVRScene</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// WebVR: Request the next frame of the animation</span>\n  vrSceneFrame <span class=\"token operator\">=</span> vrDisplay<span class=\"token punctuation\">.</span><span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>drawVRScene<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Next, we call <a href=\"/en-US/docs/Web/API/VRDisplay/getFrameData\"><code>VRDisplay.getFrameData()</code></a>, passing it the name of the variable that we want to use to contain the frame data. We initialized this earlier on — <code>frameData</code>. After the call completes, this variable will contain the data need to render the next frame to the VR device, packaged up as a <a href=\"/en-US/docs/Web/API/VRFrameData\"><code>VRFrameData</code></a> object. This contains things like projection and view matrices for rendering the scene correctly for the left and right eye view, and the current <a href=\"/en-US/docs/Web/API/VRPose\"><code>VRPose</code></a> object, which contains data on the VR display such as orientation, position, etc.</p>\n<p>This has to be called on every frame so the rendered view is always up-to-date.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token comment\">// Populate frameData with the data of the next frame to display</span>\n  vrDisplay<span class=\"token punctuation\">.</span><span class=\"token function\">getFrameData</span><span class=\"token punctuation\">(</span>frameData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Now we retrieve the current <a href=\"/en-US/docs/Web/API/VRPose\"><code>VRPose</code></a> from the <a href=\"/en-US/docs/Web/API/VRFrameData/pose\"><code>VRFrameData.pose</code></a> property, store the position and orientation for use later on, and send the current pose to the pose stats box for display, if the <code>poseStatsDisplayed</code> variable is set to true.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token comment\">// You can get the position, orientation, etc. of the display from the current frame's pose</span>\n\n  <span class=\"token keyword\">const</span> curFramePose <span class=\"token operator\">=</span> frameData<span class=\"token punctuation\">.</span>pose<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> curPos <span class=\"token operator\">=</span> curFramePose<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> curOrient <span class=\"token operator\">=</span> curFramePose<span class=\"token punctuation\">.</span>orientation<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>poseStatsDisplayed<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">displayPoseStats</span><span class=\"token punctuation\">(</span>curFramePose<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>We now clear the canvas before we start drawing on it, so that the next frame is clearly seen, and we don't also see previous rendered frames:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token comment\">// Clear the canvas before we start drawing on it.</span>\n\n  gl<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">.</span><span class=\"token constant\">COLOR_BUFFER_BIT</span> <span class=\"token operator\">|</span> gl<span class=\"token punctuation\">.</span><span class=\"token constant\">DEPTH_BUFFER_BIT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>We now render the view for both the left and right eyes. First of all we need to create projection and view locations for use in the rendering. These are <a href=\"/en-US/docs/Web/API/WebGLUniformLocation\"><code>WebGLUniformLocation</code></a> objects, created using the <a href=\"/en-US/docs/Web/API/WebGLRenderingContext/getUniformLocation\"><code>WebGLRenderingContext.getUniformLocation()</code></a> method, passing it the shader program's identifier and an identifying name as parameters.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token comment\">// WebVR: Create the required projection and view matrix locations needed</span>\n  <span class=\"token comment\">// for passing into the uniformMatrix4fv methods below</span>\n\n  <span class=\"token keyword\">const</span> projectionMatrixLocation <span class=\"token operator\">=</span> gl<span class=\"token punctuation\">.</span><span class=\"token function\">getUniformLocation</span><span class=\"token punctuation\">(</span>shaderProgram<span class=\"token punctuation\">,</span> <span class=\"token string\">\"projMatrix\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> viewMatrixLocation <span class=\"token operator\">=</span> gl<span class=\"token punctuation\">.</span><span class=\"token function\">getUniformLocation</span><span class=\"token punctuation\">(</span>shaderProgram<span class=\"token punctuation\">,</span> <span class=\"token string\">\"viewMatrix\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>The next rendering step involves:</p>\n<ul>\n  <li>Specifying the viewport size for the left eye, using <a href=\"/en-US/docs/Web/API/WebGLRenderingContext/viewport\"><code>WebGLRenderingContext.viewport</code></a> — this is logically the first half of the canvas width, and the full canvas height.</li>\n  <li>Specifying the view and projection matrix values to use to render the left eye — this is done using the <a href=\"/en-US/docs/Web/API/WebGLRenderingContext/uniformMatrix\" title=\"WebGLRenderingContext.uniformMatrix4fv\"><code>WebGLRenderingContext.uniformMatrix4fv</code></a> method, which is passed the location values we retrieved above, and the left matrices obtained from the <a href=\"/en-US/docs/Web/API/VRFrameData\"><code>VRFrameData</code></a> object.</li>\n  <li>Running the <code>drawGeometry()</code> function, which renders the actual scene — because of what we specified in the previous two steps, we will render it for the left eye only.</li>\n</ul>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token comment\">// WebVR: Render the left eye's view to the left half of the canvas</span>\n  gl<span class=\"token punctuation\">.</span><span class=\"token function\">viewport</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  gl<span class=\"token punctuation\">.</span><span class=\"token function\">uniformMatrix4fv</span><span class=\"token punctuation\">(</span>projectionMatrixLocation<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> frameData<span class=\"token punctuation\">.</span>leftProjectionMatrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  gl<span class=\"token punctuation\">.</span><span class=\"token function\">uniformMatrix4fv</span><span class=\"token punctuation\">(</span>viewMatrixLocation<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> frameData<span class=\"token punctuation\">.</span>leftViewMatrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">drawGeometry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>We now do exactly the same thing, but for the right eye:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token comment\">// WebVR: Render the right eye's view to the right half of the canvas</span>\n  gl<span class=\"token punctuation\">.</span><span class=\"token function\">viewport</span><span class=\"token punctuation\">(</span>canvas<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  gl<span class=\"token punctuation\">.</span><span class=\"token function\">uniformMatrix4fv</span><span class=\"token punctuation\">(</span>projectionMatrixLocation<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> frameData<span class=\"token punctuation\">.</span>rightProjectionMatrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  gl<span class=\"token punctuation\">.</span><span class=\"token function\">uniformMatrix4fv</span><span class=\"token punctuation\">(</span>viewMatrixLocation<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> frameData<span class=\"token punctuation\">.</span>rightViewMatrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">drawGeometry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Next we define our <code>drawGeometry()</code> function. Most of this is just general WebGL code required to draw our 3D cube. You'll see some WebVR-specific parts in the <code>mvTranslate()</code> and <code>mvRotate()</code> function calls — these pass matrices into the WebGL program that define the translation and rotation of the cube for the current frame</p>\n<p>You'll see that we are modifying these values by the position (<code>curPos</code>) and orientation (<code>curOrient</code>) of the VR display we got from the <a href=\"/en-US/docs/Web/API/VRPose\"><code>VRPose</code></a> object. The result is that, for example, as you move or rotate your head left, the x position value (<code>curPos[0]</code>) and y rotation value (<code>[curOrient[1]</code>) are added to the x translation value, meaning that the cube will move to the right, as you'd expect when you are looking at something and then move/turn your head left.</p>\n<p>This is a quick and dirty way to use VR pose data, but it illustrates the basic principle.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token keyword\">function</span> <span class=\"token function\">drawGeometry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Establish the perspective with which we want to view the</span>\n    <span class=\"token comment\">// scene. Our field of view is 45 degrees, with a width/height</span>\n    <span class=\"token comment\">// ratio of 640:480, and we only want to see objects between 0.1 units</span>\n    <span class=\"token comment\">// and 100 units away from the camera.</span>\n    perspectiveMatrix <span class=\"token operator\">=</span> <span class=\"token function\">makePerspective</span><span class=\"token punctuation\">(</span><span class=\"token number\">45</span><span class=\"token punctuation\">,</span> <span class=\"token number\">640.0</span><span class=\"token operator\">/</span><span class=\"token number\">480.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Set the drawing position to the \"identity\" point, which is</span>\n    <span class=\"token comment\">// the center of the scene.</span>\n    <span class=\"token function\">loadIdentity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Now move the drawing position a bit to where we want to start</span>\n    <span class=\"token comment\">// drawing the cube.</span>\n    <span class=\"token function\">mvTranslate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n                  <span class=\"token number\">0.0</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>curPos<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>curOrient<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token number\">5.0</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>curPos<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>curOrient<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token operator\">-</span><span class=\"token number\">15.0</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>curPos<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span>\n               <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Save the current matrix, then rotate before we draw.</span>\n    <span class=\"token function\">mvPushMatrix</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">mvRotate</span><span class=\"token punctuation\">(</span>cubeRotation<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0.25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.25</span> <span class=\"token operator\">-</span> curOrient<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Draw the cube by binding the array buffer to the cube's vertices</span>\n    <span class=\"token comment\">// array, setting attributes, and pushing it to GL.</span>\n    gl<span class=\"token punctuation\">.</span><span class=\"token function\">bindBuffer</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">.</span><span class=\"token constant\">ARRAY_BUFFER</span><span class=\"token punctuation\">,</span> cubeVerticesBuffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    gl<span class=\"token punctuation\">.</span><span class=\"token function\">vertexAttribPointer</span><span class=\"token punctuation\">(</span>vertexPositionAttribute<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> gl<span class=\"token punctuation\">.</span><span class=\"token constant\">FLOAT</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Set the texture coordinates attribute for the vertices.</span>\n    gl<span class=\"token punctuation\">.</span><span class=\"token function\">bindBuffer</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">.</span><span class=\"token constant\">ARRAY_BUFFER</span><span class=\"token punctuation\">,</span> cubeVerticesTextureCoordBuffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    gl<span class=\"token punctuation\">.</span><span class=\"token function\">vertexAttribPointer</span><span class=\"token punctuation\">(</span>textureCoordAttribute<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> gl<span class=\"token punctuation\">.</span><span class=\"token constant\">FLOAT</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Specify the texture to map onto the faces.</span>\n    gl<span class=\"token punctuation\">.</span><span class=\"token function\">activeTexture</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">.</span><span class=\"token constant\">TEXTURE0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    gl<span class=\"token punctuation\">.</span><span class=\"token function\">bindTexture</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">.</span><span class=\"token constant\">TEXTURE_2D</span><span class=\"token punctuation\">,</span> cubeTexture<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    gl<span class=\"token punctuation\">.</span><span class=\"token function\">uniform1i</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">.</span><span class=\"token function\">getUniformLocation</span><span class=\"token punctuation\">(</span>shaderProgram<span class=\"token punctuation\">,</span> <span class=\"token string\">\"uSampler\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Draw the cube.</span>\n    gl<span class=\"token punctuation\">.</span><span class=\"token function\">bindBuffer</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">.</span><span class=\"token constant\">ELEMENT_ARRAY_BUFFER</span><span class=\"token punctuation\">,</span> cubeVerticesIndexBuffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setMatrixUniforms</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    gl<span class=\"token punctuation\">.</span><span class=\"token function\">drawElements</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">.</span><span class=\"token constant\">TRIANGLES</span><span class=\"token punctuation\">,</span> <span class=\"token number\">36</span><span class=\"token punctuation\">,</span> gl<span class=\"token punctuation\">.</span><span class=\"token constant\">UNSIGNED_SHORT</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Restore the original matrix</span>\n    <span class=\"token function\">mvPopMatrix</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>The next bit of the code has nothing to do with WebVR — it just updates the rotation of the cube on each frame:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token comment\">// Update the rotation for the next draw, if it's time to do so.</span>\n  <span class=\"token keyword\">let</span> currentTime <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>lastCubeUpdateTime<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> delta <span class=\"token operator\">=</span> currentTime <span class=\"token operator\">-</span> lastCubeUpdateTime<span class=\"token punctuation\">;</span>\n\n    cubeRotation <span class=\"token operator\">+=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">30</span> <span class=\"token operator\">*</span> delta<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">1000.0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  lastCubeUpdateTime <span class=\"token operator\">=</span> currentTime<span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>The last part of the rendering loop involves us calling <a href=\"/en-US/docs/Web/API/VRDisplay/submitFrame\"><code>VRDisplay.submitFrame()</code></a> — now all the work has been done and we've rendered the display on the <a href=\"/en-US/docs/Web/HTML/Element/canvas\"><code>&lt;canvas&gt;</code></a>, this method then submits the frame to the VR display so it is displayed on there as well.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token comment\">// WebVR: Indicate that we are ready to present the rendered frame to the VR display</span>\n  vrDisplay<span class=\"token punctuation\">.</span><span class=\"token function\">submitFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"displaying_the_pose_position_orientation_etc._data","title":"Displaying the pose (position, orientation, etc.) data","isH3":true,"content":"<p>In this section we'll discuss the <code>displayPoseStats()</code> function, which displays our updated pose data on each frame. The function is fairly simple.</p>\n<p>First of all, we store the six different property values obtainable from the <a href=\"/en-US/docs/Web/API/VRPose\"><code>VRPose</code></a> object in their own variables — each one is a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array\"><code>Float32Array</code></a>.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">displayPoseStats</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pose</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> pos <span class=\"token operator\">=</span> pose<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> orient <span class=\"token operator\">=</span> pose<span class=\"token punctuation\">.</span>orientation<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> linVel <span class=\"token operator\">=</span> pose<span class=\"token punctuation\">.</span>linearVelocity<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> linAcc <span class=\"token operator\">=</span> pose<span class=\"token punctuation\">.</span>linearAcceleration<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> angVel <span class=\"token operator\">=</span> pose<span class=\"token punctuation\">.</span>angularVelocity<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> angAcc <span class=\"token operator\">=</span> pose<span class=\"token punctuation\">.</span>angularAcceleration<span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>We then write out the data into the information box, updating it on every frame. We've clamped each value to three decimal places using <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed\"><code>toFixed()</code></a>, as the values are hard to read otherwise.</p>\n<p>You should note that we've used a conditional expression to detect whether the linear acceleration and angular acceleration arrays are successfully returned before we display the data. These values are not reported by most VR hardware as yet, so the code would throw an error if we did not do this (the arrays return <code>null</code> if they are not successfully reported).</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  posStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Position: </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">x </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pos<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">y </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pos<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">z </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pos<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  orientStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Orientation: </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">x </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>orient<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">y </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>orient<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">z </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>orient<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  linVelStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Linear velocity: </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">x </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>linVel<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">y </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>linVel<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">z </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>linVel<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  angVelStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Angular velocity: </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">x </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>angVel<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">y </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>angVel<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">z </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>angVel<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>linAcc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    linAccStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Linear acceleration: </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">x </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>linAcc<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">y </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>linAcc<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">z </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>linAcc<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    linAccStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Linear acceleration not reported'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>angAcc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    angAccStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Angular acceleration: </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">x </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>angAcc<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">y </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>angAcc<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">+</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">z </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>angAcc<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    angAccStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Angular acceleration not reported'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"webvr_events","title":"WebVR events","isH3":false,"content":"<p>The WebVR spec features a number of events that are fired, allowing our app code to react to changes in the state of the VR display (see <a href=\"/en-US/docs/Web/API/WebVR_API#window_events\">Window events</a>). For example:</p>\n<ul>\n  <li><a href=\"/en-US/docs/Web/API/Window/vrdisplaypresentchange_event\" title=\"vrdisplaypresentchange\"><code>vrdisplaypresentchange</code></a> — Fires when the presenting state of a VR display changes — i.e. goes from presenting to not presenting, or vice versa.</li>\n  <li><a href=\"/en-US/docs/Web/API/Window/vrdisplayconnect_event\" title=\"vrdisplayconnect\"><code>vrdisplayconnect</code></a> — Fires when a compatible VR display has been connected to the computer.</li>\n  <li><a href=\"/en-US/docs/Web/API/Window/vrdisplaydisconnect_event\" title=\"vrdisplaydisconnect\"><code>vrdisplaydisconnect</code></a> — Fires when a compatible VR display has been disconnected from the computer.</li>\n</ul>\n<p>To demonstrate how they work, our simple demo includes the following example:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'vrdisplaypresentchange'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Display </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>e<span class=\"token punctuation\">.</span>display<span class=\"token punctuation\">.</span>displayId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> presentation has changed. Reason given: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>e<span class=\"token punctuation\">.</span>reason<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>As you can see, the <a href=\"/en-US/docs/Web/API/VRDisplayEvent\" title=\"event object\"><code>event object</code></a> provides two useful properties — <a href=\"/en-US/docs/Web/API/VRDisplayEvent/display\"><code>VRDisplayEvent.display</code></a>, which contains a reference to the <a href=\"/en-US/docs/Web/API/VRDisplay\"><code>VRDisplay</code></a> the event was fired in response to, and <a href=\"/en-US/docs/Web/API/VRDisplayEvent/reason\"><code>VRDisplayEvent.reason</code></a>, which contains a human-readable reason why the event was fired.</p>\n<p>This is a very useful event; you could use it to handle cases where the display gets disconnected unexpectedly, stopping errors from being thrown and making sure the user is aware of the situation. In Google's Webvr.info presentation demo, the event is used to run an <a href=\"https://github.com/toji/webvr.info/blob/master/samples/03-vr-presentation.html#L174\" class=\"external\" target=\"_blank\"><code>onVRPresentChange()</code> function</a>, which updates the UI controls as appropriate and resizes the canvas.</p>"}},{"type":"prose","value":{"id":"summary","title":"Summary","isH3":false,"content":"<p>This article has given you the very basics of how to create a simple WebVR 1.1 app, to help you get started.</p>"}}],"toc":[{"text":"Getting started","id":"getting_started"},{"text":"Introducing our demo","id":"introducing_our_demo"},{"text":"How does it work?","id":"how_does_it_work"},{"text":"WebVR events","id":"webvr_events"},{"text":"Summary","id":"summary"}],"summary":"This article has given you the very basics of how to create a simple WebVR 1.1 app, to help you get started.","popularity":0,"modified":"2022-10-27T08:51:59.000Z","other_translations":[{"title":"Uso de la API de WebVR","locale":"es","native":"Español"},{"title":"WebVR API の使用","locale":"ja","native":"日本語"},{"title":"Using the WebVR API","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"Использование WebVR API","locale":"ru","native":"Русский"},{"title":"Using the WebVR API","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"en-us/web/api/webvr_api/using_the_webvr_api","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/webvr_api/using_the_webvr_api/index.md","last_commit_url":"https://github.com/mdn/content/commit/081123785142051fba3e353ff2d8c743af69b862","filename":"index.md"},"short_title":"Using the WebVR API","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/WebVR_API","title":"WebVR API"},{"uri":"/en-US/docs/Web/API/WebVR_API/Using_the_WebVR_API","title":"Using the WebVR API"}],"pageTitle":"Using the WebVR API - Web APIs | MDN","noIndexing":false}}</script>
<!-- Mirrored from developer.mozilla.org/en-US/docs/Web/API/WebVR_API/Using_the_WebVR_API by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Feb 2023 04:50:08 GMT -->
</body></html>